//15.136.1-es2019 2025-10-02T09:04:54.523Z (07f601a1d4aaf)
var CS_CONF={"collectionEnabled":true,"projectId":144172,"status":1,"hostnames":["anaconda.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":15,"validationRate":10,"lastTrackingDraw":1737731633,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":0,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":null,"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":1,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":1,"apiErrors":{"collectStandardHeaders":0,"collectionRules":[]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.contentsquare.net","malkaRecordingDomain":"k-aus1.contentsquare.net","staticResourceManagerDomain":"srm.bf.contentsquare.net","voc":{"siteId":null,"enabled":0},"heapEnvironment":{"env_id":"758475466","heap_tag_status":"heap_sideloads_cs"},"implementations":[{"template":{"name":"BlockAllowListForSr","args":{"type":"allow","urls":"www.anaconda.com,www.anaconda.com/products,www.anaconda.com/products/data-science-ai-workbench,www.anaconda.com/download,www.anaconda.com/products/cloud-suite,www.anaconda.com/products/excel-toolbox,www.anaconda.com/products/package-security-manager,www.anaconda.com/products/dashboards,www.anaconda.com/products/application-deployment,www.anaconda.com/products/ai-launcher,www.anaconda.com/products/data-and-models,www.anaconda.com/products/high-performance-python,www.anaconda.com/products/notebooks,learning.anaconda.com/collections"}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural","artificial"]}}]}],"anonymizeDigits":null,"dynamicConfDomain":"t.contentsquare.net/settings","tagVerificationDomain":"tcvsapi.contentsquare.com"};
(()=>{var fu=Object.defineProperty;var gu=(s,r,t)=>r in s?fu(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var ve=(s,r,t)=>gu(s,typeof r!="symbol"?r+"":r,t);var ue={};ue.d=(s,r)=>{for(var t in r)ue.o(r,t)&&!ue.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};ue.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();ue.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);ue.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var Ln={};ue.r(Ln);ue.d(Ln,{getRequestParameters:()=>Hm});function Ss(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t!=null?t:s[r]}function Et(s){return Y(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function Ls(s){return s===parseInt(s,10)}function R(s){return Y(s)&&(typeof s=="string"||s instanceof csString)}function tr(s){return typeof s=="boolean"}function gs(s){return typeof s=="object"}function Y(s){return typeof s!="undefined"}function gt(s){return Y(s)&&s!==null}function W(s){return typeof s=="object"&&s!==null}function mu(s,r,t){return Ls(s)&&s>=r&&s<=t}function on(s){for(let r in s)return!1;return!0}function pe(s){return typeof s=="function"}function Pe(s){return s instanceof Element}function es(s){return s instanceof Error}function an(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var Ei=typeof window=="undefined";function yu(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof ue.g!="undefined"?ue.g:typeof process!="undefined"?process:Function("return this")()}var Z=yu();var ut=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})(),Nr={[ut.debug]:0,[ut.warn]:1,[ut.implementation]:1,[ut.error]:2,[ut.critical]:3},at={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function Eu(s){at=s}var I=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return ss(n,o.bind(this))(...c)}}};function ss(s,r){return function(...t){try{let e=r.apply(this,t);return Y(Z.Promise)&&e instanceof Z.Promise?e.then(i=>i,i=>at.error(es(i)?i:new Error(i),s)):e}catch(e){try{at.error(es(e)?e:new Error(e),s)}catch{}}}}function tt(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function Vn(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function Wo(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function dc(s){let r=self.atob(s);return Vn(r)}function cn(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function Yo(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){at.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let n=r?dc(e[1]):Vn(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var pc=typeof performance!="undefined"&&!!performance.now,Xo=pc?()=>performance.now():()=>csDate.now(),Su=(()=>{var s,r;return pc?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),Un=34164e6,O={now(){return Math.round(Xo()+Su)},elapsed(){return Xo()}};function Ko(){return Math.floor(O.now()/1e3)}function fc(){return typeof window.Promise=="function"}function vu(){var s;return typeof crypto!="undefined"&&pe((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function Jo(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function bt(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Fs(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var _u=Number.MAX_SAFE_INTEGER||9007199254740991,ms={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=_u){return Math.floor(Math.random()*s)}};function Vs(s,r){let t,e,i,n,o,c=null,l=m=>{let d=O.elapsed();if(!m&&c!==null){let g=r-(d-c);if(g>=1){i=Z.csSetTimeout(l,g);return}}let E=d-n;i=null,c=null,n=null,o=s.apply(t,[E,...e])},h=function(){if(t=this,e=arguments,n){c=O.elapsed();return}return n=O.elapsed(),i=Z.csSetTimeout(l,r),o};return h.flushPending=()=>{i&&(Z.csClearTimeout(i),l(!0))},h.cancel=()=>{c=null,n=null,i&&(Z.csClearTimeout(i),i=null)},h}function wu(s=0){return(r,t,e)=>{e.value=Vs(e.value,s)}}var ui=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t,this.values={}}reset(){this.values={}}flush(){if(!s.globalService)return!1;let t=this.values,e=Object.keys(t);if(!e.length)return!1;let i=csArray.prototype.map.call(e,n=>({name:this.name,parameter:n,value:Math.round(t[n])}));return s.globalService.push(i),this.reset(),i.length>0}}return s.globalService=null,tt([I()],s.prototype,"flush",null),s})(),It=(()=>{class s extends ui{constructor(t,e=100){super(t),this.uy=e,this.values={},e&&(this.debouncedFlush=Vs(()=>this.flush(),this.uy))}count(t,e=1){ui.globalService&&(this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),Qo=(()=>{class s extends ui{constructor(){super(...arguments),this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),bu=(()=>{class s extends ui{add(t,e){var i,n,o,c,l,h,m;let d=E=>this.values[`${t}.${E}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(n=(h=this.values)[m=`${t}.total`])!==null&&n!==void 0||(h[m]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((o=d("max"))!==null&&o!==void 0?o:0,e),this.values[`${t}.average`]=d("total")/d("count")}}return s})(),G={counters:{commandsFromIntegrations:new It("commands-from-integrations"),commandsFromCSTC:new It("commands-from-cstc"),commandsFromIframe:new It("commands-from-iframe"),commandApplied:new It("command-applied"),commandError:new It("command-error"),commandMisuse:new It("command-misuse"),CSTCSnippetUsed:new It("cstc-snippet-used"),redactedPII:new It("redacted-pii"),pageAnonymisation:new It("page-anonymisation"),patchedNativeFunctions:new It("patched-native-functions"),pureWindowState:new It("pure-window-state"),sensitiveElements:new It("sensitive-elements"),cspErrors:new It("csp-errors"),networkRequests:new It("network-requests"),webVitalsErrors:new It("web-vitals-errors"),trackedFeatures:new It("tracked-features"),longTasks:new Qo("longTasks"),tasks:new Qo("tasks"),errors:new It("errors"),methodPerformance:new bu("perf")},setService(s){ui.setGlobalService(s)}},Si=(()=>{class s{constructor(){this.yo=0}get length(){return this.yo}get isEmpty(){return!this.ks}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.yo++,this.xr?this.xr=this.xr[1]=[t,void 0]:this.xr=this.ks=[t,void 0]}pop(){if(!this.ks)return null;this.yo--;let t=this.ks[0];return this.ks=this.ks[1],this.ks||(this.xr=void 0),t}forEach(t){let e=this.ks;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.yo=0,this.ks=this.xr=void 0}}return s})(),ln=0,jn=s=>{ln++,csQueueMicrotask(()=>vs(()=>{try{s()}finally{ln--}},fe.MicroTask))},er=new Si,sr=new Si;function Ht(s,r="high"){er.isEmpty&&sr.isEmpty&&gc(Tu),r==="high"?sr.push(Zo(s)):er.push(Zo(s))}function gc(s,r=10){r===0?jn(s):csQueueMicrotask(()=>gc(s,r-1))}function Tu(){for(;!sr.isEmpty;)sr.pop()();for(;!er.isEmpty;)er.pop()()}async function mc(s=1){for(let r=0;r<s;r++)await new Promise(t=>Ht(t))}function Zo(s){return function(){try{s.apply(window,arguments)}catch(r){at.critical(r)}}}var Xi="null",Je=null,yc=[],Au=()=>{var s;return Ei||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!Ei&&Au()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],Je=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{hn({type:"UXA_EVENT",event:s.detail})}),Je.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===Xi)return;Xi=s.data.sessionId,csArray.prototype.forEach.call(yc,r=>r()),Je==null||Je.postMessage({type:"CONNECTED",sessionId:Xi})}}));function Ru(s){Ei||(Xi!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(yc,s)))}function hn(s){Je==null||Je.postMessage(s)}function Us(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function Ce(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function Cu(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let o=r(s[n]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function Hn(s,r){let t=[];return Cu(s,r,e=>csArray.prototype.push.call(t,e)),t}function K(s,r){if(Iu(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function Iu(s){return s.length>=0}function he(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function ir(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function Bn(s,r){let t=s.length;for(let e=0;e<t;e++)if(!r(s[e],e))return!1;return!0}function di(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function Pu(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let o=0;o<s.length;o++)i[n++]=s[o];for(let o=0;o<r.length;o++)i[n++]=r[o];if(!t)return i;for(let o=0;o<t.length;o++)i[n++]=t[o];return i}function ta(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function is(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}var vi=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),_e=(()=>{class s extends vi{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var ea=(()=>{class s extends vi{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),we=(()=>{class s extends vi{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=O.elapsed();t(),this.count++;let i=O.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=O.elapsed();return()=>{this.count++;let e=O.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),Ou=(()=>{class s extends vi{constructor(){super("INP","Value: {value}")}getData(){return{value:mt.tasks.eventListener.max}}}return s})(),mt={general:{category:"General",nbEvents:new _e("Nb of Events"),pendingTasks:new _e("Pending Tasks"),pendingEvents:new _e("Pending Tasks"),nbOfMutationObservers:new ea("Nb of Mutation Observers"),inp:new Ou},mutations:{category:"Mutations",initialDOM:new we("Initial DOM"),pendingMutations:new _e("Nb of Mutations scheduled"),serializedMutations:new we("Serialized Mutations"),count:new _e("Mutation Count"),elementMutationObserved:new ea("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new we("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new _e("Nb of Hidden Elements "),nbElements:new _e("Nb of  Elements")},tasks:{category:"Tasks",tasks:new _e("Tasks"),errors:new _e("Errors"),timer:new we("Timers"),microtask:new we("Microtasks"),mutationObserver:new we("MutationObserver"),monkeyPatch:new we("MonkeyPatch"),eventListener:new we("EventListener"),intersectionObserver:new we("Intersection")}};function Nu(){let s=null;Ru(()=>{let r=n=>Object.keys(n),t=csArray.prototype.map.call(r(mt),n=>mt[n]),e=csArray.prototype.map.call(t,n=>csArray.prototype.filter.call(csArray.prototype.map.call(r(n),o=>n[o]),o=>o instanceof vi));hn({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(n,o)=>({category:n.category,performanceCounters:csArray.prototype.map.call(e[o],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{vs(()=>{let n=Hn(Ce(e,o=>Ce(o,c=>c.getData())),o=>o);hn({type:"UXA_PERFORMANCE_COUNTER",event:n})},fe.Timer)},1e3))})}var fe=(()=>{let s;return function(r){r.Timer="timer",r.MonkeyPatch="monkeyPatch",r.MutationObserver="mutationObserver",r.EventListener="eventListener",r.IntersectionObserver="intersectionObserver",r.MicroTask="microtask"}(s||(s={})),s})(),Jt=null;async function vs(s,r,t=null){if(Jt&&r!==fe.MicroTask)return s();t&&(Jt=t),Jt||(Jt={type:r,elapsed:0},mt.tasks.tasks.increase());try{Jt.elapsed+=Mu(s)}catch(e){mt.tasks.errors.increase(),at.critical(new Error(`Task error:  ${r}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{ln<=0&&(mt.tasks[Jt.type].elapsed(Jt.elapsed),Jt.elapsed>50?G.counters.longTasks.push(Jt.elapsed):G.counters.tasks.push(Jt.elapsed),Jt=null)}}function Mu(s){let r=O.elapsed();return s(),O.elapsed()-r}var Mr,ku="cs-native-frame";var Be={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function Ec(s,r){let t=Ss(window,s);return function(e,i){return t(()=>vs(e,r),i)}}window.csSetTimeout=Ec("setTimeout",fe.Timer);window.csSetInterval=Ec("setInterval",fe.Timer);window.csQueueMicrotask=(Mr=Ss(window,"queueMicrotask"))!==null&&Mr!==void 0?Mr:setTimeout;window.csClearTimeout=Ss(window,"clearTimeout");window.csClearInterval=Ss(window,"clearInterval");window.csFileReader=Ss(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function Du(){let s=document.createElement("iframe");s.id=ku,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function xu(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function Lu(s,r,t){let e=xu(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function Sc(s){var r,t;Object.keys(Be.constructors).forEach(i=>{window[Be.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),ju(s);let e=s.MutationObserver;("Prototype"in window||Uu())&&(e=(t=(r=Ss(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=sa(window.IntersectionObserver,fe.IntersectionObserver),window.csMutationObserver=sa(e,fe.MutationObserver),Cs("csNode",Be.nodeProperties,s.Node.prototype,"get"),Cs("csElement",Be.elementProperties,s.Element.prototype,"get"),Cs("csElement",Be.elementPropertiesValues,s.Element.prototype,"value",!1),Cs("csHTMLImageElement",Be.imageProperties,s.HTMLImageElement.prototype,"set"),Cs("csEvent",Be.eventProperties,s.Event.prototype,"get"),Cs("csNavigator",Be.navigatorProperties,s.navigator,"value")}function Cs(s,r,t,e,i=!0){r.forEach(n=>{let o=typeof n!="string"&&"binding"in n,c=o?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=Lu(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function Fn(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function Vu(){try{let s=Du();return s?(window.CSPureWindow=s,Sc(window.CSPureWindow),!0):!1}catch(s){return Fn("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!Vu())try{Sc(Z)}catch(s){Fn("Critical",`failed to copy references from window: ${s.message}`)}function Uu(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function ju(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function sa(s,r){try{let t=function(e,i){return new s((o,c)=>{vs(()=>e(o,c),r)},i)};return t.base=s,t}catch{return Fn("Warning",`failed to extends ${s.name}`),s}}var dt=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}r.stringReplaceAll=i;function n(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function un(s){return dt.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function Hu(s){let r=s.getAttribute("id");return r&&dt.escapeInvalidCharacters(r)}function ct(s){return s.nodeType===1}function rr(s){return s.nodeType===3}function Bu(s){return s.nodeType===8}function vc(s){return ct(s)&&s.localName==="link"}function Fu(s){return ct(s)&&s.localName==="source"}function _c(s){return ct(s)&&s.localName==="a"}function $n(s){return vc(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function $u(s){return ct(s)&&s.localName==="img"}function pr(s){return ct(s)&&s.localName==="style"}function fr(s){return ct(s)&&s.localName==="input"}function zn(s){return ct(s)&&s.localName==="textarea"}function gr(s){return ct(s)&&s.localName==="script"}function zu(s){return ct(s)&&s.localName==="button"}function $s(s){return ct(s)&&"ownerSVGElement"in s}function Gn(s){return ct(s)&&s.localName==="select"}function Gu(s){return ct(s)&&s.localName==="details"}function qu(s){return ct(s)&&s.localName==="summary"}function Wu(s){return $s(s)&&s.localName==="image"}function Yu(s){return $s(s)&&s.localName==="use"}function Xu(s){return $s(s)&&s.localName==="feImage"}function Ku(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function Ju(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function nr(s){return s.nodeType===9}function pi(s){return Ku(s)&&"host"in s&&"mode"in s}function wc(s){return ct(s)&&!!csElementshadowRoot.apply(s)&&pi(csElementshadowRoot.apply(s))}var Qu=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function Zu(s){return ct(s)&&gt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(Qu,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var _i="detached";function bc(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return or(r)&&csArray.prototype.push.call(t,_i),{ancestors:t,selectionRoot:r}}function td(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&_c(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return or(r)&&csArray.prototype.push.call(t,_i),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function or(s){return Ie.isValidElement(s)}var ds=(()=>{var s,r;return(r=(s=Z.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),qt=ds.matches||ds.matchesSelector||ds.mozMatchesSelector||ds.msMatchesSelector||ds.oMatchesSelector||ds.webkitMatchesSelector,ia=ds.closest,Tc=9;function ed(s,r){return r?csArray.prototype.some.call(r,t=>qt.call(s,t)):!1}function sd(s,r,t){if(s===_i||s.nodeType===Tc)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=un(r),o=0,c=r.previousElementSibling;for(;c;)(un(c)===n||i&&(e!=null&&e.test(c.localName)))&&!ed(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function id(s,r,t){if(s===_i||s.nodeType===Tc)return 0;let e=0,i=r.previousElementSibling;for(;i;)qt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var rd=[/\d{4}/,/^ember\d+$/],nd="@",qn="data-cs-override-id",od="data-cs-dynamic-id";function Ac(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,o=un(s);if(n&&n.test(s.localName)&&(o=csString.prototype.replace.call(o,n,`$1${nd}`)),ld(s,t)){let E=Wn(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${qn}="${E}"]`}}let c=md(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=ad(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=Hu(s);if(ud(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let m=cd(s,e);if(m){let E=id(r,s,m);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${m}](${E})`}}let d=sd(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${d})`}}function ad(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(qt.call(s,e)&&gd(e,r))return e}}function cd(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(qt.call(s,t))return t}}function ld(s,r){let t=Wn(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&Yn(qn,t,r)}function hd(s){return Wn(s)!==null}function Wn(s){return s.getAttribute(qn)}function ud(s,r,t,e){return r&&!hd(s)&&!dd(s,r,e)&&fd(r,t)}function dd(s,r,t){return s.hasAttribute(od)||pd(r,t)}function pd(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(rd,e=>e.test(s))||t)}function fd(s,r){return s&&Yn("id",s,r)}function Yn(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function gd(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function md(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&Yn(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var dn=11;function ar(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return ra(e,t);let i=e,n=s[0],{elementSelector:o,hasUniqueIdentifier:c}=Ac(i,n,r,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${ra(h,t)}${o}`}let l=ar(s,r,t);return`${l?`${l}>`:""}${o}`}function ra(s,r){if(s===_i)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=bc(s.host);return`${ar(t,e,r)}|shadow-root|`}return s.nodeType===dn?"|fragment|":""}var Rc=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),yd=(()=>{class s extends Rc{constructor(){super(...arguments),this.Eo=!1,this.So=!1,this.hc=!1}dy(t,e){return this.Eo&&!(e===null&&or(t))&&t.nodeType!==dn&&!t.host}py(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.dy(t,e))return;let o=!1;e===null&&or(t)&&(o=!0,this.done=!0);let c=this.So&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.hc=!0,this.Eo=!1,this.So=!1),!l&&e===null&&t.nodeType===dn){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.py(t))return;let h=e!=null?e:"detached",{elementSelector:m,hasUniqueIdentifier:d}=Ac(t,h,i,this.options);d&&(this.So=!0,this.Eo=!this.options.fullPath);let E=`${o?`|detached|${c}`:""}${this.Eo&&!d?"":m}`,S=!d&&this.So&&!this.options.fullPath?"":this.path&&!this.hc?">":"";this.hc=!1,this.path=`${E}${S}${this.path}`}}return s})();function ee(s,r=xt.SHOW_ALL){let t=r|xt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=na(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(n){let h=n;return n=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=na(c);if(r&xt.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(Dr[c.nodeType]&r)!==0)return c}return null},visitAll(o){Dr[s.nodeType]&r&&o(s);let c=this.nextNode();for(;c;){if((Dr[c.nodeType]&r)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},find(o){let c;return this.visitAll(l=>o(l)&&(c=l)),c},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function na(s){return s&&wc(s)?s.shadowRoot:null}var kr=(()=>{var s;return(s=Z.Node)!==null&&s!==void 0?s:{}})(),xt=(()=>{var s;return(s=Z.NodeFilter)!==null&&s!==void 0?s:{}})(),Dr={2:xt.SHOW_ATTRIBUTE,4:xt.SHOW_CDATA_SECTION,8:xt.SHOW_COMMENT,11:xt.SHOW_DOCUMENT_FRAGMENT,9:xt.SHOW_DOCUMENT,10:xt.SHOW_DOCUMENT_TYPE,1:xt.SHOW_ELEMENT,[kr.ENTITY_NODE]:xt.SHOW_ENTITY,[kr.ENTITY_REFERENCE_NODE]:xt.SHOW_ENTITY_REFERENCE,[kr.NOTATION_NODE]:xt.SHOW_NOTATION,7:xt.SHOW_PROCESSING_INSTRUCTION,3:xt.SHOW_TEXT},Cc=!1,pn=5;function Ed(s=5){Cc=at.isPerfLoggingActive(),pn=s}function _s(s,r){return function(){if(!Cc)return s.apply(this,arguments);let t=O.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=O.elapsed()-t;i>=pn&&G.counters.methodPerformance.add(r,i)});else{let i=O.elapsed()-t;i>=pn&&G.counters.methodPerformance.add(r,i)}return e}}var At=function(s){return function(r,t,e){let i=e.value;e.value=_s(i,s)}},fs=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&wc(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return ee(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}r.getAllShadowHosts=_s(i,"getAllShadowHosts")}(s||(s={})),s})(),wt=(()=>{let s;return function(r){function t(){let d=[i()];return document.documentElement&&csArray.prototype.push.call(d,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(d,document.body.scrollHeight,document.body.offsetHeight),Math.max(...d)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function o(){let d=window.csScreen.width;return Ls(d)&&d>0?d:window.screen.width}r.screenWidth=o;function c(){let d=window.csScreen.height;return Ls(d)&&d>0?d:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function h(){return window.pageYOffset}r.windowOffsetY=h;function m(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}r.getRequestParameters=m}(s||(s={})),s})(),xr=(()=>{var s;return(s=Z.Node)!==null&&s!==void 0?s:Object})(),rt=(()=>{let s;return function(r){let t="isConnected"in xr.prototype?b=>b.isConnected:b=>!b.ownerDocument||!(b.ownerDocument.compareDocumentPosition(b)&b.DOCUMENT_POSITION_DISCONNECTED);function e(b,D){for(let U=b;U;U=csNodenextSibling.apply(U))D(b)}r.forEachChild=e;function i(b){return t(b)}r.isConnected=i;function n(b,D){let U=[];for(let F of l(b,D))csArray.prototype.push.call(U,F);return U}r.getAncestors=n;let o=(b,D)=>{var U;return(U=csNodeparentNode.apply(b))!==null&&U!==void 0?U:D&&pi(b)?b.host:null};function c(b,D,U=!1){let F=b;for(;F;){if(D(F))return F;let ht=o(F,U);if(ht&&ht!==F)F=ht;else break}return null}r.findAncestor=c;function*l(b,D=!1){let U=b;for(;U;){yield U;let F=o(U,D);if(F&&F!==U)U=F;else break}}r.walkUp=l;function h(b,D){if(b===D||D.contains(b))return!0;let U=r.getParentElement(b);return U&&U!==b?h(U,D):!1}r.isDescendantOf=h;function m(b){var D;return b.parentElement?b.parentElement:r.getRootNode(b)?(D=r.getRootNode(b))===null||D===void 0?void 0:D.host:null}r.getParentElement=m;function d(b,D=document){let U=Us(window.csquerySelectorAll[D.nodeType].call(D,b)),F=fs.getAllShadowHosts(D);for(let ht of F){let Dt=fs.getShadowRoot(ht);if(!Dt)continue;let Bt=Us(window.csquerySelectorAll[Dt.nodeType].call(Dt,b));csArray.prototype.push.call(U,...Bt)}return U}r.findAllElements=d,r.getRootNode=(()=>{if("getRootNode"in xr.prototype)return(U,F)=>U.getRootNode(F);function b(U){let F=D(U);return pi(F)?b(F.host):F}function D(U){return csNodeparentNode.apply(U)!=null?D(csNodeparentNode.apply(U)):U}return(U,F)=>typeof F=="object"&&!!F.composed?b(U):D(U)})();function E(b){return b==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(b)}function g(b){let D=b.getBoundingClientRect();return D.right+wt.windowOffsetX()<0||D.bottom+wt.windowOffsetY()<0}function S(b){var D,U;if(((D=b.checkVisibility)===null||D===void 0?void 0:D.call(b,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!b.offsetParent){if(!b.getBoundingClientRect)return at.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${b instanceof xr} Ctor: ${(U=b==null?void 0:b.constructor)===null||U===void 0?void 0:U.name}`),!1;let Dt=b.getBoundingClientRect();if(Dt.width==0&&Dt.height==0)return!0}let F=window.getComputedStyle(b);return F?F.display==="none"||F.visibility==="hidden"||F.visibility==="collapse"||F.opacity==="0"||F.filter==="opacity(0)"||F.width==="0px"&&F.height==="0px"||E(F.color):!0}r.isHiddenByCSS=S;function P(b){if(S(b))return!0;let U=m(b);return U!=null&&P(U)}r.areAncestorsHiddenByCSS=P;function N(b){let D=null,U=b;do if(S(U))D=U;else break;while(U=m(U));return D}r.getTopAncestorHiddenByCSS=N;function v(b){let D=_(b);return D!==null&&!b.contains(D)&&!D.contains(b)}function _(b){let D=b.getBoundingClientRect(),U=D.left+.5*D.width,F=D.top+.5*D.height;return k(document,U,F)}r.getTopElement=_;function M(b){if(!b.getBoundingClientRect)return null;let D=b.getBoundingClientRect(),U=D.x+D.width/2,F=D.y+D.height/2;return r.getTopElementFromPoint(document,U,F)}r.getElementOnTop=M;function k(b,D,U){let F=b.elementFromPoint(D,U);if(!F)return null;let ht=fs.getShadowRoot(F);return ht&&ht!=r.getRootNode(document.body)&&ht!==b?k(ht,D,U):F}r.getTopElementFromPoint=k;function T(b){return!g(b)&&!S(b)&&!v(b)}r.isVisibleInDocument=T;function B(b){return S(b)?!1:st(b)}r.isVisibleInViewportInForeground=B;function st(b){let D=_(b);return D===null?!1:b===D?!0:Rt(b)?b.textContent!==""&&D.contains(b):b.contains(D)}r.isInViewPort=st;function lt(b,D,U){let F=b.getAttributeNS(D,U);return F===""?b.hasAttributeNS(D,U)?F:null:F}r.getAttributeNS=lt;function Vt(b){return!!(b.hasAttribute("tabIndex")||b.getAttribute("contentEditable")==="true"||_c(b)&&b.hasAttribute("href")||(Gn(b)||zn(b)||fr(b)||zu(b))&&!b.hasAttribute("disabled")||Gu(b)||qu(b))}r.isElementFocusable=Vt;function Rt(b){return b.localName==="span"||b.localName==="a"||b.localName==="b"||b.localName==="i"||b.localName==="button"||b.localName==="input"||b.localName==="label"||b.localName==="cite"||b.localName==="small"||b.localName==="strong"||b.localName==="code"||b.localName==="abbr"||b.localName==="em"||b.localName==="dfn"||b.localName==="time"||b.localName==="output"||b.localName==="object"||b.localName==="sub"}r.isInlineElement=Rt}(s||(s={})),s})(),Sd=(()=>{class s{constructor(t){this.fy=t}run(t){let e=[...this.fy],i=rt.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.gy(e,o,c,n),this.my(e),e.length===0)break;i.length===0&&o.host&&(i=rt.getAncestors(o.host,!1),n=i[i.length-1])}}gy(t,e,i,n){for(let o of t)o.serializeElement(e,i,n)}my(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),vd=(()=>{class s extends Rc{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.yy(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}yy(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.Ey(t.id),t.classList&&(e+=this.Sy(csArray.from(t.classList))),t.attributes&&(e+=this.vy(t)),e}Ey(t){return t?`#${t};`:""}Sy(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}_y(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||$s(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||fr(t)&&e==="value"}wy(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}by(t){let e={};for(let i of csArray.from(t.attributes))this._y(t,i.name)||(e[i.name]=i.value);return e}vy(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.by(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.wy(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),Ie=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let m=o(c);if(m===document)return{path:"",hierarchy:""};if(!t(m))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let d=new yd(h),E=new vd(l);return new Sd([d,E]).run(m),{path:d.getPath(),hierarchy:E.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return r.INVALID_ELEMENT;let{ancestors:m,selectionRoot:d}=bc(h);return ar(m,d,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:m,ancestors:d,selectionRoot:E}=td(h);return{path:ar(d,E,l),firstAnchorParent:m}}r.getElementPathAndFirstAnchorParent=n;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||Ie;var Ic=["t.contentsquare.net","clicktale"],_d=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(Ic,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,H.critical(t)}};window.addEventListener("error",_d);var H=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(Ic,t)}static setStrategy(t){s.Gi=t}static computeIsActive(t){s.Fe=ms.boolean(t),s.Fe?s.pc=ms.boolean(10):s.pc=!1}static isLoggingActive(){return s.Fe}static getStrategy(){return s.Gi}static debug(t,e=""){s.Fe&&this.Gi.send(t,e,ut.debug)}static warn(t,e=!0,i=""){var n;G.counters.errors.count("warning"),s.Fe&&e&&this.Gi.send(t,i,ut.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){G.counters.errors.count("implementation"),s.Fe&&this.Gi.send(t,e,ut.implementation)}static error(t,e=""){var i;G.counters.errors.count("error"),s.Fe&&this.Gi.send(t,e,ut.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){G.counters.errors.count("critical"),this.Gi.send(t,e,ut.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return Y(Z.Promise)&&n instanceof Z.Promise?n.then(o=>o,o=>s.error(es(o)?o:new Error(o),t)):n}catch(n){try{s.error(es(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.pc}}return s.Fe=!1,s.pc=!1,s})();var wd=/^\d+\.\d+(?:\.\d+)?$/,bd=s=>{if(!wd.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},Td=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,Ad=(s,r)=>Td(s,r)>=0;function Zt(s){return bt(s,"data:")}function Rd(s){return bt(s,"#")}function Cd(s){return!!s&&(Fs(s,".css")||bt(s,"https://fonts.googleapis.com/css"))}var Id=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Pc=s=>{let r=new Set(Id);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},Pd=["svg","slot"],Od=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(Pd,s)>-1,Oc={href:new Set(["a"]),src:new Set(["iframe"])},Nd=s=>Oc.hasOwnProperty(s),Md=(s,r,t)=>{var e;return((e=Oc[r])===null||e===void 0?void 0:e.has(s))&&!Zt(t)},kd=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value";function Lr(s){return s?Dd(s):null}function Dd(s){try{let r=/^\/(.*)\/([gim]*)$/.exec(s);if(r){let[,t,e]=r;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var xd=1,Ld="f553e78fb58e051e51fe8074c4c6e73e",fn=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),Vd=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,m,d,E,g,S,P,N;this.isChild=!1,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||Un,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&o!==void 0)||o),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(h=t.apiErrorsEnabled)!==null&&h!==void 0?h:0,...t.apiErrors},this.customErrors={enabled:(m=t.customErrorsEnabled)!==null&&m!==void 0?m:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=Lr(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=Lr(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=Lr(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(d=t.recordingUrlRules)!==null&&d!==void 0?d:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((E=t.uxaDomain)===null||E===void 0?void 0:E.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(g=t.anonymizeDigits)!==null&&g!==void 0?g:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(S=t.recordTargetingRules)!==null&&S!==void 0?S:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(P=t.collectTargetText)!==null&&P!==void 0?P:fn.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(N=t.quotas)!==null&&N!==void 0?N:null}getTrackerUri(){return`${this.ls()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.ls()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${Ld}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.ls()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.ls()}://${this.loggerDomain}`}getMetricsUri(){return`${this.ls()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.ls()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.ls()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.ls()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.ls()}://${this.paProxyDomainUri}`}ls(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===xd}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,o]=i;this.Ty(n,o)}})}Ty(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.od()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.od())return!0;let t=bd(this.getHeapVersion()||"");if(t&&t.major===4&&Ad(t,{major:4,minor:23,patch:5}))return!0}return!1}od(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==fn.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})(),Ud=(()=>{class s{constructor(t,e){this.vo=t,this.ad=e}init(){this.cd=this.vo!==this.vo.top,this.ld=this.ad.isWebView&&this.vo===this.vo.top,this.ad.iframesTracking&&this.cd||this.ld?this.ud=!1:this.ud=!0}isInIframeContext(){return this.cd}isTopWindowTracker(){return this.ud}isInWebViewContext(){return this.ld}}return s})();function oa(){}function cr(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function jd(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Vr=csSymbol("cachedJson");function Hd(s){if(s[Vr])return s[Vr];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+ys(s[0]);for(let t=1;t<s.length;t++)r+=","+ys(s[t]);return r+="]"}return s[Vr]=csJSON.stringify(s)}var ys=typeof window.Symbol!="undefined"?Hd:csJSON.stringify;function Nc(s,r){return csArray.prototype.reduce.call(Object.keys(s),(t,e)=>(r(s[e])||(t[e]=s[e]),t),{})}var fi=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),Mc=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),js=(()=>{class s extends Mc{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.fc(t);let e=fi.toQuery(t);this.Ay(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}Ay(t){let e=new window.Image(1,1);e.onload=oa,e.onerror=oa,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}fc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})();var Bd=(()=>{class s{constructor(t,e){this.hs=t,this.Ry=e}init(){this.us=new js(this.hs.getLoggerUri()),this.us.setRequestParametersProviders(this,this.Ry)}send(t){this._o=t,this.us.send()}getRequestParameters(){return{a:this._o.app,l:this._o.level,m:this._o.message,s:this._o.stacktrace}}}return s})(),Fd=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,$d=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,zd="CS_ANONYMIZED_EMAIL",Ur="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Gd=new csRegExp(`(ey${Ur}\\.ey${Ur}\\.${Ur})`,"g"),qd="CS_ANONYMIZED_JWT",Wd=/[0-9]{4}/,Yd=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Xd="CS_ANONYMIZED_PII",Kd="\u2022",Jd=/\d/g,Qd=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Zd=/(?:\d{1,3}\.){3}\d{1,3}/,tp=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Fe=(()=>{let s;return function(r){function t(m){return csString.prototype.replace.call(m,Fd,zd)}r.replaceEmail=t;function e(m){return csString.prototype.replace.call(m,Gd,qd)}r.replaceJWT=e;function i(m,d){return csString.prototype.replace.call(m,Yd,d)}r.replaceCreditCardNumber=i;function n(m){return csString.prototype.replace.call(m,Jd,Kd)}r.replaceDigits=n;function o(m){return Zd.test(m)||tp.test(m)}r.mayHaveIPAddress=o;function c(m){return Qd.test(m)}r.mayHaveNumberSequence=c;function l(m){return Wd.test(m)}r.mayHaveCreditCardNumber=l;function h(m){return $d.test(m)}r.mayHaveEmail=h}(s||(s={})),s})(),wi=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.Cy(this.gc(t));return e===!0?i=this.Iy(i):e===!1&&(i=this.Py(i)),i}anonymizePII(t){return this.gc(t)}anonymizeJwt(t){return Fe.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.gc(t[i])}),t}gc(t){if(Fe.mayHaveEmail(t)){let e=Fe.replaceEmail(t);return e!==t&&G.counters.redactedPII.count("email"),e}return t}Iy(t){return Fe.replaceDigits(t)}Py(t){return Fe.mayHaveNumberSequence(t)?Fe.replaceDigits(t):t}Cy(t){return Fe.mayHaveCreditCardNumber(t)?Fe.replaceCreditCardNumber(t,(e,i,n,o,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(n,o),""):n;if(!this.Oy(h))return e;G.counters.redactedPII.count("cc")}else G.counters.redactedPII.count("cc-partial");return`${i}${Xd}${c}`}):t}Oy(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let o=parseInt(t[n]);n%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),kc="15.136.1";function Xn(){return{v:kc}}var ep=(()=>{class s{constructor(t,e){this.f=t,this.N=e}getRequestParameters(){return{d:`${O.now()}`,p:this.N.anonymizePII(window.location.href),...this.f.getRequestParameters(),...Xn()}}}return s})(),sp="uxa",aa=5,ip="No stacktrace",Dc="snippet-",xc="implementation-snippet-",ca=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),rp=(()=>{class s{constructor(t,e,i){this.ds=e,this.N=new wi,this.dd=Nr[ut.warn],this.dd=Nr[t.minLogLevel||ut.warn],this.us=i||new Bd(t,new ep(t,this.N)),this.pd={[ut.debug]:[],[ut.warn]:[],[ut.implementation]:[],[ut.error]:[],[ut.critical]:[]},this.wo={implementation:{},dynamic:{}},this.us.init()}send(t,e="",i=ut.warn){if(!this.Ny(i,e))return;csArray.prototype.push.call(this.pd[i],e||"");let n={message:this.My(t,e),stacktrace:this.ky(t),app:sp,level:i};this.us.send(n)}My(t,e){let i=es(t)?this.N.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}ky(t){return es(t)?`${t.stack||ip} ${this.Lr()}`:this.Lr()}Lr(){let t=this.ds.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.ds.getSessionService(),n=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(o)}Ny(t,e){if(Nr[t]<this.dd)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,xc,0))===0)return this.gd(e,ca.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Dc,0))===0)return this.gd(e,ca.DYNAMIC);let i=this.pd[t];return i.length>=aa?!1:!(e&&csArray.prototype.some.call(i,n=>n===e))}gd(t,e){return t in this.wo[e]?this.wo[e][t]>=aa?!1:(this.wo[e][t]+=1,!0):(this.wo[e][t]=1,!0)}}return s})(),Ot=!Ei&&document.createElement("a"),np=/(:443|:80)$/;function de(s){return Ot?(Ot.href=s,Ot.href):""}function op(s,r){return new csURL(s,r).href}function ap(s,r){return csArray.prototype.some.call(r,t=>Fs(s,`.${t}`)||s===t||t==="")}function cp(s){return s[0]==="/"?s:`/${s}`}function la(s){return csString.prototype.replace.call(s,np,"")}function Lc(s){return!Ot||!bt(s,"http://")&&!bt(s,"https://")?null:(Ot.href=s,{hash:Ot.hash,host:la(Ot.host),hostname:Ot.hostname,href:Ot.href,origin:Ot.origin?Ot.origin:la(`${Ot.protocol}//${Ot.host}`),pathname:cp(Ot.pathname),port:Ot.port,protocol:Ot.protocol,search:Ot.search})}var Pt=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})();var lp=(()=>{class s{setContext(t,e){this.O=t,this.R=e}getVisitorService(){return this.O}getSessionService(){return this.R}}return s})(),gn=!1;function hp(){gn=!0}function ot(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&gn||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&gn||e.call(this,i,n)}}}}function up(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function j(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function dp(){let s=new MutationObserver(r=>{r.forEach(t=>{K(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(G.counters.pureWindowState.count("iframe-deletion"),at.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function ha(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function pp(){(!ha(MutationObserver)||!ha(MutationObserver.prototype.observe))&&G.counters.patchedNativeFunctions.count("MutationObserver")}function fp(){try{window.CSPureWindow&&dp(),pp()}catch{}}var yt=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let m=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return m?decodeURIComponent(m[2]):null}r.get=t;function e(l,h,m,d,E,g){let S=encodeURIComponent(`${h}`),P=m===r.CURRENT_DOMAIN?void 0:m,N=i(d),v=N?`;expires=${N.toUTCString()}`:"",_=";path=/",M=gt(P)?`;domain=${P}`:"",k=`${l}=${S}${v}${_}${M}`;return Y(E)&&E!==Qe.NotSet&&(k=`${k};SameSite=${E}`),Y(g)&&g===le.Yes&&(k=`${k};Secure`),document.cookie=k,!0}r.set=e;function i(l){return Et(l)?new csDate(O.now()+l):l}r.toExpireDate=i;function n(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),Qe.None,le.Yes)}r.remove=n;function o(){return document.cookie.length>0}r.isCookiePresent=o;function c(l,h){let m="_cs_root-domain",d=t(m);if(d!==null&&d!=="1")return d;let E=csString.prototype.split.call(window.location.hostname,"."),g=csArray.prototype.pop.call(E);for(;E.length&&(d===null||d==="1");)g=csArray.prototype.join.call([csArray.prototype.pop.call(E),g],"."),e(m,g,g,void 0,l,h),d=t(m);return n(m,g),g}r.getRootDomain=c}(s||(s={})),s})(),gp=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),Qe=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),le=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),mr=(()=>{class s{constructor(t,e,i){this.f=t,this.w=e,this.pi=i,this.mc=!1,this.md=Qe.NotSet,this.yc=le.No}getSameSiteFlag(){return this.md}getSecureFlag(){return this.yc}getDomain(){return this.Ec}getRootDomain(){return this.yd}init(){if(this.f.cookielessTrackingEnabled)return;let t=this.Dy(),e=this.xy();this.mc=this.Ly(t,e),this.mc?(this.md=t,this.yc=e):this.f.secureCookiesEnabled&&this.w.getUrlProtocol()==="https:"&&(this.yc=le.Yes),this.yd=this.Vy(),this.Ec=this.Uy(this.yd)}Ly(t,e){return gp.browserIsSafariV12()?!1:(yt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),yt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(yt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}Dy(){return this.w.getUrlProtocol()==="http:"?Qe.Lax:this.pi.isSameSiteNoneSecureNeeded()||this.f.crossDomainTracking?Qe.None:Qe.Lax}xy(){return this.w.getUrlProtocol()==="http:"?le.No:this.f.secureCookiesEnabled||this.f.crossDomainTracking||this.pi.isSameSiteNoneSecureNeeded()?le.Yes:le.No}isSameSiteSupported(){return this.mc}set(t,e,i,n){let o=yt.toExpireDate(i),c=n?le.Yes:this.getSecureFlag();yt.set(t,e,this.Ec,o,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.Ec;yt.remove(t,i)}Vy(){let t=this.pi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?Qe.None:void 0,i=t?le.Yes:void 0;return yt.getRootDomain(e,i)}Uy(t){return this.f.allowSubdomains?t:yt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),Is="_cs_t",ua="1",mp=(()=>{class s{constructor(t,e){this.wt=t,this.f=e,this.bo=!1,this.To=!1}init(){if(!this.f.cookielessTrackingEnabled&&this.wt.isTopWindowTracker()&&"cookie"in document){if(!this.wt.isInIframeContext()&&yt.isCookiePresent()){this.bo=!0,this.To=!1;return}if(yt.set(Is,ua,yt.CURRENT_DOMAIN),yt.get(Is)!==null){this.bo=!0,this.To=!1,yt.remove(Is,yt.CURRENT_DOMAIN);return}yt.set(Is,ua,yt.CURRENT_DOMAIN,void 0,Qe.None,le.Yes),yt.get(Is)!==null&&(this.bo=!0,this.To=!0,yt.remove(Is,yt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.bo}isSameSiteNoneSecureNeeded(){return this.To}}return s})();function yp(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Ep=(()=>{class s{constructor(t,e){this.f=t,this.pi=e}canTrack(){return this.f.isProjectActive()&&this.jy()&&this.Ed()&&this.Hy()}canTrackInChild(){return this.f.isProjectActive()&&this.By()&&(this.Ed()||this.Fy())}Hy(){return this.f.cookielessTrackingEnabled?yp():this.pi.areCookiesEnabled()}Ed(){return ap(window.location.hostname,this.f.hostnames)}jy(){return!this.Sd()&&this.$y()}By(){return!this.Sd()&&this.zy()}Fy(){return window.location.protocol==="about:"&&window.location.hostname===""}Sd(){return"visibilityState"in document&&document.visibilityState==="prerender"}$y(){return this.vd()&&this.Gy()}zy(){return this.vd()}Gy(){try{return!!window.localStorage}catch{return!1}}vd(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),Sp=(()=>{class s{constructor(t,e){this.Sc=!1,this._d=new Map,this.wd=new Map,this.bd=new Map,this.Td="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";function e(e,t,r,s){return new(r||(r=Promise))((function(o,a){function i(e){try{c(s.next(e))}catch(e){a(e)}}function n(e){try{c(s.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,n)}c((s=s.apply(e,t||[])).next())}))}var t,r;Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError,function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(t||(t={})),function(e){e.debug="debug",e.warn="warn",e.implementation="implementation",e.error="error",e.critical="critical"}(r||(r={})),r.debug,r.warn,r.implementation,r.error,r.critical;let s={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class o{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:r}=t;this.send(r,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.contentType=e.contentType,this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach((t=>{this.queryParams[t]=e[t]}))}removeQueryParams(e){e?e.forEach((e=>{delete this.queryParams[e]})):this.queryParams={}}send(e,r){const o=r||Object.assign({},this.queryParams),a=!("ct"in o),i="application/json"===this.contentType||"string"!=typeof e&&!this.isArrayBuffer(e);"ct"in o||(this.compressionOpts&&a?o.ct=this.compressionOpts.compressionType:o.ct=t.UNCOMPRESSED);const n=i?JSON.stringify(e):e,c=Object.keys(o).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(o[e])}\`)).join("&"),h=\`\${this.endpoint}?\${c}\`;!function(e,t){const r=e.length;for(let s=0;s<r;s++)if(t(e[s],s))return!0;return!1}(this.mandatoryParameters,(e=>null==o[e]))?this.compressionOpts&&a&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,(e=>this.doSend(h,o,e))):this.doSend(h,o,n):s.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${h}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,r){const s=new XMLHttpRequest,o=Object.keys(t).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`)).join("&");s.open("POST",e),this.contentType&&s.setRequestHeader("Content-Type",this.contentType),s.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:s.responseText,status:s.status};this.onLoadCallback(e)}},s.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:o,metadata:t,events:r}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(s.timeout=this.timeout,s.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>s.abort(),Object.keys(this.headers).forEach((e=>{s.setRequestHeader(e,this.headers[e])})),s.send(r)}}class a{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class i{constructor(e){this.ramStorage={},this.byteSizeCounter=new a(e)}save({key:e,metadata:t,events:r}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:r}))}recover(e){const t=[];this.getStorageKeys().forEach((e=>{const r=this.ramStorage[e];void 0!==r&&(delete r.metadata.datatype,t.push(r),this.removeItem(e))})),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var n;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(n||(n={}));class c{constructor(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=n.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new a(t),this.init()}init(){return e(this,void 0,void 0,(function*(){yield this.openCache(),this.cacheState===n.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}))}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach((e=>{this.save(e)})),this.toBeSavedBuffer=[]}save(t){return e(this,void 0,void 0,(function*(){try{if(this.cacheState===n.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(t);if(this.cacheState!==n.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:e,metadata:r,events:s}=t;if(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached())return;yield this.cache.put(\`\${this.origin}/\${e}\`,new Response(s,{headers:r}))}catch(e){}}))}recover(t){return e(this,void 0,void 0,(function*(){(this.cache||(yield this.openCache(),this.cacheState===n.READY))&&this.doRecover(t)}))}openCache(){return e(this,void 0,void 0,(function*(){try{this.cacheState=n.OPEN_IN_PROGRESS,this.cache=yield self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=n.READY}catch(e){this.cacheState=n.OPEN_FAILED}}))}doRecover(t){return e(this,void 0,void 0,(function*(){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const e=yield this.cache.keys();if(0===e.length)return;const r=(yield this.cache.matchAll()).map((e=>{const t={};e.headers.forEach(((e,r)=>{t[r]=e})),delete t["content-type"];const r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((e=>({metadata:t,events:e}))):e.arrayBuffer().then((e=>({metadata:t,events:e})))})),s=yield Promise.all(r);yield Promise.all(e.map((e=>this.cache.delete(e)))),t(s),this.byteSizeCounter.reset()}catch(e){}finally{this.recoveryInProgress--}}))}}class h{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new c(e,h.MAX_SIZE,(e=>{this.setRamStorageStrategy(e)}))}setRamStorageStrategy(e){this.storageStrategy=new i(h.MAX_SIZE),e&&e.forEach((e=>{this.storageStrategy.save(e)}))}}h.MAX_SIZE=16777216,function(){const t="CS_WORKER_SIGNATURE",r=new Map,s=new h("csPersisted");function a(e){var a;if((a=e)&&a.WORKER_SIGNATURE===t)switch(e.type){case"CreatePostRequest":{const{endpoint:a,compressionOutputType:i,useRetry:n,mandatoryParameters:c}=e,h={endpoint:a,mandatoryParameters:c,worker:!0};i&&(h.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(h.recoveryStorage=s);const d=new o(h);r.set(a,d),d.onLoad((e=>{const r={type:"onLoad",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)})),d.onError((e=>{const r={type:"onError",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)}))}break;case"SetQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.removeQueryParams(s)}break;case"Send":{const{endpoint:t,payload:s,queryParams:o}=e,a=r.get(t);a&&a.send(s,o)}break;case"Abort":{const{endpoint:t}=e,s=r.get(t);s&&s.abort()}break;case"SetHeader":{const{endpoint:t,headerName:s,headerValue:o}=e,a=r.get(t);a&&a.setRequestHeader(s,o)}break;case"SetTimeout":{const{endpoint:s,timeout:o}=e,a=r.get(s);a&&a.onTimeout((()=>{const e={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:t};self.postMessage(e)}),o)}break;default:throw new Error(JSON.stringify(e))}}self.addEventListener("message",(function(t){t.data.getReader?function(t,r){e(this,void 0,void 0,(function*(){const e=t.getReader();for(;;){const{done:t,value:s}=yield e.read();if(t)break;r(s)}}))}(t.data,a):a(t.data)}))}()})();`;try{this.ps=this.qy(e||i),this.Sc=!0,s.isTransferableStreamSupported()&&(this.Ad=new ReadableStream({start:n=>{this.vc=n},cancel:()=>{this.vc=null}}),this.ps.postMessage(this.Ad,[this.Ad]))}catch(n){n.name==="SecurityError"&&G.counters.cspErrors.count("network-worker"),this.Sc=!1}}postMessage(t){t.WORKER_SIGNATURE=this.Td,this.vc?this.vc.enqueue(t):this.ps.postMessage(t)}qy(t){let e=window.csURL||window.webkitURL,i=window.Blob,n=window.Worker,o=new i([t],{type:"application/javascript"}),c=e.createObjectURL(o);H.whiteListFilename(c);let l=new n(c);return l.onmessage=h=>{let{type:m,endpoint:d,WORKER_SIGNATURE:E}=h.data;if(E===this.Td){if(m==="onLoad"){let{response:g}=h.data,S=this._d.get(d);S&&S(g)}else if(m==="onError"){let{response:g}=h.data,S=this.wd.get(d);S&&S(g)}else if(m==="onTimeout"){let g=this.bd.get(d);g&&g()}}},l}registerOnLoadCallback(t,e){this._d.set(t,e)}registerOnErrorCallback(t,e){this.wd.set(t,e)}registerOnTimeoutCallback(t,e){this.bd.set(t,e)}isSupported(){return this.Sc}static isTransferableStreamSupported(){try{let t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),vp=(()=>{class s{constructor(t){var e;this.Kt={},this.Jt=t.endpoint,this.we=t.networkWorker,this.Wy=t.compressionOutputType,this.Yy=t.useRetry,this.we.postMessage({type:"CreatePostRequest",endpoint:this.Jt,compressionOutputType:this.Wy,useRetry:this.Yy,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this.we.postMessage({type:"SetQueryParams",endpoint:this.Jt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),e=>{this.Kt[e]=t[e]})}getQueryParams(){return this.Kt}removeQueryParams(t){this.we.postMessage({type:"RemoveQueryParams",endpoint:this.Jt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.Kt[e]})}send(t,e){this.we.postMessage({type:"Send",endpoint:this.Jt,payload:t,queryParams:e})}abort(){this.we.postMessage({type:"Abort",endpoint:this.Jt})}onLoad(t){this.we.registerOnLoadCallback(this.Jt,t)}onError(t){this.we.registerOnErrorCallback(this.Jt,t)}setRequestHeader(t,e){this.we.postMessage({type:"SetHeader",endpoint:this.Jt,headerName:t,headerValue:e})}onTimeout(t,e){this.we.registerOnTimeoutCallback(this.Jt,t),this.we.postMessage({type:"SetTimeout",endpoint:this.Jt,timeout:e})}}return s})(),yr=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),Vc=(()=>{class s{constructor(t){this.onError=t}}return s})(),_p=(()=>{class s{constructor(t){var e;this.Kt={},this._c={},this.Rd=i=>{for(let n of i){let{metadata:o,events:c}=n;this.send(c,o)}},this.Jt=t.endpoint,this.Vr=t.compressionOpts,this.Qt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.wc=t.contentType,this.worker=!!t.worker,this.Qt&&this.Qt.recover(this.Rd)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Kt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Kt[e]}):this.Kt={}}send(t,e){let i=e||{...this.Kt},n=!("ct"in i),o=this.wc==="application/json"||typeof t!="string"&&!this.Xy(t);"ct"in i||(!this.Vr||!n?i.ct=yr.UNCOMPRESSED:i.ct=this.Vr.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(m=>`${encodeURIComponent(m)}=${encodeURIComponent(i[m])}`).join("&"),h=`${this.Jt}?${l}`;if(ir(this.mandatoryParameters,m=>i[m]==null)){at.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.Vr&&n&&typeof c=="string"?this.Vr.compressor(c,this.Vr.compressionOutputType,m=>this.Cd(h,i,m)):this.Cd(h,i,c)}onLoad(t){this.qi=t}onError(t){this.Ur=t}onTimeout(t,e){this.fi=t,this.jr=e}abort(){this.Id&&this.Id()}setRequestHeader(t,e){this._c[t]=e}getQueryParams(){return this.Kt}Xy(t){return t&&t.byteLength!==void 0}Cd(t,e,i){let n=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t),this.wc&&n.setRequestHeader("Content-Type",this.wc),n.onload=()=>{if(this.Qt&&this.Qt.recover(this.Rd),this.qi){let c={params:e,responseText:n.responseText,status:n.status};this.qi(c)}},n.onerror=()=>{this.Qt&&this.Qt.save({key:o,metadata:e,events:i}),this.Ur&&this.Ur({params:e})},this.jr&&this.fi&&(n.timeout=this.jr,n.ontimeout=()=>{this.fi()}),this.Id=()=>n.abort(),Object.keys(this._c).forEach(c=>{n.setRequestHeader(c,this._c[c])}),n.send(i)}}return s})(),Uc=(()=>{class s{constructor(t){this.bc=t,this.we=new Sp(this.bc)}create(t,e,i,n,o=[]){if(this.we.isSupported()&&e)return new vp({networkWorker:this.we,endpoint:t,compressionOutputType:i,useRetry:!!n,mandatoryParameters:o});{let c=i?{compressor:this.bc.compress,compressionOutputType:i,compressionType:this.bc.algorithm}:void 0;return new _p({endpoint:t,compressionOpts:c,recoveryStorage:n})}}}return s})(),wp=(()=>{class s{constructor(t,e,i,n,o){this.O=t,this.R=e,this.Xe=i,this.vt=n,this.f=o}get(){return{exclusion:this.Xe.getAppliedTrackingDraw(),visitor:this.O.getVisitor(),session:this.R.getSession(),cvars:this.vt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.Xe.exclude(this.f),this.O.removeVisitor(),this.R.removeSession(),this.vt.removeCustomVariablesSession()}include(t){this.Xe.removeExclusion(),this.O.setVisitor(t.visitor),t.session?this.R.setSession(t.session):this.R.removeSession(),t.cvars?this.vt.setCustomVariableSession(t.cvars):this.vt.removeCustomVariablesSession()}}return s})(),lr=".",Kn="__DOT__",bp=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,jc="x";function Tp(s){let[r,t,e,i,n,o,c,l,h]=Pp(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===jc?null:h}}function Ap(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:jc],csString),Cp),lr)}function Rp(s){return bp.test(s)}function Cp(s){return csString.prototype.replace.call(s,/\./g,Kn)}function Ip(s){return csString.prototype.replace.call(s,new csRegExp(Kn,"g"),lr)}function Pp(s){return csString.prototype.indexOf.call(s,Kn)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,lr),Ip):csString.prototype.split.call(s,lr)}var V=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),Gt=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),ts=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),Qt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),mn=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})();var Op=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),Hc=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,Bc=".";function Np(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],Bc)}function Mp(s){if(!Jn(s))return null;let r=yn(s);return r!==null?Fc(r):null}function Fc(s){var r,t;let[e,i,n,o]=csString.prototype.split.call(s,Bc);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:mn.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:Op.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function Jn(s){return Hc.test(s)}function yn(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,Hc))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var Te="_cs_ex",da=2592e6,kp=/^[0-9]+$/,Dp=(()=>{class s{constructor(t,e,i){this.f=t,this.M=e,this.K=i}onCookieToSet(t){this.gi=t}onCookieToRemove(t){this.mi=t}get(){return this.f.cookielessTrackingEnabled?Number(this.K.getItem(Te)):Number(this.M.get(Te))}set(t){var e;this.f.cookielessTrackingEnabled?this.K.setItem(Te,t):(this.M.set(Te,t,da),(e=this.gi)===null||e===void 0||e.call(this,Te,t,da))}remove(){var t;this.f.cookielessTrackingEnabled?this.K.removeItem(Te):(this.M.delete(Te),(t=this.mi)===null||t===void 0||t.call(this,Te))}static isValidExclusionString(t){return kp.test(t)}}return s})(),$e="_cs_cvars",xp=(()=>{class s{constructor(t,e,i){this.f=t,this.M=e,this.K=i}onCookieToSet(t){this.gi=t}onCookieToRemove(t){this.mi=t}get(){return this.f.cookielessTrackingEnabled?this.K.getItem($e):this.M.get($e)}set(t){var e;this.f.cookielessTrackingEnabled?this.K.setItem($e,t):(this.M.set($e,t),(e=this.gi)===null||e===void 0||e.call(this,$e,t))}remove(){var t;this.f.cookielessTrackingEnabled?this.K.removeItem($e):(this.M.delete($e),(t=this.mi)===null||t===void 0||t.call(this,$e))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();function Oe(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var Er=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return is(this.set)}get count(){return this.set.size}}return s})(),Lp=(()=>{class s extends Er{constructor(t="high"){super(),this.tE=t}add(t){this.set.add(t),this.set.size===1&&Ht(()=>{this.set.clear()},this.tE)}}return s})();function Sr(s,r=!1){let t=new Er;return{push(e){t.count===0&&(r?Ht:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}function Vp(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=jp(r);return t===""||(r=Hp(r,t),r.length===0)?"":$c(r[0])}function Up(s){return csString.prototype.indexOf.call(s,"@")!==-1}function jp(s){return s.length>0?$c(s[0]):""}function Hp(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function $c(s){let r="",t;Up(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var Bp=s=>s;function Fp(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let m=c[l],d=Reflect.set(c,l,h);return e.forEach(E=>E(this,h,m,"subproperty")),d}}):this[i]=o,this[i])},set(){var n;let o=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){at.error(h)}return l}})}function $p(s,r,t){let e=zp(s,r);if(!e)return null;let i=(n,o,c,l)=>t(n,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function zp(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,Fp(s,r,i,e),e):(at.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(at.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function Gp(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return at.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(is(i),m=>m(c))}catch(m){at.critical(m)}let h=n.apply(this,c);return vs(()=>{let m={result:h,context:this,args:c};csArray.prototype.forEach.call(l,d=>d(m))},fe.MonkeyPatch),h};Wp(o,n),s[r]=o}return i}function zt({target:s,methodName:r,hook:t,hookPrepareArgs:e=Bp,options:i}){let n=Gp(s,r);if(!n)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:Vp()}:{};return m=>t({...m,...h,args:l})};return{activate:()=>{n.add(o)},deactivate:()=>{n.delete(o)}}}function qp(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,Object.defineProperty(s,r,{set(){var n;let o=this[r],c=arguments;return vs(()=>{e.forEach(l=>l(this,c[0],o,"property"))},fe.MonkeyPatch),(n=i.set)===null||n===void 0?void 0:n.apply(this,c)}}),e):(at.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null):e}function hr(s,r,t){let e=qp(s,r);if(!e)return null;let i=(n,o,c)=>t(n,o,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Wp(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var zs=(()=>{var s;class r{static eE(e){this.Ds.forEach(i=>{e(i,"initial")})}static Hr(e){if(this.D||(this.D=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&K(n.addedNodes,this.sE),K(n.removedNodes,this.iE)})),csArray.prototype.push.call(this.Te,e),!this.z){this.z=!0,this.D.observe(document,this.Br);for(let i of fs.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.Ds.add(n),this.D.observe(n,this.Br)}this.Ic||(this.Ic=zt({target:Element.prototype,methodName:"attachShadow",hook:i=>this.rE(i.result)&&this.Nd(i.result)})),this.Ic.activate()}this.eE(e)}static rE(e){return e.isConnected&&e.ownerDocument===document}static Fr(e){var i,n;this.Te=csArray.prototype.filter.call(this.Te,o=>o!==e),this.Te.length===0&&(this.Te=[],this.z=!1,(i=this.D)===null||i===void 0||i.disconnect(),(n=this.Ic)===null||n===void 0||n.deactivate(),this.Ds.clear())}constructor(e){this.A=e,this.A=ss("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return is(s.Ds)}takeRecords(){var e,i;return(i=(e=s.D)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){fs.isSupported()&&s.Hr(this.A)}disconnect(){fs.isSupported()&&s.Fr(this.A)}}return s=r,r.Te=[],r.Ds=new Set,r.z=!1,r.Br={childList:!0,subtree:!0},r.Nd=t=>{s.Ds.has(t)||(s.D.observe(t,s.Br),s.Ds.add(t),K(s.Te,e=>e(t,"added")))},r.sE=t=>{ee(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.Nd)},r.iE=t=>{t.isConnected||ee(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.Ds.has(e)&&(s.Ds.delete(e),K(s.Te,i=>i(e,"removed")))})},tt([I()],r.prototype,"observe",null),tt([I()],r.prototype,"disconnect",null),r})(),pa={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},ye=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static Pc(e){if(s.shadowRootFilters.length>0&&pi(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,pa)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Ht(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,pa)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(fs.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.Pc(document),this.shadowRootObserver=new zs(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,K(this.shadowRootObserver.shadowRoots,n=>{this.Pc(n)}))}static disconnect(e,i){var n,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.A=e,this.Md=i;let n=Sr(o=>e(o,this),!0);this.A=ss("DocumentMutationObserver:callback",o=>{K(o,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?Pu(i,n):i!=null?i:n}observe(){s.observe(this.A,this.Md)}disconnect(){s.disconnect(this.A,this.Md)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{mt.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{K(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.Pc(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,tt([I()],r.prototype,"observe",null),tt([I()],r.prototype,"disconnect",null),r})(),jr;function Nt(s){if(jr||(jr=document.createElement("div")),!(!!s&&R(s)))return at.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return qt.call(jr,s),!0}catch{return at.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function Hs(s,r){if(ia)return ia.call(s,r);let t=s;do{if(qt.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var ne=(()=>{class s{get selectors(){return this.$e===""?null:this.$e}constructor(t,e={closest:!1}){this.A=t,this.Tt=e,this.$e="",this.$r=new Er,this.Ao=_s(i=>{if(this.$e==="")return;let n=[];for(let o of Hn(i,c=>c.addedNodes)){if(!(Ju(o)||this.Tt.closest&&rr(o)))continue;let c=this.Tt.closest?this.nE(o,this.$e):this.findMatchingElements(o,this.$e);ta(c,n)}n.length&&this.A(n,"added")},"SelectorObserver.processMutations"),this.oE=(i,n)=>{if(this.$e===""||n!=="added")return;let o=this.findMatchingElements(i,this.$e);o.length&&this.A(o,"added")},this.G=new ye(this.Ao,this.oE)}observe(t){this.$e===""?this.G.observe():this.$e+=",",this.$e+=t;let e=this.findMatchingElements(document,t);for(let i of this.G.shadowRoots){let n=this.findMatchingElements(i,t);ta(n,e)}e.length&&(K(e,i=>{this.$r.add(i)}),this.A(e,"initial"))}processPendingMutations(){this.Ao(this.G.takeRecords())}disconnect(){this.G.disconnect(),this.$r.clear(),this.$e=""}nE(t,e){let i=[];if(rr(t)){if(t.parentElement){let n=Hs(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.$r.has(n)===!1)}else{if(Pe(t)){let n=Hs(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,o=>this.$r.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=Us(window.csquerySelectorAll[t.nodeType].call(t,e));return ct(t)&&qt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.$r.has(n)===!1)}}return tt([I()],s.prototype,"observe",null),tt([I()],s.prototype,"disconnect",null),tt([At("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})();function Yp(){let s=csSymbol.for("propStore");return{getStore(r){return r[s]},get(r,t){let e=r[s];return e==null?void 0:e[t]},set(r,t,e){let i=r[s];i||(i={},r[s]=i),i[t]=e}}}var Ki=Yp(),X=(()=>{let s;return function(r){function t(l,h,m){var d;if(typeof Node!="undefined"&&l instanceof Node)Ki.set(l,h,m);else{let E=l;(d=E.props)!==null&&d!==void 0||(E.props={}),E.props[h]=m}}r.setProperty=t;function e(l,h){var m;return typeof Node!="undefined"&&l instanceof Node?Ki.get(l,h):(m=l.props)===null||m===void 0?void 0:m[h]}r.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?Ki.getStore(l):l.props}r.getProperties=i;function n(l,h){let m=null;return o(l,(d,E,g)=>h(d)&&(m=d)&&!!g()),m}r.findDescendant=n;function o(l,h){c(l,void 0,h)}r.traverse=o;function c(l,h,m){let d=!1;if(m(l,h,()=>d=!0),d)return;let g=l.shadowRoot;g&&c(g,l,m);let S=l.children;if(S!=null&&S.length){for(let P of S)if(P&&(c(P,l,m),d))break}}}(s||(s={})),s})(),x=(()=>{let s;return function(r){let t;(function(v){v[v.NotMasked=0]="NotMasked",v[v.Parent=1]="Parent",v[v.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(v){return gs(v)&&"Attributes"in v&&"PIISelectors"in v?v.Attributes instanceof Array&&v.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(v){if(!gs(v)||v===null)throw new Error("Command misuse: setPIISelectors");return"Attributes"in v||(v.Attributes=[]),"PIISelectors"in v||(v.PIISelectors=[]),v}r.sanitizeSelectorUserInput=i;function n(v){var _;return(_=X.getProperty(v,r.maskedProp))!==null&&_!==void 0?_:{state:t.NotMasked}}r.getMaskedElementDetails=n;function o(v){var _;return(_=X.getProperty(v,r.maskedAttributeProp))!==null&&_!==void 0?_:{attributes:[]}}r.getMaskedAttributeDetails=o;function c(v){let _=X.getProperty(v,r.maskedProp);return(_==null?void 0:_.state)===t.Parent}r.isMaskedElement=c;function l(v){let _=X.getProperty(v,r.maskedProp);return(_==null?void 0:_.state)===t.Child}r.isMaskedElementChild=l;function h(v,_){let M=X.getProperty(v,r.maskedAttributeProp);return((M==null?void 0:M.attributes)==null?void 0:csArray.prototype.indexOf.call(M==null?void 0:M.attributes,_))>-1}r.isMaskedAttribute=h;function m(v,_){X.setProperty(v,r.maskedProp,_)}r.setMaskedElementProperty=m;function d(v){X.setProperty(v,r.maskedProp,void 0)}r.unsetMaskedElementProperty=d;function E(v,_){X.setProperty(v,r.maskedAttributeProp,_)}r.setMaskedAttributeProperty=E;function g(v,_){let M=csArray.prototype.filter.call(v.PIISelectors,B=>Nt(B));_.elementSelector.length>0&&csArray.prototype.push.call(M,...csString.prototype.split.call(_.elementSelector,","));let k=N([...M]),T={elementSelector:csArray.prototype.join.call(k,","),attrSelector:_.attrSelector,attrSelectors:_.attrSelectors};return csArray.prototype.forEach.call(v.Attributes,B=>{B!=null&&B.attrName&&(B!=null&&B.selector)&&Nt(B.selector)&&!S(T.attrSelectors,B)&&csArray.prototype.push.call(T.attrSelectors,B)}),T.attrSelector=P(T.attrSelectors),T}r.getComputedSelectorSettings=g;function S(v,_){return csArray.prototype.some.call(v,M=>M.selector===_.selector&&M.attrName===_.attrName)}function P(v){let _="";return csArray.prototype.forEach.call(v,M=>{let k=csString.prototype.split.call(M.selector,",");csArray.prototype.forEach.call(k,T=>{Nt(T)&&(_&&(_+=","),_+=T)})}),_}function N(v){if(v.length<=1)return v;let _=[];for(let M of v){let k=csString.prototype.split.call(M,",");for(let T of k)csArray.prototype.indexOf.call(_,T)===-1&&csArray.prototype.push.call(_,T)}return _}}(s||(s={})),s})(),Ee=(()=>{class s{constructor(){this.ae=[],this.isStarted=!1}produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:O.now(),t.timestamp==null&&(t.timestamp=O.now()),csArray.prototype.forEach.call(this.ae,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.ae=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.ae,t),()=>{let e=csArray.prototype.indexOf.call(this.ae,t);csArray.prototype.splice.call(this.ae,e,1)}}}return s})(),zc=1,ri=csSymbol("nodeIdentifier");function Xp(s=!1){s&&(zc=1),ri=csSymbol("nodeIdentifier")}function Kp(s){return X.getProperty(s,ri)}function it(s){let r=X.getProperty(s,ri);return r!=null?r:(X.setProperty(s,ri,zc++),X.getProperty(s,ri))}var Jp=(()=>{class s extends Ee{constructor(t){super(),this.B=null,this.Ro=null,this.D=null,this.xs=null,this.kd=["value","checked","src","data","alt"],this.Co={state:x.MaskedElementState.Child},this.aE=e=>{for(let i of e){if(x.isMaskedElement(i.target)||x.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let o=i.addedNodes[n];x.isMaskedElement(o)||x.isMaskedElementChild(o)||ct(o)&&this.Dd(o)}for(let n=0;n<i.removedNodes.length;n+=1){let o=i.removedNodes[n];rt.isConnected(o)||this.xd(o)}}},this.cE=t}setMaskedElementSettings(t){this.fs=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.fs||(at.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.fs={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.fs;(t=this.xs)!==null&&t!==void 0||(this.xs=this.lE()),o.length!==0&&((e=this.B)!==null&&e!==void 0||(this.B=this.hE()),this.B.observe(o)),c.length!==0&&((i=this.Ro)!==null&&i!==void 0||(this.Ro=this.uE(l)),this.Ro.observe(c)),(n=this.D)!==null&&n!==void 0||(this.D=new ye(this.aE,(h,m)=>m==="added"&&this.dE(h))),this.D.observe(),csSetTimeout(this.cE)}onStop(){var t,e,i;this.B&&(this.xd(document),this.B.disconnect()),(t=this.Ro)===null||t===void 0||t.disconnect(),(e=this.D)===null||e===void 0||e.disconnect(),(i=this.xs)===null||i===void 0||i.disconnect()}lE(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}hE(){return new ne(t=>{csArray.prototype.forEach.call(t,e=>{this.pE(e)?this.Dd(e):(this.fE(e),this.gE(e))})})}uE(t){return new ne(e=>{csArray.prototype.forEach.call(e,i=>this.mE(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=x.getMaskedElementDetails(t.target);if(i.state!==x.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:x.MaskedElementState.Parent,width:e.width,height:e.height};x.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:it(t.target),width:e.width,height:e.height})}gE(t){!this.xs||!ct(t)||gr(t)||this.xs.observe(t)}pE(t){let e=csNodeparentNode.apply(t);return e?x.isMaskedElement(e)||x.isMaskedElementChild(e):pi(t)?x.isMaskedElement(t.host)||x.isMaskedElementChild(t.host):!1}dE(t){(x.isMaskedElement(t.host)||x.isMaskedElementChild(t.host))&&x.setMaskedElementProperty(t,this.Co)}xd(t){ee(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{x.unsetMaskedElementProperty(i)})}fE(t){let e=t.getBoundingClientRect(),i={state:x.MaskedElementState.Parent,width:e.width,height:e.height};x.setMaskedElementProperty(t,i),this.yE(t),ee(t).visitAll(n=>n!=t&&x.setMaskedElementProperty(n,this.Co))}Dd(t){x.setMaskedElementProperty(t,this.Co),ee(t).visitAll(e=>e!=t&&x.setMaskedElementProperty(e,this.Co))}yE(t){var e;let i=(e=X.getProperty(t,x.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.kd.length;n+=1){let o=this.kd[n];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&x.setMaskedAttributeProperty(t,i)}mE(t,e){var i;let n=(i=X.getProperty(t,x.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&qt.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&x.setMaskedAttributeProperty(t,n)}}return Oe([I()],s.prototype,"resizeObserverCallback",null),s})(),Ae=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return X.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){X.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){X.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),Qp=(()=>{class s{constructor(){this.Oc=0,this.V=!1,this.Ld="data-cs-capture",this.Ls=t=>{for(let e of t){if(Ae.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];Ae.isWhitelistedElement(n)||ct(n)&&this.Vd(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];rt.isConnected(n)||this.Ud(n)}}}}start(){this.Oc++,!this.V&&(this.V=!0,this.EE())}EE(){this.B||(this.B=new ne(e=>K(e,i=>this.Vd(i))));let t=this.Nc?`[${this.Ld}], ${this.Nc}`:`[${this.Ld}]`;this.B.observe(t),this.D||(this.D=new ye(this.Ls,(e,i)=>i==="added"&&this.SE(e))),this.D.observe()}stop(){this.V&&(this.Oc--,this.Oc===0&&(this.V=!1,this.vE()))}vE(){this.B&&(this.Ud(document),this.B.disconnect()),this.D&&this.D.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Nt(t))this.Nc=t;else if(e)throw new Error("Command misuse: setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Nc}Vd(t){ee(t).visitAll(e=>{Ae.whitelistElement(e)})}SE(t){Ae.isWhitelistedElement(t.host)&&Ae.whitelistElement(t)}Ud(t){ee(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{Ae.removeWhitelistElement(i)})}}return s})(),Ke=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){return X.getProperty(n,r.EDITABLE_NODE_PROP)===!0}r.isEditableNode=t;function e(n){X.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){X.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})(),Zp=(()=>{class s{constructor(){this.B=null,this.D=null,this.V=!1,this.Ls=t=>{for(let e of t)if(Ke.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!Ke.isEditableNode(n)){if(rr(n)||Bu(n)){Ke.markEditableNode(n);continue}ct(n)&&this.jd(n)}}}}start(){this.V||(this.V=!0,this.B=new ne(t=>K(t,e=>{this.jd(e)})),this.B.observe("[contenteditable]"),this.D=new ye(this.Ls,(t,e)=>e==="added"&&this._E(t)),this.D.observe())}stop(){var t,e;this.V&&(this.V=!1,(t=this.B)===null||t===void 0||t.disconnect(),this.B=null,(e=this.D)===null||e===void 0||e.disconnect(),this.D=null)}jd(t){ee(t).visitAll(e=>{Ke.markEditableNode(e)})}_E(t){Ke.isEditableNode(t.host)&&Ke.markEditableNode(t)}}return s})(),tf=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="toEncrypt";function t(n){return X.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){X.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){X.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})();var ef="spki",fa="RSA-OAEP",sf="SHA-256",ga="AES-CTR",rf="SHA-1",ma=190,ni=(()=>{let s;return function(r){var t;let e=!1,i=null,n,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=Z.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function h(){return i}r.getCryptoKey=h;function m(){var k,T;return((T=(k=Z.self.crypto)===null||k===void 0?void 0:k.subtle)===null||T===void 0?void 0:T.encrypt)!=null&&Z.self.CryptoKey!=null}r.isSupported=m;async function d(k){n=r.crypto.importKey(ef,dc(k),{name:fa,hash:sf},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||at.warn(`Fail to import public key '${k}'`)}r.importKey=d;async function E(k){if(!m()||e)return null;await n;let T=Vn(k);T.byteLength>ma&&(T=T.slice(0,ma));try{let B=await r.crypto.encrypt({name:fa},i,T);return Wo(B)}catch{return null}}r.asymmetricEncrypt=E;async function g(k,T){if(!m()||e)return null;let B={counter:T.initializationVector,name:ga,length:64},st=o.encode(k);try{let lt=await r.crypto.encrypt(B,T.cryptoKey,st);return Wo(lt)}catch{return null}}r.symmetricEncrypt=g;async function S(k){let T=await P(k);if(!T)throw new Error("Export secret failed");let B=await E(T);if(!B)throw new Error("Encrypt secret failed");return B}r.encryptSecret=S;async function P(k){var T;if(!m())return null;try{return(T=(await r.crypto.exportKey("jwk",k)).k)!==null&&T!==void 0?T:null}catch{return null}}async function N(){if(!m()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:ga,length:128},!0,["encrypt","decrypt"]),initializationVector:Z.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=N;function v(k){c=k}r.setDigestSalt=v;async function _(k){k=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(k)),c&&(k=`${k}:${c}`);let T=o.encode(k);try{let B=await r.crypto.digest(rf,T);return cn(B)}catch{return null}}r.digest=_;function M(){return Z.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=M}(s||(s={})),s})(),be=(()=>{let s;return function(r){r.REGEX="regex",r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),ze=(()=>{let s;return function(r){r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),hs=(()=>{let s;return function(r){r.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",r.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",r.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",r.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),Gc=(()=>{class s{constructor(){this.kc=[]}setRegexRules(t){this.kc=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.bE(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.kc,e=>this.Bd(t,e))}getMatchingRules(t){return csArray.prototype.filter.call(this.kc,e=>this.Bd(t,e))}Bd(t,e){var i,n;let o=this.TE(t,e);return!this.AE(e)||!this.RE(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((n=e.regex)===null||n===void 0)&&n.test(o))}AE(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}RE(t){let e=t.samplingRate!==100,i=e&&ms.boolean(t.samplingRate);return!e||i}Io(t){return!bt(t,"http://")&&!bt(t,"https://")?`https://${t}`:t}TE(t,e){let i=Lc(this.Io(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}Po(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}bE(t){let e=null,i=!1;switch(t.operator){case ze.NOT_START:case be.NOT_START:i=!0;case ze.START:case be.START:e=new csRegExp(`^${t.value}`,this.Po(t));break;case ze.NOT_END:case be.NOT_END:i=!0;case ze.END:case be.END:e=new csRegExp(`${t.value}$`,this.Po(t));break;case ze.NOT_CONTAIN:case be.NOT_CONTAIN:i=!0;case ze.CONTAIN:case be.CONTAIN:case be.REGEX:e=new csRegExp(`${t.value}`,this.Po(t));break;case ze.NOT_EXACT:case be.NOT_EXACT:i=!0;case ze.EXACT:case be.EXACT:e=new csRegExp(`^${t.value}$`,this.Po(t));break;default:at.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.Fd(t.startDate):void 0,o=t.endDate?this.Fd(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,maskMedia:t.maskMedia,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:o}}Fd(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),nf=(()=>{class s{constructor(t,e,i,n){this.ce=t,this.zr=e,this.Gr=i,this.bt=n}init(){this.CE()}shouldMaskNonTextElements(){if(this.ce.anonymisationMethod!==hs.replayRecordingMaskedUrlRegexRules)return!1;if(this.ce.isSMB)return this.shouldUseAnonymization();let t=this.Gr.getMatchingRules(this.zr.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.bt&&!this.bt.isReplayUnanonymizedAllowedByConsent()){switch(this.ce.anonymisationMethod){case null:case hs.replayRecordingUnmaskedUrlRegex:return!(this.ce.replayRecordingUnmaskedUrlRegex&&this.ce.replayRecordingUnmaskedUrlRegex.test(this.zr.getAnonymizedUrl()));case hs.replayRecordingUnmaskedUrlRegexRules:return!this.Gr.evaluateUrl(this.zr.getAnonymizedUrl())}return!0}else{switch(this.ce.anonymisationMethod){case null:case hs.replayRecordingMaskedUrlRegex:return!!(this.ce.replayRecordingMaskedUrlRegex&&this.ce.replayRecordingMaskedUrlRegex.test(this.zr.getAnonymizedUrl()));case hs.replayRecordingMaskedUrlRegexRules:return this.Gr.evaluateUrl(this.zr.getAnonymizedUrl())}return!1}}CE(){this.ce.anonymisationMethod===hs.replayRecordingMaskedUrlRegexRules&&this.ce.replayRecordingMaskedUrlRegexRules?this.Gr.setRegexRules(this.ce.replayRecordingMaskedUrlRegexRules):this.ce.anonymisationMethod===hs.replayRecordingUnmaskedUrlRegexRules&&this.ce.replayRecordingUnmaskedUrlRegexRules&&this.Gr.setRegexRules(this.ce.replayRecordingUnmaskedUrlRegexRules)}}return s})();function of(s){return s.nodeType===1}function Tt(s){let r=csEventtarget.apply(s);return r&&of(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function af(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function cf(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(Tt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var _t=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Hi=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),lf=(()=>{class s{compute(t,e){let i=this.Vs(e.x)-this.Vs(t.x),n=this.Vs(e.y)-this.Vs(t.y),o=e.time-t.time;return{duration:o,distance:this.$d(i,n),direction:this.IE(i,n),velocity:this.PE(i,n,o)}}computePinchMetrics(t,e){let i=this.Vs(e.x)-this.Vs(t.x),n=this.Vs(e.y)-this.Vs(t.y);return{duration:e.time-t.time,distance:this.$d(i,n)}}getScale(t,e){return Math.abs(e/t-1)}Vs(t){return t/window.devicePixelRatio}$d(t,e){return Math.round(Math.sqrt(t*t+e*e))}PE(t,e,i){let n=i/1e3,o=t/n,c=e/n;return Math.round(Math.abs(o)+Math.abs(c))}IE(t,e){return Math.abs(t)>Math.abs(e)?t>0?Hi.RIGHT:Hi.LEFT:e>0?Hi.DOWN:Hi.UP}}return s})(),qc=typeof performance!="undefined"&&!!performance.now,ya=qc?()=>performance.now():()=>csDate.now(),hf=(()=>{var s;return qc?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),Bi={now(){return Math.round(ya()+hf)},elapsed(){return ya()}};function Ea(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var uf=1e3,df=100,pf=.1,En=(()=>{class s{constructor(){this.Ht={},this.Dc=()=>{},this.Oo=new lf,this.Ae()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.Dc=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.OE(t))return;this.NE(t)&&this.Ae();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Bi.now()};if(t.touches.length===1)this.Ht.startPinchTime=e.time,this.Ht.firstTouch=e;else if(t.touches.length===2&&(this.Ht.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Bi.now()},this.Ht.firstTouch&&this.Ht.secondTouch)){let i=this.Oo.computePinchMetrics(this.Ht.firstTouch,this.Ht.secondTouch);this.Wi=i.distance}csArray.prototype.push.call(this.qr,e),this.Mo=Tt(t)}processActionMove(){this.xc=!0}processActionUp(t){if(this.ME(t)){if(csArray.prototype.push.call(this.qr,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Bi.now()}),this.kE(t)&&this.Ht.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Ht.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Bi.now()};this.Ht.firstTouch&&(this.Ht.firstTouch=e,this.Ht.secondTouch=i),this.DE(t)}this.Wi||this.xE()&&this.LE(t)}}Ae(){this.qr=[],this.Mo=null,this.xc=!1,this.Wi=null,this.Wr=!0}LE(t){let e=this.Oo.compute(this.qr[0],this.qr[1]);this.Wr=t.isTrusted;let i=this.xc?this.VE(e):this.UE(e);if(this.jE(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=Ea(n.pageX,1),i.pageY=Ea(n.pageY,1)}this.Dc(i,t)}DE(t){if(!(this.Ht.firstTouch&&this.Ht.secondTouch))return;let e=this.Oo.computePinchMetrics(this.Ht.firstTouch,this.Ht.secondTouch);this.Wr=t.isTrusted;let i=this.HE(e);i&&this.Dc(i,t)}HE(t){return!this.Wi||this.Oo.getScale(this.Wi,t.distance)<pf?void 0:{type:this.Wi>t.distance?_t.PINCH_IN:_t.PINCH_OUT,target:this.Mo,distance:t.distance,isTrusted:this.Wr}}VE(t){return{type:t.velocity<df?_t.DRAG:_t.FLICK,target:this.Mo,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.Wr}}UE(t){return{type:t.duration<uf?_t.TAP:_t.LONG_PRESS,target:this.Mo,isTrusted:this.Wr}}jE(t,e){return t===_t.TAP&&e&&e.length===1}NE(t){return t.touches.length===1}xE(){return this.qr.length===2}OE(t){return t.touches.length>0}ME(t){return t.changedTouches.length>0}kE(t){return this.xc&&!!this.Wi&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),Qn=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),Wc=!0,Ji=csSymbol("safe"),Sa=csSymbol("task");function pt(s,r=Wc){var t;(t=s[Ji])!==null&&t!==void 0||(s[Ji]=function(e){let i=arguments;vs(()=>(e[Sa]=Jt,s.listener.apply(s.boundElement,i)),fe.EventListener,e[Sa])}),s.boundElement.addEventListener(s.type,s[Ji],r)}function ft(s,r=Wc){s.boundElement.removeEventListener(s.type,s[Ji],r)}var ff=(()=>{class s extends Qn{constructor(t){super(),this.BE=t,this.Us=[{boundElement:document,type:"touchstart",listener:e=>this.J(e)},{boundElement:document,type:"touchmove",listener:e=>this.J(e)},{boundElement:document,type:"touchend",listener:e=>this.J(e)}],this.Yr=new En,this.Yr.onGesture((e,i)=>this.Lc(e,i))}Lc(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Us,t=>pt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Us,t=>ft(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}J(t){this.BE.tryToExecute("process gesture event",()=>{if(this.Yr.isValidTouchEvent(t))switch(t.type){case"touchstart":this.Yr.processActionDown(t);break;case"touchmove":this.Yr.processActionMove();break;case"touchend":this.Yr.processActionUp(t);break}})()}static isSwipe(t){return t.type===_t.FLICK||t.type===_t.DRAG}}return s})();var Lt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})();var Es;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(Es||(Es={}));function Yc(s){return s.tagDeploymentMode===Es.DualCollectionReview||s.tagDeploymentMode===Es.DualCollection}function gf(s){return Yc(s)||s.tagDeploymentMode===Es.LoadClicktalePtc}var va=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=o}(s||(s={})),s})();var mf=(()=>{class s{constructor(t){this.mt=t}on(t,e){return i=>{this.mt.hasValidEventTarget(i)&&this.lS(i,t)&&e(i)}}lS(t,e){let i=Tt(t);return qt.call(i,e)}isMatchesSelectorSupported(){return!!qt}}return s})(),yf=(()=>{class s extends Lt{constructor(){super(),this.Xd=0}onStart(){H.isPerfLoggingActive()&&(this.Xr=window.csSetInterval(()=>this.Kd(),s.hS))}onStop(){H.isPerfLoggingActive()&&(this.Kd(),csClearInterval(this.Xr))}Kd(){this.Xd>=s.uS||G.counters.methodPerformance.flush()&&this.Xd++}}return s.hS=5e3,s.uS=5,s})(),Ef=(()=>{class s{constructor(){}init(){this.Jd=new yf}onStartTracking(){this.Jd.start()}onOptout(){this.Jd.stop()}}return s})();var Sf=["hpd"],vf=["hrfs","hsd","hsp","hss","hsh","hpp","hps","hph"],_f=["sendHeapContext"],wf=(()=>{class s{constructor(t,e){this.Yi=t,this.E=e}init(){this.E.register(_f,t=>{let e=this.gS(t);e&&this.Yi.setHeapPageViewProps(e)})}onAfterNaturalPageView(){this.Yi.resetHeapPageViewProps()}onAfterArtificialPageView(){this.Yi.resetHeapPageViewProps()}gS(t){if(!W(t)){H.error("heapPvProps must be an object");return}let e={};for(let i of Sf){let n=t[i];if(!R(n)||n.length===0){H.error(`heapPvProps.${i} is required and must be a non-empty string`);return}e[i]=n}for(let i of vf){let n=t[i];if(n!=null&&!R(n)){H.error(`heapPvProps.${i} must be a string, undefined or null`);return}e[i]=n||void 0}return bf(e)}}return s})();function bf(s){return Nc(s,r=>r===void 0)}var Tf=(()=>{class s{getRequestParameters(){if(!this.Hs)return{};let t={hr:this.Hs.hrfs,hl:Af(this.Hs),hpd:this.Hs.hpd,hpp:this.Hs.hpp,hpq:this.Hs.hps,hph:this.Hs.hph};return Rf(t)}setHeapPageViewProps(t){this.Hs=t}resetHeapPageViewProps(){this.Hs=void 0}}return s})();function Af(s){let{hsd:r,hsp:t,hss:e,hsh:i}=s;return r?csString.prototype.concat.call(r,t||"",e||"",i||""):void 0}function Rf(s){return Nc(s,r=>!r)}var Cf=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},If=5e3,Pf=(()=>{class s extends Mc{constructor(t,e,i){super(t,e),this.Xi=null,this.mS=(i==null?void 0:i.type)||"json",this.tp=i==null?void 0:i.cacheMinutes,this.jr=i==null?void 0:i.timeout}onLoad(t){this.qi=t}onError(t){this.Ur=t}onTimeout(t,e){this.fi=t,this.jr=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.fc(t);let e=fi.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.yS(i,this.mS)}abort(){this.Xi&&(this.Xi.abort(),this.Xi=null)}isInProgress(){return this.Xi!==null}yS(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var o;return(o=this.Ur)===null||o===void 0?void 0:o.call(this,n)},n.ontimeout=()=>{var o;return(o=this.fi)===null||o===void 0?void 0:o.call(this,n)},n.onload=()=>{var o,c;n.status>=200&&n.status<400?((o=this.qi)===null||o===void 0||o.call(this,this.ES(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Ur)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.Xi=null},n.timeout=(i=this.jr)!==null&&i!==void 0?i:If,this.Xi=n,n.send()}ES(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}fc(t){let e;this.tp?e=`${Cf(this.tp)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})();var gi={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11};var _a=new Map,Hr=!Ei&&document.implementation.createHTMLDocument("");function Xc(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function Of(s){if(!pr(s))return null;let r=Kc(s);if(r===null||r.length===0)return null;let t="";if(an(s.textContent))K(r,e=>t+=e.cssText);else{let e=Nf(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,o=0;n<r.length;n+=1,o+=1)i[o]=r[n];K(i,n=>t+=n.cssText)}return t}function Nf(s){if(!Hr)return 0;let r=_a.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,Hr.head.appendChild(t);let e=Kc(t);return r=e?e.length:0,_a.set(s.textContent,r),Hr.head.removeChild(t),r}function Kc(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var si=s=>s instanceof HTMLFormElement?"form":s.localName;var ws=(()=>{class s{constructor(t){this.csId=it(t),this.props=Ki.getStore(t)}}return s})(),Jc=(()=>{class s extends ws{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),ks=(()=>{class s extends ws{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=gi.ELEMENT_NODE,this.localName=si(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=Of(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new Jc(c);csArray.prototype.push.call(this.children,l)}$s(t)&&X.setProperty(this,"SVG",!0),(pr(t)||$n(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===gi.ELEMENT_NODE}static getAttribute(t,e){return he(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})(),Mf=(()=>{class s extends ws{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),kf=(()=>{class s extends ws{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),Df=(()=>{class s extends ws{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),xf=(()=>{class s extends ws{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),Lf=(()=>{class s extends ws{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),Vf=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let o=e[n];i[n]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&$n(t)&&(i[n].value=Xc(t))}return i}}return s})(),wa={workTime:40,async:!0,initialDOM:!0};var oi=csSymbol("InitialDom"),ba=csSymbol.for("ignoreNextSerialization");function Qc(s){return s[ba]?(delete s[ba],!0):!1}function Uf(s=wa){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=wa.workTime);let n=ss("serialize:callback",E=>e(E)),o=new Si,c=(E,g)=>{E.hasChildNodes()&&o.push({node:E,serializedNode:g});let S=E instanceof Element&&csElementshadowRoot.apply(E);if(S){let P=g.shadowRoot=ai(S);s.async&&s.initialDOM&&X.setProperty(S,oi,!0),c(S,P)}},l,h=!0,m=8,d=ss("work",()=>{var E;if(h)l=ai(t),s.async&&s.initialDOM&&X.setProperty(t,oi,!0),c(t,l),h=!1;else if(o.isEmpty)return;let g=Bf(100);for(;!o.isEmpty;){if(s.async&&g.elapsed()>=s.workTime){--m<=0&&csSetTimeout(d);return}let{node:S,serializedNode:P}=o.pop(),N=(E=P.children)!==null&&E!==void 0?E:[];if(gr(S))continue;let v=0;for(let _=csNodefirstChild.apply(S);_;_=csNodenextSibling.apply(_)){if(Qc(_))continue;let M=ai(_);s.async&&s.initialDOM&&X.setProperty(_,oi,!0),N[v++]=M,c(_,M)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,d();else for(let E=0;E<m;E++)csSetTimeout(d,1)}}function jf(s){let r=ai(s),t=r;if(gr(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))Qc(n)||(t.children[e++]=Sn(n));let i=s.shadowRoot;return i&&(t.shadowRoot=Sn(i)),r}var Sn=_s(jf,"serializeSync");function ai(s){let r,t;switch(s.nodeType){case 1:t=r=new ks(s),r.attributes=Ff(s);break;case 3:t=new Jc(s);break;case 4:t=new Mf(s);break;case 8:t=new kf(s);break;case 10:t=new Df(s);break;case 9:t=new xf(s);break;case 11:t=new Lf(s);break;default:throw new Error("Node type not supported: "+s.nodeType)}return t}function Hf(){oi=csSymbol("InitialDom")}function Bf(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=O.elapsed();return{started:t,elapsed(){return++r%s===0&&(t=O.elapsed()),t-this.started}}}function Ff(s){return gr(s)?[]:Vf.create(s)}var $f=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,zf="\uFF41",Gf=/[^ａ\s]/g,qf="a";function Br(s){let r=csString.prototype.replace.call(s,$f,zf);return csString.prototype.replace.call(r,Gf,qf)}var Wf=(()=>{class s{constructor(t,e,i,n=null,o=!1){this.Ke=t,this.vS=e,this.N=i,this.Ho=n,this._S=o,this.wS=Pc(this.vS)}sanitize(t,e){return X.traverse(t,(i,n)=>{if(i.anonymized=this.Ke,i.nodeType===gi.TEXT_NODE){let o=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(o.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?X.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=l,o.data=c;return}if(ks.isElement(i))return this.bS(i);if(i.nodeType===gi.CDATA_SECTION_NODE){let o=i;o.data=this.Ke?Br(o.data):this.N.checkAndAnonymizePII(o.data,this.Ho);return}}),t}setAnonymization(t){this.Ke=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[Ae.ANONYMIZED_TEXT_STATUS_PROP])===Ae.WHITELISTED_STATUS;return this.Ke&&!n?{anonymizedValue:Br(t),withAnonymization:!0}:{anonymizedValue:this.N.checkAndAnonymizePII(t,this.Ho),withAnonymization:!1}}bS(t){if(X.getProperty(t,"SVG"))return;let e=he(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.Ke,n.value=this.getAnonymizedAttributeValue(t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n){if(this.TS(t,e,n))return i;if(Nd(e))return Md(t,e,i)?this.N.anonymizePII(i):i;let o=this._S&&e==="placeholder";return this.Ke&&(kd(t,e,n)||o)?Br(i):this.Ke?"":this.N.checkAndAnonymizePII(i,null)}TS(t,e,i){return Od(t,e,i)||this.wS.has(e)}}return s})(),Yf=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let o=0;o<i.length;o+=1)n=csString.prototype.charCodeAt.call(i,o)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var Zc=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.NS}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.MS();if(i===null)return null;let{bubbles:n=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,n,o,c),i}static MS(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.NS="cs.tracking.",s})();var tl=(()=>{class s{constructor(){this.HS=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml","text/javascript"]}setCollectionOptions(t){this.Xc=t}isValidBodyType(t){let e=t["content-type"];if(!e)return!1;let i=csString.prototype.toLocaleLowerCase.call(e);return ir(this.HS,n=>cr(i,n))}canCollect(t,e){return this.BS(t,e)&&this.FS(e)}BS(t,e){return t>=400||t>=200&&t<300&&this.Xc.statusCodes.has(t)&&this.$S(e)}$S(t){return ir(this.Xc.urls,e=>csString.prototype.indexOf.call(t,e)!==-1)}FS(t){return Bn(this.Xc.excludedDomains,e=>csString.prototype.indexOf.call(t,e)===-1)}}return s})(),Xf=(()=>{class s extends tl{constructor(){super(),this.V=!1,this.Qi=null,this.zS=({result:t,args:e,callerName:i})=>{this.interceptFetch(t,e,i)}}onEvent(t){this.L=t}start(){this.V||this.GS()&&(this.qS(),this.Qi&&this.Qi.activate(),this.V=!0)}stop(){this.V&&(this.Qi&&this.Qi.deactivate(),this.V=!1)}GS(){return!!window.fetch&&typeof window.fetch=="function"}WS(t){if(t[0]&&typeof t[0].clone=="function"){let e=Us(t);return e[0]=t[0].clone(),e}return t}qS(){this.Qi||(this.Qi=zt({target:window,methodName:"fetch",hook:this.zS,hookPrepareArgs:this.WS,options:{withCallerName:!0}}))}async interceptFetch(t,e,i){let n=e[0],o=e[1],c=new Request(n,o);if(!R(c.url))return;let l=O.now(),h;try{h=await t}catch(g){if(this.YS(g)||this.cp(g)||this.XS(g)||this.KS(g))return;throw g}let[m,d]=csString.prototype.split.call(c.url,"?"),E=de(m);if(h&&super.canCollect(h.status,E)){let g={library:i,method:c.method,url:E,queryParameters:d,requestTime:l,responseTime:O.now(),statusCode:h.status,requestBody:"",responseBody:"",requestHeaders:this.lp(c.headers),responseHeaders:this.lp(h.headers)};if(!h.bodyUsed&&super.isValidBodyType(g.responseHeaders))try{g.responseBody=await h.clone().text()}catch(S){if(this.cp(S))return}super.isValidBodyType(g.requestHeaders)&&(g.requestBody=await c.text()),this.L(g)}}YS(t){return t instanceof TypeError}cp(t){return t instanceof DOMException&&t.name==="AbortError"}KS(t){return t instanceof DOMException&&t.name==="TimeoutError"}XS(t){return t instanceof DOMException&&csArray.prototype.some.call(s.JS,e=>e===t.name)}lp(t){let e={};return t.forEach((i,n)=>{i&&(e[csString.prototype.toLowerCase.call(n)]=csString.prototype.trim.call(i))}),e}}return s.JS=["NoModificationAllowedError","InvalidStateError","OperationError"],j([I("FetchRequestTracker.interceptFetch")],s.prototype,"interceptFetch",null),s})(),Kf=0,Jf=(()=>{class s extends tl{constructor(){super(),this.Ft=csSymbol("ApiCall"),this.V=!1,this.Zi=null,this.tr=null,this.Bo=null,this.QS=({context:t,args:e,callerName:i})=>this.interceptOpen(t,e,i),this.ZS=({context:t,args:e})=>this.interceptSetRequestHeader(t,e),this.sv=({context:t,args:e})=>this.interceptSend(t,e)}onEvent(t){this.L=t}start(){this.V||(this.Kc(),this.Zi&&this.Zi.activate(),this.tr&&this.tr.activate(),this.Bo&&this.Bo.activate(),this.V=!0)}stop(){this.V&&(this.Zi&&this.Zi.deactivate(),this.tr&&this.tr.deactivate(),this.V=!1)}Kc(){this.Zi||(this.Zi=zt({target:XMLHttpRequest.prototype,methodName:"open",hook:this.QS,options:{withCallerName:!0}})),this.tr||(this.tr=zt({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.ZS})),this.Bo||(this.Bo=zt({target:XMLHttpRequest.prototype,methodName:"send",hook:this.sv}))}interceptOpen(t,e,i){if(!e[1]||!R(e[1]))return;let[n,o]=csString.prototype.split.call(e[1],"?");t[this.Ft]={library:i,requestTime:O.now(),method:e[0],url:de(n),queryParameters:o,statusCode:Kf,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",()=>this.readyStateChangeListener(t))}readyStateChangeListener(t){t[this.Ft]&&t.readyState===XMLHttpRequest.DONE&&this.canCollect(t.status,t[this.Ft].url)&&(t[this.Ft].responseTime=O.now(),t[this.Ft].statusCode=t.status,t[this.Ft].responseHeaders=this.iv(t.getAllResponseHeaders()),super.isValidBodyType(t[this.Ft].responseHeaders)&&(t.responseType===""||t.responseType==="text")&&(t[this.Ft].responseBody=t.responseText),this.L(t[this.Ft]))}interceptSetRequestHeader(t,e){if(!t[this.Ft])return;let i=e[0],n=csString.prototype.valueOf.call(new csString(e[1]));typeof i!="string"||n.length===0||(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),n=csString.prototype.trim.call(n),t[this.Ft].requestHeaders[i]?t[this.Ft].requestHeaders[i]+=`, ${n}`:t[this.Ft].requestHeaders[i]=n)}interceptSend(t,e){t[this.Ft]&&super.isValidBodyType(t[this.Ft].requestHeaders)&&typeof e[0]=="string"&&(t[this.Ft].requestBody=e[0])}iv(t){let e={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),i=>{let[n,o]=csString.prototype.split.call(i,/:\s*/);o&&(e[csString.prototype.toLowerCase.call(n)]=csString.prototype.trim.call(o))}),e}}return j([I("XhrRequestTracker.interceptOpen")],s.prototype,"interceptOpen",null),j([I("XhrRequestTracker.readyStateChangeListener")],s.prototype,"readyStateChangeListener",null),j([I("XhrRequestTracker.interceptSetRequestHeader")],s.prototype,"interceptSetRequestHeader",null),j([I("XhrRequestTracker.interceptSend")],s.prototype,"interceptSend",null),s})(),Qf=(()=>{class s{constructor(){}onLoad(t){this.qi=t}onLoadCallbackExecute(){this.qi()}start(){let t=this.onLoadCallbackExecute.bind(this);this.rv(t)}rv(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return j([I("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),Zf=(()=>{class s{constructor(t){this.Fo=t.performance}getRequestParameters(){if(this.nv())return{};let t=this.ov();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}ov(){let t=this.Fo.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}nv(){return!(this.Fo&&this.Fo.timing&&this.Fo.timing.loadEventEnd>0)}}return s})(),jt=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(n,o)=>o.enhanceAnalysisEvent(t,n),e)}}return s})(),z=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT",r[r.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),Fr=(()=>{let s;return function(r){r.SUCCESS="success",r.FAILURE="failure",r.ATTEMPT="attempt"}(s||(s={})),s})(),Os=(()=>{let s;return function(r){r.APPCUES="appcues",r.CHAMELEON="chameleon",r.CONTENTSQUARE="contentsquare",r.SEGMENT="segment",r.WEB="web"}(s||(s={})),s})();function tg(s){return s.tgtHM!==void 0}function el(s){return s.tgt!==void 0}function eg(s){return s.tgtLk!==void 0}function sg(s){return s.x!==void 0&&s.y!==void 0}function ig(s){return s===Fr.SUCCESS||s===Fr.FAILURE||s===Fr.ATTEMPT}function rg(s){return s===Os.APPCUES||s===Os.CHAMELEON||s===Os.CONTENTSQUARE||s===Os.SEGMENT||s===Os.WEB}var ng=(()=>{class s{constructor(t,e,i){this.Zt=t,this.xt=e,this.Tt=i}processGesture(t,e){switch(t.type){case _t.TAP:this.av(e);break;case _t.FLICK:this.cv(t,e);break;case _t.DRAG:this.lv(t,e);break;default:break}}av(t){let e={type:z.TAP,ts:0,x:0,y:0,tgt:""},i=jt.build(t,e,this.Zt);i.tgt!==Ie.INVALID_ELEMENT&&this.L(i)}lv(t,e){var i,n;let o={type:z.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Tt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Tt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=jt.build(e,o,this.Zt);c.tgt!==Ie.INVALID_ELEMENT&&this.L(c)}cv(t,e){var i,n;let o={type:z.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Tt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Tt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=jt.build(e,o,this.Zt);c.tgt!==Ie.INVALID_ELEMENT&&this.L(c)}onEvent(t){this.L=t}start(){this.xt.subscribe(s.hp,(t,e)=>this.processGesture(t,e))}stop(){this.xt.unsubscribe(s.hp)}}return s.hp="AnalysisGestureTracker",j([ot()],s.prototype,"processGesture",null),s})();function vr(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],o=null,c=0,l,h=()=>{c=O.now(),o=null,l=s.apply(i,n),n=[],i=null},m=function(...d){if(i=this!==null&&this!==void 0?this:Z,n=[...d],e==="trailing")return o||(o=Z.csSetTimeout(h,t)),l;let E=O.now(),g=t-(E-c);return g<=0||g>t?(c=E,l=s.apply(i,n),o?(Z.csClearTimeout(o),o=null):n=[]):o||(o=Z.csSetTimeout(h,g)),l};return m.cancel=()=>{o&&(Z.csClearTimeout(o),c=0,o=null,n=[])},m.flushPending=()=>{o&&(Z.csClearTimeout(o),h())},m}var _r=s=>(r,t,e)=>{e.value=vr(e.value,s)},Ta="data-cs-scroll-container";function og(s){try{if(gt(csEventtarget.apply(s)))return!0}catch{}return!1}var Ds=(()=>{let s;return function(r){function t(i){return!!(gt(i)&&og(i)&&Pe(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Ta)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Ta}]`)}r.getScrollContainer=e}(s||(s={})),s})(),xs=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),q=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})(),ag=(()=>{class s{constructor(t,e,i,n=["submit"]){this.Zt=t,this.mt=e,this.Lt=i,this.hv=n,this.up="select, select *, input, textarea",this.uv="select, select *, input, textarea",this.dp="a, a *, button, button *, select, select *, input, textarea",this.Qr="input, select, textarea",this.pv="form",this.$o=150,this.fv=400,this.pp=!1,this.Zr=Vs((o,c)=>this.scrollListener(o,c),this.$o),this.fp=Vs(o=>this.resizeListener(o),this.$o),this.gv=vr(o=>this.mouseMoveListener(o),this.fv),this.mv=[{boundElement:window,type:"resize",listener:()=>this.fp()},{boundElement:document,type:"scroll",listener:o=>this.Zr(o)},{boundElement:window,type:"mousemove",listener:o=>{this.gv(af(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.gp=[{type:"change",listener:this.Lt.on(this.uv,o=>this.changeListener(o))},{type:"submit",listener:this.Lt.on(this.pv,o=>this.submitListener(o))}],this.yv=[{boundElement:document,type:"mouseover",listener:this.Lt.on(this.dp,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.Lt.on(this.dp,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.Lt.on(this.up,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.Lt.on(this.up,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.Lt.on(this.Qr,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.Lt.on(this.Qr,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.Lt.on(this.Qr,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.Lt.on(this.Qr,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.Lt.on(this.Qr,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.gp,o=>({...o,boundElement:document}))],this.U={},this.Jc=(o,c)=>{switch(c){case"initial":case"added":this.Ei(o);break;case"removed":this.Si(o);break}},this.ue=new zs(this.Jc),this.Qc()}Ei(t){if(nr(t)){let e=this.mp();csArray.prototype.forEach.call(e,i=>pt(i))}else{let e=this.yp();csArray.prototype.forEach.call(e,i=>{pt({...i,boundElement:t})})}}Si(t){if(nr(t)){let e=this.mp();csArray.prototype.forEach.call(e,i=>ft(i))}else{let e=this.yp();csArray.prototype.forEach.call(e,i=>{ft({...i,boundElement:t})})}}onEvent(t){this.L=t}start(){this.ue.observe(),this.Ei(document),this.resizeListener()}stop(){this.Si(document),this.ue.disconnect()}flushPendingDebouncedListeners(){this.Zr.flushPending(),this.fp.flushPending()}Ep(t){return csArray.prototype.some.call(this.hv,e=>e===t)}yp(){return this.Lt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.gp,t=>!this.Ep(t.type)):(H.warn("Element.matches is not implemented yet"),[])}mp(){let t=[];return csArray.prototype.push.call(t,...this.mv),this.Lt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.yv):H.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.Ep(e.type))}resizeListener(t){let e=Ds.getScrollContainer(),i=Pe(e);i&&(this.pp=!0);let n={type:z.RESIZE,ts:0,x:i?e.clientWidth:wt.windowWidth(),y:i?e.clientHeight:wt.windowHeight()};t!==void 0&&(n.d=t),this.L(n)}scrollListener(t,e){let i=Ds.isEventOnScrollContainer(e);!this.pp&&i&&this.resizeListener();let n={type:z.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:wt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:wt.windowOffsetY(),d:t},o=jt.build(e,n,this.Zt);this.L(o)}mouseMoveListener(t){let e={type:z.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=jt.build(t,e,this.Zt);this.L(i)}mouseDownListener(t){let e={type:z.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=jt.build(t,e,this.Zt);this.de(i)}mouseUpListener(t){let e={type:z.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=jt.build(t,e,this.Zt);this.de(i)}clickListener(t){let e={type:z.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=jt.build(t,e,this.Zt);this.de(i)}mouseOverListener(t){let e={type:z.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=jt.build(t,e,this.Zt);this.de(i)}mouseOutListener(t){let e={type:z.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.mt.getEventTargetPath(t)},i=jt.build(t,e,this.Zt);this.de(i)}focusInListener(t){let e={type:z.FOCUSIN,ts:0,tgt:this.mt.getEventTargetPath(t)},i=jt.build(t,e,this.Zt);this.de(i)}focusOutListener(t){let e={type:z.FOCUSOUT,ts:0,tgt:this.mt.getEventTargetPath(t)},i=jt.build(t,e,this.Zt);this.de(i)}changeListener(t){let e={type:z.CHANGE,ts:0,tgt:""},i=jt.build(t,e,this.Zt);this.de(i)}submitListener(t){let e={type:z.SUBMIT,ts:0,tgt:""},i=jt.build(t,e,this.Zt);this.de(i)}copyListener(t){let e={type:z.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:xs.COPY};this.de(e)}cutListener(t){let e={type:z.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:xs.CUT};this.de(e)}pasteListener(t){let e={type:z.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:xs.PASTE};this.de(e)}keyUpListener(t){let e={type:z.KEYUP,ts:0,tgt:this.mt.getEventTargetPath(t),key:this.Sp(t)};this.de(e)}keyDownListener(t){let e={type:z.KEYDOWN,ts:0,tgt:this.mt.getEventTargetPath(t),key:this.Sp(t)};this.de(e)}Sp(t){let e=this.U[t.key];return e===void 0?q.ALPHANUMERICAL:e}de(t){el(t)&&t.tgt!==Ie.INVALID_ELEMENT&&this.L(t)}Qc(){this.U[" "]=q.SPACE,this.U.Spacebar=q.SPACE,this.U.Enter=q.ENTER,this.U.Backspace=q.BACKSPACE,this.U.Delete=q.DELETE,this.U.ArrowUp=q.ARROWUP,this.U.ArrowDown=q.ARROWDOWN,this.U.ArrowLeft=q.ARROWLEFT,this.U.ArrowRight=q.ARROWRIGHT,this.U.Up=q.ARROWUP,this.U.Down=q.ARROWDOWN,this.U.Left=q.ARROWLEFT,this.U.Right=q.ARROWRIGHT,this.U.CapsLock=q.CAPSLOCK,this.U.Shift=q.SHIFT,this.U.Tab=q.TAB}}return j([I("Event handler type: resize")],s.prototype,"resizeListener",null),j([I("Event handler type: scroll")],s.prototype,"scrollListener",null),j([I("Event handler type: mouseMove"),ot()],s.prototype,"mouseMoveListener",null),j([I("Event handler type: mouseDown"),ot()],s.prototype,"mouseDownListener",null),j([I("Event handler type: mouseUp"),ot()],s.prototype,"mouseUpListener",null),j([I("Event handler type: click"),ot()],s.prototype,"clickListener",null),j([I("Event handler type: mouseOver"),ot()],s.prototype,"mouseOverListener",null),j([I("Event handler type: mouseOut"),ot()],s.prototype,"mouseOutListener",null),j([I("Event handler type: focusIn")],s.prototype,"focusInListener",null),j([I("Event handler type: focusOut")],s.prototype,"focusOutListener",null),j([I("Event handler type: change")],s.prototype,"changeListener",null),j([I("Event handler type: submit"),ot()],s.prototype,"submitListener",null),j([I("Event handler type: copy")],s.prototype,"copyListener",null),j([I("Event handler type: cut")],s.prototype,"cutListener",null),j([I("Event handler type: paste")],s.prototype,"pasteListener",null),j([I("Event handler type: keyup")],s.prototype,"keyUpListener",null),j([I("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),cg=(()=>{class s{constructor(){this.vp=100,this.tn=0,this.rn=wt.documentHeight(),this._p={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.tn=this.Zc(Ds.getScrollContainer()).maxScrollRate}onEvent(t){this.L=t}start(){pt(this._p)}stop(){ft(this._p)}reset(){let t=Ds.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Zc(t);this.rn=i,this.tn=e,this.L()}Zc(t){let e=0,i=0;if(t===null)i=wt.documentHeight(),e=this.Ev(i);else{let n=this.Sv(t);i=this.wp(t,n),e=this.vv(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Ds.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.Zc(e);(i>this.tn||n>this.rn)&&(this.tn=i,n>this.rn&&(this.rn=n),this.L())}Ev(t){let e=Math.round(this._v()/t*100);return Math.min(e,this.vp)}_v(){let t=wt.windowHeight();return wt.windowOffsetY()+t}vv(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.wp(t,e),o=Math.round(i/n*100);return Math.min(o,this.vp)}Sv(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}wp(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.tn}`,mdh:`${this.rn}`}}}return j([I("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),te=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),sl=(()=>{class s{constructor(){this.V=!1,this.$s=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.te(te.Hidden):this.te(te.Visible);case"pagehide":return document.visibilityState==="hidden"?this.te(te.PagehideHidden):this.te(te.PagehideVisible);case"blur":return this.te(te.Blur);case"navigate":return this.wv(t)?this.te(te.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.V||(this.V=!0,this.tl(),this.bv(),this.Tv(),Jo()&&this.Av())}stop(){this.V&&(this.V=!1,this.sl(),this.Rv(),this.Cv(),Jo()&&this.Iv())}onEvent(t){this.te=t}Av(){window.navigation.addEventListener("navigate",this.$s)}Iv(){window.navigation.removeEventListener("navigate",this.$s)}tl(){document.addEventListener("visibilitychange",this.$s)}sl(){document.removeEventListener("visibilitychange",this.$s)}bv(){window.addEventListener("pagehide",this.$s)}Rv(){window.removeEventListener("pagehide",this.$s)}Tv(){window.addEventListener("blur",this.$s)}Cv(){window.removeEventListener("blur",this.$s)}wv(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})();var lg=1024,hg=512,$r=1024,zr="||",ug=(()=>{class s extends Lt{constructor(t,e,i,n,o,c,l,h,m,d,E,g,S,P,N,v,_,M,k,T,B){super(),this.f=t,this.zs=e,this.xt=i,this.er=n,this.il=o,this.ze=c,this.Ie=l,this.rl=h,this.W=m,this.Qt=d,this.Q=E,this.nl=g,this.Ge=S,this.Y=P,this.zo=N,this.ms=v,this.ys=_,this.ol=M,this.vi=k,this._i=T,this.wi=B,this.Fs=new Zc,this.Go=!1,this.al=[]}init(){var t,e,i,n,o,c,l;this.zs.onEvent(h=>this.Nt(h)),this.xt.onEvent(h=>this.Nt(h)),this.er.onEvent(()=>{let h=this.er.getRequestParameters();this.Y.setQueryParams(h),this.Ie.setQueryParams(h)}),this.nl.onEvent(h=>this.Pe(h)),this.cl(),(t=this.zo)===null||t===void 0||t.onEvent(h=>this.Nt(h)),(e=this.vi)===null||e===void 0||e.onEvent(h=>this.Nt(h)),(i=this.ms)===null||i===void 0||i.onEvent(h=>this.Nt(h)),(n=this.ys)===null||n===void 0||n.onEvent(h=>this.Nt(h)),this.Pv(),(o=this.ol)===null||o===void 0||o.onEvent(h=>this.Pe(h)),(c=this._i)===null||c===void 0||c.onEvent(h=>this.Pe(h)),(l=this.wi)===null||l===void 0||l.onEvent(h=>this.Pe(h))}Pv(){this.Ie.onBeaconSuccess(()=>{this.ze.clearEvents()}),this.Ie.onBeaconFailure(t=>{this.Ov(t)})}initStates(){let t=this.rl.getRequestParameters(),e=this.il.getRequestParameters(),i=this.er.getRequestParameters();this.Y.setQueryParams(t),this.Y.setQueryParams(e),this.Y.setQueryParams(i),this.Ie.setQueryParams(t),this.Ie.setQueryParams(e),this.Ie.setQueryParams(i),this.ll()}clearStates(t){var e,i;this.zs.flushPendingDebouncedListeners(),(e=this.ms)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.ys)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.ul(),this.sendLastMessageBeacon()):this.sendEvents(),this.er.reset(),this.Y.removeQueryParams()}onStart(t){var e,i,n,o,c,l,h;t||(e=this.ol)===null||e===void 0||e.start(),this.Ge.start(),this.zs.start(),this.er.start(),this.xt.start(),(i=this.zo)===null||i===void 0||i.start(),(n=this.ys)===null||n===void 0||n.start(),t||this.nl.start(),(o=this.ms)===null||o===void 0||o.start(),(c=this.vi)===null||c===void 0||c.start(),(l=this._i)===null||l===void 0||l.start(),(h=this.wi)===null||h===void 0||h.start(),csArray.prototype.forEach.call(this.al,m=>{this.Pe(m)}),this.al=[]}collectInitialEvents(){var t;(t=this.zo)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Pe(t)}onIframeAnalysisUserEvent(t){this.Nt(t)}onExternalEvent(t){this.J(t)}Pe(t){this.W.isCurrentPageviewValid()&&this.J(t)}Nt(t){this.W.refreshSession(),this.W.isSessionValid()&&this.J(t)}J(t){this.ze.addEvent(this.Nv(t)),this.ze.isFull()&&this.sendEvents(),this.f.emitDebugEvents&&this.Fs.emit("analysisEvent",{...t,typeName:z[t.type]})}Nv(t){return t.ts=this.bi(),t}ul(){this.Ie.setQueryParams({hlm:"true"}),this.Go=!0}sendLastMessageBeacon(){this.Ie.removeQueryParams(["i"]),this.Ie.setQueryParams(this.rl.getRequestParameters()),this.Ie.setQueryParams(this.il.getRequestParameters()),this.Ie.send(this.ze.stringifyEvents()),this.Ie.removeQueryParams(["hlm"]),this.Go=!1}sendEvents(){this.ze.isEmpty()||(this.Ie.removeQueryParams(["i"]),this.Y.setQueryParams(this.rl.getRequestParameters()),this.Y.setQueryParams(this.il.getRequestParameters()),this.Y.send(this.ze.getEvents()),this.ze.clearEvents())}onStop(){var t,e,i,n,o,c,l;this.Ge.stop(),this.zs.stop(),this.er.stop(),this.xt.stop(),this.nl.stop(),(t=this.zo)===null||t===void 0||t.stop(),(e=this.ms)===null||e===void 0||e.stop(),(i=this.ys)===null||i===void 0||i.stop(),(n=this.vi)===null||n===void 0||n.stop(),this.ze.empty(),(o=this.ol)===null||o===void 0||o.stop(),(c=this._i)===null||c===void 0||c.stop(),(l=this.wi)===null||l===void 0||l.stop()}ll(){this.Qe=O.now()}bi(){return O.now()-this.Qe}cl(){this.Ge.onEvent(t=>{var e,i;t!==te.Visible&&((e=this.ms)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.ys)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===te.PagehideVisible?this.ul():t===te.PagehideHidden?(this.ul(),this.sendLastMessageBeacon()):(!this.ze.isEmpty()||this.Go)&&this.sendLastMessageBeacon())})}Ov(t){try{(!this.ze.isEmpty()||this.Go)&&this.Qt.save({requestParameters:t,events:this.ze.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!ig(t)||!Pe(e))throw new Error(`Command misuse: ${io}`);let i={status:t,type:z.SUBMIT_COMMAND,ts:0,tgt:this.Q.getElementPath(e)};i.tgt!==Ie.INVALID_ELEMENT&&this.Pe(i)}pushCustomEvent(t,e,i){if(!(R(t)&&!an(t))||i!==void 0&&!W(i))throw new Error(`Command misuse: ${An}`);let n=rg(e)?e:Os.WEB,o=this.Mv(i),c={type:z.CUSTOM_EVENT,ts:0,customEventName:dt.truncate(t,lg),sourceLibrary:n,...on(o)?{}:{properties:o}};this.isStarted?this.Pe(c):csArray.prototype.push.call(this.al,c)}Mv(t){let e={};for(let i in t){if(i.length>hg)continue;let n=t[i];if(Et(n)||tr(n))e[i]=csString(n);else if(this.bp(n))e[i]=dt.truncate(n,$r);else if(this.kv(n)){let o=this.Dv(n);o!==""&&(e[i]=o)}}return e}Dv(t){let e="";for(let i=0;i<t.length;i++){let n=t[i];if(!Et(n)&&!tr(n)&&!this.bp(n))continue;let o=csString(n);if(e==="")e=dt.truncate(o,$r);else if(e.length+zr.length+o.length<=$r)e+=zr+o;else break}return e}bp(t){return R(t)&&!an(t)&&!csString.prototype.includes.call(t,zr)}kv(t){return csArray.isArray(t)&&t.length>0}}return s})(),mi=(()=>{class s{constructor(...t){this.Tp=t}addProvider(t){csArray.prototype.push.call(this.Tp,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Tp,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),dg=(()=>{class s{constructor(t,e){this.Qt=t,this.Y=e,this.Ap=()=>{document.visibilityState==="visible"&&this.Rp()}}start(){this.Rp(),this.tl()}stop(){this.sl()}getRecoveryStorage(){return this.Qt}Rp(){let t=this.Qt.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.Y.send(i,e)}}tl(){document.addEventListener("visibilitychange",this.Ap)}sl(){document.removeEventListener("visibilitychange",this.Ap)}}return s})(),il=(()=>{class s{constructor(t){this.Cp=[],this.Ip=[],this.Kt={},this.Jt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Kt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Kt[e]}):this.Kt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Cp,t)}onBeaconFailure(t){csArray.prototype.push.call(this.Ip,t)}send(t){let e=fi.toQuery({...this.Kt,ct:yr.UNCOMPRESSED}),i=this.xv(e,t);return i?csArray.prototype.forEach.call(this.Cp,n=>n()):csArray.prototype.forEach.call(this.Ip,n=>n(this.Kt)),i}xv(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Jt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Jt}?${t}`,e||"")}}return s})(),pg=(()=>{class s{constructor(t){this.ir=t}save(t){localStorage.setItem(this.ir,csJSON.stringify(t))}clear(){localStorage.removeItem(this.ir)}recover(){let t=localStorage.getItem(this.ir);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{H.error(`Invalid item in localStorage.
         (key:${this.ir}; value:${t})`)}finally{this.clear()}return e}}return s})(),fg=(()=>{class s{constructor(t){this.nn=t,this.an=e=>this.processMetric(e),this.V=!1}onEvent(t){this.L=t}start(){this.V||(this.V=!0,this.nn.onFCP(this.an),this.nn.onCLS(this.an),this.nn.onLCP(this.an),this.nn.onTTFB(this.an),this.nn.onINP(this.an))}stop(){this.V=!1}processMetric(t){if(!this.V)return;let e={type:z.PERFORMANCE,name:t.name,val:t.value,ts:0};this.L(e)}}return j([I("Performance metric handler")],s.prototype,"processMetric",null),s})(),rl=-1,Gs=s=>{addEventListener("pageshow",r=>{r.persisted&&(rl=r.timeStamp,s(r))},!0)},ge=(s,r,t,e)=>{let i,n;return o=>{r.value>=0&&(o||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},Zn=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},to=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},bi=()=>{var r;let s=to();return(r=s==null?void 0:s.activationStart)!=null?r:0},me=(s,r=-1)=>{let t=to(),e="navigate";return rl>=0?e="back-forward-cache":t&&(document.prerendering||bi()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},Gr=new WeakMap;function eo(s,r){return Gr.get(s)||Gr.set(s,new r),Gr.get(s)}var vn=class{constructor(){ve(this,"t");ve(this,"i",0);ve(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},Ti=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},so=s=>{let r=!1;return()=>{r||(s(),r=!0)}},Ms=-1,Aa=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,ur=s=>{document.visibilityState==="hidden"&&Ms>-1&&(Ms=s.type==="visibilitychange"?s.timeStamp:0,gg())},Ra=()=>{addEventListener("visibilitychange",ur,!0),addEventListener("prerenderingchange",ur,!0)},gg=()=>{removeEventListener("visibilitychange",ur,!0),removeEventListener("prerenderingchange",ur,!0)},nl=()=>{var s;if(Ms<0){let r=bi(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;Ms=t!=null?t:Aa(),Ra(),Gs(()=>{setTimeout(()=>{Ms=Aa(),Ra()})})}return{get firstHiddenTime(){return Ms}}},wr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},Ca=[1800,3e3],ol=(s,r={})=>{wr(()=>{let t=nl(),e,i=me("FCP"),n=Ti("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-bi(),0),i.entries.push(c),e(!0)))});n&&(e=ge(s,i,Ca,r.reportAllChanges),Gs(o=>{i=me("FCP"),e=ge(s,i,Ca,r.reportAllChanges),Zn(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},Ia=[.1,.25],mg=(s,r={})=>{ol(so(()=>{let t,e=me("CLS",0),i=eo(r,vn),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=Ti("layout-shift",n);o&&(t=ge(s,e,Ia,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),Gs(()=>{i.i=0,e=me("CLS",0),t=ge(s,e,Ia,r.reportAllChanges),Zn(()=>t())}),setTimeout(t))}))},al=0,qr=1/0,Fi=0,yg=s=>{for(let r of s)r.interactionId&&(qr=Math.min(qr,r.interactionId),Fi=Math.max(Fi,r.interactionId),al=Fi?(Fi-qr)/7+1:0)},_n,Pa=()=>{var s;return _n?al:(s=performance.interactionCount)!=null?s:0},Eg=()=>{"interactionCount"in performance||_n||(_n=Ti("event",yg,{type:"event",buffered:!0,durationThreshold:0}))},Oa=0,wn=class{constructor(){ve(this,"u",[]);ve(this,"l",new Map);ve(this,"m");ve(this,"p")}v(){Oa=Pa(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((Pa()-Oa)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},cl=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=so(s)),document.addEventListener("visibilitychange",s,{once:!0}))},Na=[200,500],Sg=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&wr(()=>{var c;Eg();let t,e=me("INP"),i=eo(r,wn),n=l=>{cl(()=>{for(let m of l)i.h(m);let h=i.P();h&&h.T!==e.value&&(e.value=h.T,e.entries=h.entries,t())})},o=Ti("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=ge(s,e,Na,r.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),Gs(()=>{i.v(),e=me("INP"),t=ge(s,e,Na,r.reportAllChanges)}))})},bn=class{constructor(){ve(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},Ma=[2500,4e3],vg=(s,r={})=>{wr(()=>{let t=nl(),e,i=me("LCP"),n=eo(r,bn),o=l=>{r.reportAllChanges||(l=l.slice(-1));for(let h of l)n.h(h),h.startTime<t.firstHiddenTime&&(i.value=Math.max(h.startTime-bi(),0),i.entries=[h],e())},c=Ti("largest-contentful-paint",o);if(c){e=ge(s,i,Ma,r.reportAllChanges);let l=so(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let h of["keydown","click","visibilitychange"])addEventListener(h,()=>cl(l),{capture:!0,once:!0});Gs(h=>{i=me("LCP"),e=ge(s,i,Ma,r.reportAllChanges),Zn(()=>{i.value=performance.now()-h.timeStamp,e(!0)})})}})},ka=[800,1800],Tn=s=>{document.prerendering?wr(()=>Tn(s)):document.readyState!=="complete"?addEventListener("load",()=>Tn(s),!0):setTimeout(s)},_g=(s,r={})=>{let t=me("TTFB"),e=ge(s,t,ka,r.reportAllChanges);Tn(()=>{let i=to();i&&(t.value=Math.max(i.responseStart-bi(),0),t.entries=[i],e(!0),Gs(()=>{t=me("TTFB",0),e=ge(s,t,ka,r.reportAllChanges),e(!0)}))})},wg=(()=>{class s{onFCP(t){try{ol(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{mg(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{vg(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{_g(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{Sg(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("INP")}}}return s})();var Ai=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),bg=(()=>{class s extends Ai{constructor(){super(...arguments),this.supportedEventTypes=[z.CHANGE],this.o_=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=Tt(t);return fr(i)&&csArray.prototype.indexOf.call(this.o_,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var ll=(()=>{class s extends Ai{constructor(t){super(),this.mt=t,this.supportedEventTypes=[z.MOUSEDOWN,z.MOUSEUP,z.CLICK,z.MOUSEOVER,z.TAP,z.DRAG,z.FLICK,z.SUBMIT,z.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.mt.getEventTargetPath(t)),e}}return s})(),Da=65535,Tg=(()=>{let s;return function(r){function t(e){let i=Tt(e);if(!i||!ct(i)||!pe(i.getBoundingClientRect)||!gt(e.pageX)||!gt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),o=e.pageX-n.left-wt.windowOffsetX(),c=e.pageY-n.top-wt.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),h=Math.max(i.scrollHeight,n.height),m=Math.round(o/l*Da),d=Math.round(c/h*Da);return{xRel:m,yRel:d,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),Ag=Math.pow(2,31);function Rg(s,r=0){let l=r>>>0,h=s.length;for(let g=0;g<h-3;g+=4){let S=(csString.prototype.charCodeAt.call(s,g)&255|(csString.prototype.charCodeAt.call(s,g+1)&255)<<8|(csString.prototype.charCodeAt.call(s,g+2)&255)<<16|(csString.prototype.charCodeAt.call(s,g+3)&255)<<24)>>>0;S=Math.imul(S,3432918353),S=S<<15|S>>>17,S=Math.imul(S,461845907),l^=S,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let m=0,d=h&3,E=h-d;switch(d){case 3:m^=(csString.prototype.charCodeAt.call(s,E+2)&255)<<16;case 2:m^=(csString.prototype.charCodeAt.call(s,E+1)&255)<<8;case 1:m^=csString.prototype.charCodeAt.call(s,E)&255,m=Math.imul(m,3432918353),m=m<<15|m>>>17,m=Math.imul(m,461845907),l^=m}return l^=h,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function hl(s){return Rg(s)+Ag>>>0}var Cg=(()=>{class s extends Ai{constructor(t,e){super(),this.hs=t,this.mt=e,this.supportedEventTypes=[z.MOUSEMOVE,z.CLICK],this._l=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:o}=Tg.getRelativePosition(t);if(i){let c=this.mt.getEventTargetPath(t);c!==Ie.INVALID_ELEMENT&&(e.xRel=n,e.yRel=o,e.type===z.MOUSEMOVE&&(c!==this._l||this.hs.iframesTracking?(this._l=c,e.tgtHM=c,this.hs.isChild||(e.tgtHMH=hl(e.tgtHM))):e.tgtHM=""))}else e.type===z.MOUSEMOVE&&(this._l="");return e}}return s})(),Ye=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),xa=100,ul=(()=>{class s extends Ai{constructor(t,e,i){super(),this.f=t,this.le=e,this.N=i,this.supportedEventTypes=[z.TAP,z.CLICK,z.SUBMIT]}a_(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,Gn(n.parentElement)||zn(n.parentElement)||this.le.getElementSensitiveStatus(n.parentElement)!==Ye.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=xa)break;n=i.nextNode()}return!1}c_(t){let e=Hs(t,"button,a");return e||(this.f.collectTargetText===fn.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(Pe(csEventtarget.apply(t))){let i=this.c_(csEventtarget.apply(t));if(i&&R(i.textContent)&&!this.a_(i)&&!this.N.hasPII(i.textContent,this.f.anonymizeDigits)){let n=dt.truncate(csString.prototype.trim.call(i.textContent),xa);n.length>0&&(e.text=n)}}return e}}return s})(),dl=(()=>{class s extends Ai{constructor(t,e){super(),this.mt=t,this.le=e,this.supportedEventTypes=[z.CLICK,z.SUBMIT,z.CHANGE,z.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.le.getSensitiveStatus().useAnonymization,{path:n,hierarchy:o}=this.mt.getEventTargetPathAndHierarchy(t,i);return e.tgt=n,e.hrchy=o,e}}return s})();function Ig(s,r,t){let e=[];return csArray.prototype.push.call(e,new Cg(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new ul(s,t,new wi)),s.collectHierarchy&&csArray.prototype.push.call(e,new dl(r,t)),csArray.prototype.push.call(e,new bg,new ll(r)),e}function Pg(s,r,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new ul(s,t,new wi)),s.collectHierarchy&&csArray.prototype.push.call(e,new dl(r,t)),csArray.prototype.push.call(e,new ll(r)),e}var Og=50,Ng=(()=>{class s{constructor(t=[]){this.Vt=t}stringifyEvents(){return csJSON.stringify(this.Vt)}addEvent(t){csArray.prototype.push.call(this.Vt,t)}eventsCount(){return this.Vt.length}clearEvents(){this.Vt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=Og}isEmpty(){return this.Vt.length===0}getEvents(){return this.Vt}}return s})(),Mg="csAnalysisEventsPersisted",La="v2/events",io=["submit"],An=["trackEvent"];var kg=(()=>{class s{constructor(t,e,i,n,o,c,l,h,m,d,E,g,S){this.f=t,this.Et=e,this.O=i,this.Q=n,this.Lt=o,this.E=c,this.W=l,this.xt=h,this.gt=m,this.zt=d,this.X=E,this.le=g,this.wl=S}init(){let t=new Ng,e=this.zt.create(`${this.f.getTrackerUri()}/${La}`,!0,"base64");this.Xo=this.l_(e),this.Oe=this.h_(t,this.Xo.getRecoveryStorage(),e),this.Oe.init(),this.X.addListener(this.Oe),this.gt.addListener(this.Oe),this.E.register(io,(i,n)=>{this.Oe.pushSubmitCommandEvent(i,n)}),this.E.register(An,i=>{if(!W(i))throw new Error(`Command misuse: ${An}`);this.Oe.pushCustomEvent(i.name,i.source,i.properties)})}onStartTracking(t){this.Xo.start(),this.Oe.start(t)}onAfterNaturalPageView(){this.Oe.initStates()}onAfterArtificialPageView(){this.Oe.initStates(),this.Oe.collectInitialEvents()}onArtificialPageViewEnd(){this.Oe.clearStates(!0)}onBeforeSessionRenewal(){this.Oe.clearStates(),this.Oe.stop(),this.Xo.stop()}onOptout(){this.Oe.stop(),this.Xo.stop()}h_(t,e,i){var n;let o=new Zf(window),c=new cg,l=Ig(this.f,this.Q,this.le),h=[];this.f.collectSubmit||csArray.prototype.push.call(h,"submit");let m=new ag(l,this.Q,this.Lt,h),d=Pg(this.f,this.Q,this.le),E=new ng(d,this.xt),g=new fg(new wg),S=new sl,P,N,v,_=new il(`${this.f.getTrackerUri()}/${La}`),M=new mi(this.Et,this.O),k,T,B,st;return new ug(this.f,m,E,c,o,t,_,M,this.W,e,this.Q,g,S,i,P,N,v,k,T,B,st)}l_(t){return new dg(new pg(Mg),t)}}return s})(),Dg=(()=>{class s extends Lt{constructor(t,e,i,n){super(),this.ut=t,this.bl=e,this.Et=i,this.pe=n,this.Ko=[],this.Ws=0}init(){this.ut.init()}initStates(){this.Tl(),this.Ko=[],this.Ws=0,this.ll()}ll(){this.Qe=O.now()}bi(){return O.now()-this.Qe}onStart(){this.ut.subscribe(s.Ut,t=>this.J(t))}onStop(){this.ut.unsubscribe(s.Ut)}onIframeApiError(t){this.J(t)}J(t){this.isStarted&&this.Ws<s.hn&&(t.relativeTime=this.bi(),csArray.prototype.push.call(this.Ko,this.pe.anonymize(t)),this.un(),G.counters.networkRequests.count("collected"))}Tl(){this.bl.removeQueryParams(),this.bl.setQueryParams(this.Et.getRequestParameters())}un(){this.bl.send({errors:this.Ko}),this.Ko=[],this.Ws+=1}}return s.Ut="ApiErrorsService",s.hn=20,s})(),xg="api-errors",Rn=["api-errors:maskUrl"],Lg=(()=>{class s{constructor(t,e,i,n,o,c,l){this.ut=t,this.pe=e,this.f=i,this.Et=n,this.gt=o,this.E=c,this.zt=l}init(){let t=this.zt.create(`${this.f.getTrackerUri()}/${xg}`,!0);this.Ri=new Dg(this.ut,t,this.Et,this.pe),this.Ri.init(),this.gt.addListener(this.Ri),this.ht()}ht(){this.E.register(Rn,t=>{if(!R(t))throw new Error(`Command misuse: ${Rn[0]}`);this.pe.addUrlMaskingPattern(t)})}onStartTracking(){this.Ri.start()}onAfterNaturalPageView(){this.Ri.initStates()}onAfterArtificialPageView(){this.Ri.initStates()}onBeforeSessionRenewal(){this.Ri.stop()}onOptout(){this.Ri.stop()}}return s})(),Vg=(()=>{class s{constructor(t){this.Al=t}buildApiErrors(t,e){let i=this.Al.collectDataPoints(t,e);if(i===null)return null;let n=this.u_(t,i);if(e){let o=this.d_(t,i);return{apiError:n,detailedApiError:o}}return{apiError:n}}d_(t,e){let i=this.Kp(t);return e.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),e.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),e.collectResponseBody&&t.responseBody&&(i.responseBody=t.responseBody),Object.keys(e.standardRequestHeaders).length>0&&(i.standardRequestHeaders=e.standardRequestHeaders),Object.keys(e.standardResponseHeaders).length>0&&(i.standardResponseHeaders=e.standardResponseHeaders),Object.keys(e.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(e.customRequestHeaders)),Object.keys(e.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(e.customResponseHeaders)),Object.keys(e.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=e.plainCustomRequestHeaders),Object.keys(e.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=e.plainCustomResponseHeaders),e.plainResponseBodyAttributes&&Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=e.plainResponseBodyAttributes),e.plainRequestBodyAttributes&&Object.keys(e.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=e.plainRequestBodyAttributes),Object.keys(e.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(e.responseBodyAttributes)),Object.keys(e.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(e.requestBodyAttributes)),i}Kp(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}}u_(t,e){let i=this.Kp(t);return e.matchingBodyContents.length>0&&(i.matchingBodyContents=e.matchingBodyContents),Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=e.plainResponseBodyAttributes),i}}return s})(),Ug=(()=>{class s extends Qn{constructor(t,e,i){super(),this.Jo=t,this.Qo=e,this.Al=i,this.Rl=0,this.p_=new Vg(i)}subscribe(t,e,i){i!=null&&i.detailedEvent&&(Object.defineProperty(e,"detailedEvent",{value:i.detailedEvent}),this.Rl++),super.subscribe(t,e)}unsubscribe(t){var e;!((e=this.subscriptions[t])===null||e===void 0)&&e.hasOwnProperty("detailedEvent")&&this.Rl--,super.unsubscribe(t)}init(){let t=this.Al.computeApiErrorCollectionOptions();this.Jo.setCollectionOptions(t),this.Jo.onEvent(e=>this.Jp(e)),this.Qo.setCollectionOptions(t),this.Qo.onEvent(e=>this.Jp(e))}onStartTracking(){this.Jo.start(),this.Qo.start()}onStopTracking(){this.Jo.stop(),this.Qo.stop()}Jp(t){let e=this.p_.buildApiErrors(t,this.Rl!==0);if(e)for(let i in this.subscriptions){let n=this.subscriptions[i];n.hasOwnProperty("detailedEvent")?e.detailedApiError&&n(e.detailedApiError):n(e.apiError)}}}return s})(),jg=(()=>{class s{constructor(t,e,i=!1){this.pt=t,this.tt=e,this.dn=i}addUrlMaskingPattern(t){this.pt.addUrlMaskingPattern(t)}anonymize(t){let e=this.tt.removeQueryString(t.url),i={maskingPatterns:this.pt.getUrlMaskingPatterns(),partialMaskingPatterns:this.pt.getPartialUrlMaskingPatterns(),maskNames:this.dn};return{...t,url:this.tt.anonymizeUrl(e,i),library:t.library?this.tt.anonymizeUrl(t.library,i):void 0}}}return s})(),Hg=(()=>{class s{constructor(){this.f_=64e3,this.g_=5e3,this.m_=2e3,this.Qp=8e3,this._s=!!self.TextEncoder,this._s&&(this.y_=new TextEncoder)}En(t){return this.y_.encode(t).byteLength}Zp(t,e,i){let n=0;t[e]&&(n+=this.En(t[e]),n>this.Qp&&(n=0,t[e]=dt.ELLIPSIS)),t[i]&&(n+=this.En(csJSON.stringify(t[i])),n>this.Qp&&(t[i]=s.truncatedObjectMarker))}E_(t){t.queryParameters&&this.En(t.queryParameters)>this.m_&&(t.queryParameters=dt.ELLIPSIS)}S_(t){t.requestBody&&this.En(t.requestBody)>this.f_&&(t.requestBody=dt.ELLIPSIS),t.responseBody&&this.En(t.responseBody)>this.g_&&(t.responseBody=dt.ELLIPSIS)}truncate(t){this._s?(this.E_(t),this.S_(t),this.Zp(t,"customResponseHeaders","plainCustomResponseHeaders"),this.Zp(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})}}return s.truncatedObjectMarker={[dt.ELLIPSIS]:dt.ELLIPSIS},s})(),Bg=(()=>{let s;return function(r){function t(n){let o="[",c="]",l=[];for(let h=0;h<n.length;++h)if(n[h]===o)csArray.prototype.push.call(l,n[h]);else if(n[h]===c)if(csString.prototype.indexOf.call(n,o)>-1)csArray.prototype.pop.call(l);else return!1;return l.length===0}function e(n){if(!n)return!0;if(!t(n))return!1;let o=csString.prototype.split.call(n,/[\[\]]/);return csArray.prototype.every.call(o,c=>{let l=c[0],h=c[c.length-1];if((l==="'"||l==='"')&&l!==h)return!1;let m=csString.prototype.split.call(c,".");return m[0].length===0&&csArray.prototype.shift.call(m),csArray.prototype.every.call(m,d=>{let E=/^\-?\d+$/.exec(d);return E?parseInt(E[0],10)>=0:d==="$"||/\w+/.test(d)})})}r.isValidJSONPath=e;function i(n,o){if(!n)return;let c=csString.prototype.split.call(n,/[\$\[\]]/),l=[];csArray.prototype.forEach.call(c,m=>{if(m[0]==="'"||m[0]==='"'){csArray.prototype.push.call(l,csString.prototype.substring.call(m,1,m.length-1));return}csArray.prototype.push.call(l,...csArray.prototype.filter.call(csString.prototype.split.call(m,"."),d=>d.length>0))}),l[0]==="$"&&csArray.prototype.shift.call(l);let h=o;for(let m of l)if(h[m]!==void 0)h=h[m];else return;return h}r.getJSONPathValue=i}(s||(s={})),s})(),Fg=(()=>{class s{constructor(){this.v_=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}isValidStandardHeader(t){return this.v_.has(t)}}return s})(),$g=(()=>{class s{constructor(){this.__=64e3,this.w_=100,this.et={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.tf=new Fg}b_(t){return t.length<=this.__}T_(t){let e=t["content-type"];return e!==void 0&&(bt(e,"application/json")||bt(e,"application/graphql"))}A_(t,e){return t&&this.b_(t)&&this.T_(e)}Zo(t,e,i,n){let o=n==="request"?this.R_:this.C_;if(o!==void 0||this.A_(e,i)){if(o===void 0)try{o=csJSON.parse(e),n==="request"?this.R_=o:this.C_=o}catch{return}let c=Bg.getJSONPathValue(t,o);if(c!==void 0&&(c===null||!gs(c))){let l=R(c)?c:csJSON.stringify(c);return dt.truncate(l,this.w_,dt.ELLIPSIS)}}}isBodyAttributeValueFound(t,e){let i,n;return(e.type==="request-response"||e.type==="response")&&(i=this.Zo(e.path,t.responseBody,t.responseHeaders,"response")),(e.type==="request-response"||e.type==="request")&&(n=this.Zo(e.path,t.requestBody,t.requestHeaders,"request")),Y(i)||Y(n)}collectBodyAttribute(t,e,i){let n;(e.type==="request-response"||e.type==="response")&&(n=this.Zo(e.path,t.responseBody,t.responseHeaders,"response"),n&&(e.encrypted?this.et.responseBodyAttributes[e.path]=n:(n=i(n),this.et.plainResponseBodyAttributes[e.path]=n))),(e.type==="request-response"||e.type==="request")&&(n=this.Zo(e.path,t.requestBody,t.requestHeaders,"request"),n&&(e.encrypted?n&&(this.et.requestBodyAttributes[e.path]=n):(n=i(n),this.et.plainRequestBodyAttributes[e.path]=n)))}isBodyContentMatching(t,e){return t.responseBody?!!new csRegExp(e,"i").test(t.responseBody):!1}collectBodyContent(t){csArray.prototype.indexOf.call(this.et.matchingBodyContents,t)===-1&&csArray.prototype.push.call(this.et.matchingBodyContents,t)}collectCustomHeaders(t,e,i){let n=csString.prototype.toLocaleLowerCase.call(e.headerName);t.responseHeaders[n]&&(e.type==="request-response"||e.type==="response")&&(e.encrypted?this.et.customResponseHeaders[n]=t.responseHeaders[n]:this.et.plainCustomResponseHeaders[n]=i(t.responseHeaders[n])),t.requestHeaders[n]&&(e.type==="request-response"||e.type==="request")&&(e.encrypted?this.et.customRequestHeaders[n]=t.requestHeaders[n]:this.et.plainCustomRequestHeaders[n]=i(t.requestHeaders[n]))}collectStandardHeaders(t){if(!(Object.keys(this.et.standardRequestHeaders).length>0||Object.keys(this.et.standardResponseHeaders).length>0)){for(let[e,i]of Object.entries(t.requestHeaders))this.tf.isValidStandardHeader(e)&&(this.et.standardRequestHeaders[e]=i);for(let[e,i]of Object.entries(t.responseHeaders))this.tf.isValidStandardHeader(e)&&(this.et.standardResponseHeaders[e]=i)}}setCollectQueryParam(t){t&&(this.et.collectQueryParam=!0)}setCollectResponseBody(t){t&&(this.et.collectResponseBody=!0)}setCollectRequestBody(t){t&&(this.et.collectRequestBody=!0)}getCollectedDataPoints(){return this.et}}return s})(),ti=(()=>{let s;return function(r){r.CONTENTSQUARE="contentsquare.net",r.CLICKTALE="clicktale.net",r.FAKE_TRACKER="fake-tracker.content-square.fr",r.HEAP_API="heap-api.com",r.HEAP_ANALYTICS="heapanalytics.com"}(s||(s={})),s})(),zg=(()=>{class s{constructor(t,e){this.ta=t,this.N=e}collectDataPoints(t,e){this.et=new $g;let i=!1;if(this.ta.collectionRules)for(let n of this.ta.collectionRules)this.I_(n,t)&&this.P_(n,t)&&this.O_(n,t)&&(i=!0,this.N_(t,n,e));return i||(i=this.M_(t)),i&&e&&this.ta.collectStandardHeaders&&this.et.collectStandardHeaders(t),i?this.et.getCollectedDataPoints():null}computeApiErrorCollectionOptions(){let t=this.ta.collectionRules||[],e=new Set,i=[];for(let o of t)o.statusCode!==void 0&&e.add(o.statusCode),o.url!==void 0&&csArray.prototype.indexOf.call(i,o.url)===-1&&csArray.prototype.push.call(i,o.url);let n=[ti.CONTENTSQUARE,ti.CLICKTALE,ti.HEAP_API,ti.HEAP_ANALYTICS];return csArray.prototype.push.call(n,ti.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:n}}I_(t,e){return(!t.statusCode&&e.statusCode>=400||t.statusCode!==void 0&&t.statusCode===e.statusCode)&&(!t.url||csString.prototype.indexOf.call(e.url,t.url)!==-1)}P_(t,e){return t.bodyContent?this.et.isBodyContentMatching(e,t.bodyContent):!0}O_(t,e){let i=csArray.prototype.find.call(t.bodyAttributePaths,n=>n.primary);return i===void 0?!0:this.et.isBodyAttributeValueFound(e,i)}M_(t){return t.statusCode>=400}N_(t,e,i){e.bodyContent&&this.et.collectBodyContent(e.bodyContent);let n=he(e.bodyAttributePaths,o=>o.primary===1);if(n&&this.et.collectBodyAttribute(t,n,o=>this.N.anonymizePII(o)),i){this.et.setCollectQueryParam(e.collectQueryParam),this.et.setCollectResponseBody(e.collectResponseBody),this.et.setCollectRequestBody(e.collectRequestBody);for(let c of e.customHeaders)this.et.collectCustomHeaders(t,c,l=>this.N.anonymizePII(l));let o=di(e.bodyAttributePaths,c=>!c.primary);for(let c of o)this.et.collectBodyAttribute(t,c,l=>this.N.anonymizePII(l))}}}return s})();var pl=["trackError"];var Gg=20,qg="Custom Error:",Wg="https://cserror.com/texterror.js",Yg=(()=>{class s extends Lt{constructor(t,e,i,n,o,c){super(),this.bs=t,this.Ml=e,this.Et=i,this.fe=n,this.Ys=o,this.w=c,this.ia=[],this.Oi=0,this.Ii=[]}initStates(){this.Qe=O.now(),this.Ml.removeQueryParams(),this.Ml.setQueryParams(this.Et.getRequestParameters()),this.ia=[],this.Oi=0}onStart(){this.bs.subscribe(s.Ut,t=>this.J(t)),this.Nl()}onStop(){this.bs.unsubscribe(s.Ut)}onIframeJavascriptError(t){this.J(t)}trackCustomError(t){let e={errorType:"jsError",message:`${qg} ${t}`,lineno:1,colno:1,filename:Wg};this.Sn(e)}Sn(t){if(this.isStarted){let e=this.J(t);e&&this.Ys.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.Ii,t)}Nl(){this.isStarted&&(csArray.prototype.forEach.call(this.Ii,t=>this.Sn(t)),this.Ii=[])}J(t){if(this.isStarted&&this.Oi<Gg){let e={...t,pageUrl:this.w.getAnonymizedUrl(),rt:this.bi()};return this.fe.anonymize(e),csArray.prototype.push.call(this.ia,e),this.un(),e}return null}bi(){return O.now()-this.Qe}un(){this.Ml.send({errors:this.ia}),this.ia=[],this.Oi+=1}}return s.Ut="JavaScriptErrorsService",s})(),Xg="errors",Kg=(()=>{class s{constructor(t,e,i,n,o,c,l,h,m){this.bs=t,this.fe=e,this.f=i,this.Et=n,this.gt=o,this.E=c,this.Ys=l,this.w=h,this.zt=m}init(){let t=this.zt.create(`${this.f.getTrackerUri()}/${Xg}`,!0);this.Ni=new Yg(this.bs,t,this.Et,this.fe,this.Ys,this.w),this.gt.addListener(this.Ni),this.ht()}ht(){this.f.jsCustomErrorsEnabled&&!this.f.customErrors.enabled&&this.E.register(pl,t=>{this.Ni.trackCustomError(t)})}onStartTracking(){this.Ni.start()}onAfterNaturalPageView(){this.Ni.initStates()}onAfterArtificialPageView(){this.Ni.initStates()}onBeforeSessionRenewal(){this.Ni.stop()}onOptout(){this.Ni.stop()}}return s})(),fl=(()=>{class s{constructor(t){this.A=t,this.Xs=!1,this.$t={boundElement:Z,type:"error",listener:e=>this.L_(e)}}observe(){pt(this.$t,this.Xs)}disconnect(){ft(this.$t,this.Xs)}L_(t){this.A(t)}}return s})(),Jg=(()=>{class s extends Qn{constructor(){super(),this.G=new fl(t=>this.errorListener(t))}onStartTracking(){this.G.observe()}onStopTracking(){this.G.disconnect()}errorListener(t){let e=this.V_(t);for(let i in this.subscriptions){let n=this.subscriptions[i];n(e)}}U_(t){return t=t!=null?t:"[NO ERROR MESSAGE]",dt.truncate(t,s.kl,dt.ELLIPSIS)}j_(t){return!t||Zt(t)?"":dt.truncate(t,s.Dl,dt.ELLIPSIS)}V_(t){return{errorType:"jsError",message:this.U_(t.message),filename:this.j_(t.filename),lineno:t.lineno,colno:t.colno}}}return s.kl=1024,s.Dl=150,j([I("Event handler type: error")],s.prototype,"errorListener",null),s})(),Qg="CS_ANONYMIZED_VALUE",Zg=(()=>{class s{constructor(t,e){this.N=t,this.w=e}anonymize(t){return R(t.message)&&(t.message=this.H_(t.message),t.message=this.N.anonymizePII(t.message)),R(t.filename)&&(t.filename=this.w.computeOverriddenUrl(t.filename)),t}H_(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${Qg}'`)}}return s})(),tm=512,em=255,Wr=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,tm),this.value=R(e)?csString.prototype.slice.call(e,0,em):e}static isKeyValid(t){return R(t)}static isValueValid(t){return R(t)||Ls(t)}}return s})(),sm=(()=>{class s extends Lt{constructor(t,e){super(),this.Gt=t,this.N=e,this.xl=[]}onStart(){csArray.prototype.forEach.call(this.xl,t=>this.sf(t.key,t.value)),this.xl=[]}onStop(){}sf(t,e){let i=this.N.anonymizePII(t),n=Ls(e)?e:this.N.anonymizePII(e);this.Gt.add(new Wr(i,n))}trackDynamicVariable(t,e){if(Wr.isKeyValid(t)&&Wr.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.xl,{key:t,value:e});return}this.sf(t,e)}else throw new Error(`Command misuse: ${ro[0]}`)}}return s})(),im=(()=>{class s{constructor(t){this.ge=t,this.Gt=[]}add(t){csArray.prototype.push.call(this.Gt,t),this.setBatchReadyCall()}clear(){this.Gt=[]}onBatchReady(t){this.B_=t}getRequestParameters(){let t={};for(let e of this.Gt)t[e.key]=e.value;return{dv:this.ge.compressSync(csJSON.stringify(t),"base64"),ct:this.ge.algorithm}}setBatchReadyCall(){this.B_()}}return j([_r({wait:0,mode:"trailing"}),I("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),rm="dvar",ro=["trackDynamicVariable"],nm=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.R=e,this.f=i,this.Ve=n,this.ge=o,this.N=c,this.us=new js(this.f.getTrackerUri(),rm),this.Gt=new im(this.ge),this.Mi=new sm(this.Gt,this.N)}init(){this.us.setRequestParametersProviders(this.Ve,this.Gt),this.R.setDynamicVariablesService(this.Mi),this.Gt.onBatchReady(()=>this.us.send()),this.us.after(()=>this.Gt.clear()),this.E.register(ro,({key:t,value:e}={})=>{this.Mi.trackDynamicVariable(t,e)})}onStartTracking(){this.Mi.start()}}return s})(),Va=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),R(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return gt(t)&&Et(t.revenue)&&R(t.currency)&&t.currency.length<=10&&(!gt(t.id)||R(t.id))}}return s})(),gl=100,om=100,am=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.$c(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return Y(t.sku)&&(e.sku=t.sku),Y(t.category)&&(e.category=t.category),Y(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,gl)),e}static $c(t){return gt(t)&&R(t.id)&&R(t.name)&&Et(parseFloat(t.price))&&Ls(parseInt(t.quantity,10))&&(!Y(t.sku)||R(t.sku))&&(!Y(t.category)||R(t.category))&&(!Y(t.merchant)||R(t.merchant))}}return s})(),cm=(()=>{class s extends Lt{constructor(t,e,i){super(),this.N=t,this.rf=e,this.W=i,this.Ll=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Ll,t=>{this.ye=t.transaction,this._n=t.transactionItems,this.sendTransaction()}),this.Ll=[]}onStop(){}addTransaction(t){let e=this.N.anonymizeFields(t,["id"]);this.ye=Va.from(e)}getTransaction(){return this.ye}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Ll,{transaction:this.ye,transactionItems:[...this._n]}),this.clear();return}if(!(this.rf===null||this.W===null)&&(this.W.refreshSession(),!!this.W.isSessionValid())){if(!this.ye.hasValidRevenue()){H.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.rf.send()}}addItem(t){if(pe(t))throw new Error(`Command misuse: ${br[1]}`);let e=this.N.anonymizeFields(t,["id","name","sku","category"]),i=am.from(e);i!==null&&csArray.prototype.push.call(this._n,i)}getItems(){return this._n}clear(){this.ye=Va.from({revenue:NaN}),this._n=[]}getRequestParameters(){let t={id:this.ye.id?`${this.ye.id}`:"",revenue:`${this.ye.revenue}`};return Y(this.ye.tax)&&(t.tax=`${this.ye.tax}`),Y(this.ye.shipping)&&(t.shipping=`${this.ye.shipping}`),Y(this.ye.currency)&&(t.cu=`${this.ye.currency}`),t.items=window.csJSON.stringify(this._n),t}}return s})(),lm=(()=>{class s extends Lt{constructor(t,e){super(),this.F_=t,this.W=e,this.Ne=null,this.Vl=[]}onStart(){csArray.prototype.forEach.call(this.Vl,t=>{this.Ne=t,this.nf()}),this.Vl=[]}onStop(){}addToCart(t){let e={};R(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,om)),R(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,gl)),(e.sku||e.merchant)&&(this.Ne=e,this.nf())}getCartItem(){return this.Ne}nf(){if(!this.isStarted&&this.Ne!==null){csArray.prototype.push.call(this.Vl,this.Ne),this.clear();return}this.W.refreshSession(),this.W.isSessionValid()&&this.F_.send()}clear(){this.Ne=null}getRequestParameters(){if(!this.Ne)return{};let t={};return R(this.Ne.sku)&&this.Ne.sku.length>0&&(t.sku=this.Ne.sku),R(this.Ne.merchant)&&this.Ne.merchant.length>0&&(t.me=this.Ne.merchant),t}}return s})(),hm=["ecommerce:addToCart","ec:cart:add"],no=["ecommerce:addTransaction","ec:transaction:create"],br=["ecommerce:addItem","ec:transaction:items:add"],oo=["ecommerce:send","ec:transaction:send"],um=(()=>{class s{constructor(t,e,i,n,o,c,l){this.f=t,this.Et=e,this.O=i,this.E=n,this.N=o,this.W=c,this.w=l}init(){let t=new js(this.f.getTrackerUri(),"transaction"),e=new js(this.f.getTrackerUri(),"addtocart");this.es=new cm(this.N,t,this.W),this.ra=new lm(e,this.W);let i=new mi(this.Et,this.O,this.w,this.es);t.setRequestParametersProviders(i),t.after(()=>{this.es.clear()});let n=new mi(this.Et,this.O,this.w,this.ra);e.setRequestParametersProviders(n),e.after(()=>{this.ra.clear()}),this.E.register(no,o=>{this.es.addTransaction(o)}),this.E.register(br,o=>this.es.addItem(o)),this.E.register(oo,()=>this.es.sendTransaction()),this.E.register(hm,o=>{this.ra.addToCart(o)})}onStartTracking(){this.es.start(),this.ra.start()}}return s})();var dm=2,ao=(()=>{class s{constructor(t){this.K_=t,this.na=0}addString(t){this.na+=t.length*dm}addArrayBuffer(t){this.na+=t.byteLength}isThresholdReached(){return this.na>this.K_}reset(){this.na=0}}return s})();var Ua=(()=>{class s{static create(t,e){if(!s.isSupported())throw new Error("IntersectionObserver is not supported");if(e&&e.delay&&e.delay<100)throw new Error("Visibility delay should be > 100ms");return e!=null&&e.trackVisibility&&(t=s.Q_(t)),new csIntersectionObserver(t,e)}static isSupported(){return!!window.csIntersectionObserver&&!!window.IntersectionObserverEntry}static Q_(t){return(e,i)=>t(Ce(e,pm),i)}}return s})();function pm(s){return s.isVisible||!rt.isVisibleInViewportInForeground(s.target)?s:{boundingClientRect:s.boundingClientRect,intersectionRatio:s.intersectionRatio,intersectionRect:s.intersectionRect,isIntersecting:s.isIntersecting,rootBounds:s.rootBounds,target:s.target,time:s.time,isVisible:!0}}var Cn=()=>(s,r,t)=>{t.value=fm(t.value)};function fm(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let o=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,o[r])return;o[r]=!0,jn(()=>{o[r]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=r,i}Cn.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var gm=(()=>{class s{constructor(t){this.A=t,this.Js=new Map,this.lf=e=>{let i=e.target;if(this.Js.has(i))return!0;let n=!1;return this.Js.forEach((o,c)=>{n||!this.Js.get(c).subtree||(n=c.contains(i))}),n},mt.general.nbOfMutationObservers.increase(),this.D=new csMutationObserver(e=>{Cn.isScheduled(this,this.garbageCollect)&&(e=di(e,this.lf)),e.length&&Ht(()=>t(e,this))})}disconnect(){mt.general.nbOfMutationObservers.decrease(),this.D.disconnect(),this.Js=new Map}takeRecords(){return this.D.takeRecords()}observe(t,e){return mt.mutations.elementMutationObserved.increase(),this.Js.set(t,e),this.D.observe(t,e)}unobserve(t){this.Js.has(t)&&(mt.mutations.elementMutationObserved.decrease(),this.Js.delete(t),this.garbageCollect())}garbageCollect(){mt.mutations.unobserveGarbageCollection.measure(()=>{let t=di(this.takeRecords(),this.lf);t.length&&this.A(t,this),this.D.disconnect(),this.Js.forEach((e,i)=>this.D.observe(i,e))})}}return tt([Cn()],s.prototype,"garbageCollect",null),s})(),mm=(()=>{class s{constructor(t){this.A=t,this.ca=new Set}onMutations(t){if(ir(t,e=>{var i;return!!(!((i=e.removedNodes)===null||i===void 0)&&i.length)}))for(let e of this.ca.values())rt.isConnected(e)||(this.ca.delete(e),this.A(e))}observe(t){this.G||(this.G=new ye(e=>csSetTimeout(()=>this.onMutations(e))),this.G.observe()),this.ca.add(t)}disconnect(){var t;(t=this.G)===null||t===void 0||t.disconnect(),this.ca.clear(),this.G=void 0}}return tt([I("NodeDisconnectedObserver.onMutations")],s.prototype,"onMutations",null),s})(),ym=300,dr=(()=>{class s{constructor(t){this.ha=new Set,this.Z_=new mm(e=>this.hf(e)),this.z=!1,this.Tt=t?{...ja,...t}:ja}stop(){var t,e;this.z=!1,(t=this.An)===null||t===void 0||t.disconnect(),(e=this.D)===null||e===void 0||e.disconnect()}start(t){if(this.z)throw new Error("VisibilityObserver is already started");this.A=ss("VisibilityObserver:callback",(i,n)=>t(i,n));let e={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:ym};this.An=Ua.create(i=>this.handleIntersection(i),e),this.D=new gm(i=>csSetTimeout(()=>{K(i,n=>this.hf(n.target))})),this.Ul(),this.z=!0}observe(t){if(!this.z)throw new Error("Observer is stopped.");this.Tt.reobserve===!1&&t[this.jl]||(mt.visibilityObserver.nbElements.increase(),t[this.jl]=!0,this.watchIntersection(t))}Ul(){this.ua=csSymbol("isVisible"),this.jl=csSymbol("ObservedElement"),this.Hl=csSymbol("LinkedElement"),this.uf=csSymbol("Tracked")}hf(t){this.ha.add(t);for(let e of this.tw(t))this.ha.add(e);this.recheckCssVisibilityAll()}recheckCssVisibilityAll(){K(this.ha.keys(),t=>{!t.isConnected||rt.areAncestorsHiddenByCSS(t)||t[this.jl]&&this.watchIntersection(t)}),this.ha.clear()}watchIntersection(t){this.D.unobserve(t),this.An.unobserve(t);let e=rt.getTopAncestorHiddenByCSS(t);e?(e!==t&&(this.df(e,t),this.watchMutation(e)),this.watchMutation(t)):this.An.observe(t)}watchMutation(t,e=!0){e&&delete t[this.ua],this.An.unobserve(t);let i={attributeFilter:["style","class","hidden"]};this.D.observe(t,i)}handleIntersection(t){for(let e of t){let i=e.target;if(!e.isVisible){rt.isVisibleInDocument(i)||this.ew(i);continue}let n=this.Tt.allowSameMatch||!e.target[this.ua];e.target[this.ua]=!0,n&&!this.Tt.delay&&this.onVisibilityChanged(e.target,ci.VisibleInViewPort)}this.Tt.delay&&csSetTimeout(()=>{for(let e of t){let i=e.isIntersecting&&e.isVisible;e.target[this.ua]&&i&&this.onVisibilityChanged(e.target,ci.VisibleInViewPort)}},this.Tt.delay)}ew(t){mt.visibilityObserver.hiddenElements.increase();let e=rt.getTopElement(t);this.watchMutation(t),e&&(this.Z_.observe(e),this.df(e,t),this.watchMutation(e,!1))}df(t,e){var i;(t[this.Hl]=(i=t[this.Hl])!==null&&i!==void 0?i:new Set).add(e)}tw(t){var e,i;let n=[],o=(i=(e=t[this.Hl])===null||e===void 0?void 0:e.values())!==null&&i!==void 0?i:[];return K(o,c=>csArray.prototype.push.call(n,c)),n}onVisibilityChanged(t,e){if(e===ci.VisibleInViewPort&&this.Tt.trackOnce){if(this.An.unobserve(t),this.D.unobserve(t),t[this.uf])return;t[this.uf]=!0}this.A(t,e)}static isSupported(){return Ua.isSupported()}}return tt([I()],s.prototype,"observe",null),tt([_r({wait:50}),I(),At("recheckCssVisibilityAll")],s.prototype,"recheckCssVisibilityAll",null),tt([I()],s.prototype,"watchIntersection",null),tt([I()],s.prototype,"watchMutation",null),tt([I(),At("VisibilityObserver.handleIntersection")],s.prototype,"handleIntersection",null),tt([I()],s.prototype,"onVisibilityChanged",null),s})(),ci=(()=>{let s;return function(r){r.VisibleInViewPort="VisibleInViewPort",r.HiddenByAnother="HiddenByAnother",r.Hidden="Hidden"}(s||(s={})),s})(),ja={delay:1e3,trackOnce:!0,reobserve:!1};var $i=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),Ze=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===V.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),Em=(()=>{class s{constructor(t,e,i,n){this.O=t,this.R=e,this.f=i,this.ns=n,this._f=!1}isNaturalPageViewSent(){return this._f}setNaturalPageViewSent(t){this._f=t}getTrackingContext(){let t=this.R.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.f.projectId,n=this.f.uxaDomain,o=t.pageNumber,c=this.ns.getPageViewType(),l=this.R.isReplayRecorded(),h=this.Ow(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:h,...this.f.smbConfig}}getSessionKey(){let t=this.O.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Ow(t){return Ze.isReplayConsentNeeded(this.f)?t.collectState===V.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?$i.NOT_EXPRESSED:t.collectState===V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?$i.WITHDRAWN:$i.GRANTED:$i.NOT_NEEDED}}return s})(),Sm=(()=>{class s{constructor(t){this.It=t,this.se=[]}handleCommand(t){if(pe(t)&&(this.In(t),this.It.isNaturalPageViewSent())){let e=this.It.getTrackingContext();e!==null&&this.jt(t,e)}}In(t){csArray.prototype.push.call(this.se,t)}executeRegisteredCallbacks(){let t=this.It.getTrackingContext();t!==null&&csArray.prototype.map.call(this.se,e=>this.jt(e,t))}jt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),vm=(()=>{class s{constructor(t){this.It=t,this.ki=[]}handleCommand(t){if(this.It.isNaturalPageViewSent())return this.Nw(t);this.Pn(t)}Nw(t){let e=this.It.getSessionKey();return this.wf(t)&&e!==null&&this.jt(t.callback,e),e}Pn(t){this.wf(t)&&csArray.prototype.push.call(this.ki,t.callback)}flushPendingCallbacks(){let t=this.It.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.ki,e=>{this.jt(e,t)}),this.ki=[]}wf(t){return t&&typeof t.callback=="function"}jt(t,e){csSetTimeout(()=>{t(e)})}}return s})();function _m(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,m,d]=l;n?h=`${c}/sites/${n}/player?uu=${m}&sn=${d}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${m}&sn=${d}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(h+=`&t=${O.now()-r.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var wm=(()=>{class s{constructor(t){this.It=t}handleCommand(t,e){gs(t)&&pe(e)&&this.jt(t,e)}jt(t,e){csSetTimeout(()=>{let i=this.It.getTrackingContext();if(i){let n=_m(i,t);e(n)}})}}return s})(),bm=(()=>{class s{constructor(){this.se=new Set}handleCommand(t,e){return!pe(t)||this.se.has(t)?null:(this.se.add(t),e&&(this.ke=e,this.bf(t,e)),()=>this.se.delete(t))}executeCallbacks(t){this.Mw(t)&&(this.ke=t,this.se.forEach(e=>this.bf(e,t)))}bf(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}Mw(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:o,collectState:c}=t;return this.ke&&(this.ke.isRecording!==e||this.ke.recordingStartTimestamp!==i||this.ke.etrState!==n||this.ke.etrStatus!==o||this.ke.collectState!==c)}}return s})(),ml=["afterPageView"],Tm=["getSessionKey"],Am=["onRecordingContextChange","onRecordingStateChange"],Rm=["replay:link:generate"],Cm=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.O=t,this.R=e,this.E=i,this.gt=n,this.Z=o,this.f=c,this.ns=l,this.js=h,this.Tf=null}init(){this.It=new Em(this.O,this.R,this.f,this.ns),this.Fl=new Sm(this.It),this.Af=new vm(this.It),this.On=new bm,this.kw=new wm(this.It),this.E.register(Tm,t=>this.Af.handleCommand(t)),this.E.register(ml,t=>this.Fl.handleCommand(t)),this.E.register(Am,t=>this.On.handleCommand(t,this.js.getRecordingContext())),this.E.register(Rm,(t,e)=>{this.fr&&this.kw.handleCommand({...t,recordingStartTimestamp:this.js.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){var t;this.It.setNaturalPageViewSent(!0),this.Af.flushPendingCallbacks(),this.Fl.executeRegisteredCallbacks(),(t=this.Tf)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.Fl.executeRegisteredCallbacks(),(t=this.Tf)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.On.executeCallbacks(this.js.getRecordingContext())}setRecordingService(t){this.fr=t}}return j([_r({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),Im=(()=>{class s{constructor(t){this.E=t}init(){this.Rf(s.Dw,xc),this.Rf(s.xw,Dc)}Rf(t,e){this.E.register([t],(i,n)=>{!R(i)||!(R(n)||es(n))||H.error(n,`${e}${i}`)})}}return s.xw="logSnippetError",s.Dw="logImplementationSnippetError",s})(),Pm="@ETP@",Ha="@user-identifier@",Om=(()=>{class s extends Lt{constructor(t,e,i,n){super(),this.f=t,this.Lw=e,this.ge=i,this.X=n,this.$l=[],this.Di=[]}onStart(){csArray.prototype.forEach.call(this.$l,t=>this.Cf(t)),this.$l=[],csArray.prototype.forEach.call(this.Di,t=>this.If(t)),this.Di=[]}onStop(){}Cf(t){this.Vw(t)?ni.isSupported()&&this.Uw(t):this.jw(t)}trackPageEvent(t){if(!s.Pf(t))throw new Error(`Command misuse: ${co[0]}`);this.isStarted?this.Cf(t):csArray.prototype.push.call(this.$l,t)}Vw(t){return cr(t,Ha)}async Uw(t){if(!this.f.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,Ha.length);if(e.length>ni.MAX_DIGEST_INPUT_SIZE){H.warn("UserIdentifier event: invalid user identifier");return}let i=await ni.digest(e);i?(this.gr={eventName:i,isETR:!1,isCustomHashId:!0},this.fa()):H.warn("Page event: unable to compute customHashId"),this.f.encryptionEnabled&&this.X.emitUserIdentifierEvent(e)}jw(t){this.X.emitPageEvent(t),this.gr={eventName:t,isETR:!1,isCustomHashId:!1},this.fa(),this.f.tagDeploymentMode===Es.LoadClicktalePtc&&va.sendPageEvent(t)}If(t){this.f.malkaEtrEnabled?this.Hw(t):this.Bw(t)}trackEventTriggerRecording(t){if(!s.Pf(t))throw new Error(`Command misuse: ${Ri[0]}`);this.isStarted?this.If(t):csArray.prototype.push.call(this.Di,t)}Hw(t){cr(t,Pm)?this.X.emitEventTriggerRecording(t,ts.ETR_PAGE):this.X.emitEventTriggerRecording(t,ts.ETR_SESSION),this.gr={eventName:t,isETR:!0,isCustomHashId:!1},this.fa()}Bw(t){gf(this.f)&&(this.X.emitEventTriggerRecording(t,ts.ETR_LEGACY),this.gr={eventName:t,isETR:!0,isCustomHashId:!1},this.fa(),this.f.tagDeploymentMode===Es.LoadClicktalePtc&&va.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.ge.compressSync(this.gr.eventName,"base64"),ct:this.ge.algorithm,isETR:`${this.gr.isETR}`,isCustomHashId:`${this.gr.isCustomHashId}`}}fa(){this.Lw.send()}static Pf(t){return R(t)&&!!csString.prototype.trim.call(t)}}return s})(),co=["trackPageEvent"],Ri=["trackEventTriggerRecording"],Nm=(()=>{class s{constructor(t,e,i,n,o){this.f=t,this.E=e,this.ge=i,this.Ve=n,this.X=o}init(){let t=new js(this.f.getTrackerUri(),"pageEvent");this.ga=new Om(this.f,t,this.ge,this.X),t.setRequestParametersProviders(this.ga,this.Ve),this.E.register(co,e=>{this.ga.trackPageEvent(e)}),this.E.register(Ri,e=>{this.ga.trackEventTriggerRecording(e)})}onStartTracking(){this.ga.start()}}return s})(),Mm=["hidePageTitle"],km=["resetHidePageTitle"],Dm="onNextPageviewOnly",xm=(()=>{class s{constructor(t,e){this.Se=t,this.E=e}init(){this.E.register(Mm,t=>{let e=t===Dm;this.Se.setHidePageTitle(e)}),this.E.register(km,()=>this.Se.resetHidePageTitle())}onAfterNaturalPageView(){this.Se.updateStateOnAfterPageview()}onAfterArtificialPageView(){this.Se.updateStateOnAfterPageview()}}return s})(),Lm=(()=>{class s{constructor(){this.Of=255,this.Fw="****",this.$w="data-cs-hide-title",this.zw="data-heap-redact-text",this.ma={value:!1,onNextPageviewOnly:!1}}getRequestParameters(){return{t:this.getPageTitle()}}getPageTitle(){return this.ma.value||this.Gw()?this.Fw:this.qw(window.document.title)}setHidePageTitle(t){this.ma={value:!0,onNextPageviewOnly:t}}resetHidePageTitle(){this.ma={value:!1,onNextPageviewOnly:!1}}updateStateOnAfterPageview(){this.ma.onNextPageviewOnly&&this.resetHidePageTitle()}Gw(){let t=window.csquerySelector[document.nodeType].call(document,"head > title");return t===null?!1:t.getAttribute(this.$w)!==null||t.getAttribute(this.zw)!==null}qw(t){return t.length>this.Of?csString.prototype.substring.call(t,0,this.Of):t}}return s})(),Qi=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),Vm=(()=>{class s{constructor(){this.zl=Qi.Natural}setPageViewType(t){this.zl=t}getPageViewType(){return this.zl}getRequestParameters(){return{pvt:this.zl}}}return s})();var Um=(()=>{class s extends Lt{constructor(t,e,i,n,o){super(),this.S=t,this.X=e,this.Gl=i,this.w=n,this.ns=o}init(){this.Ww()}onStart(t){t?this.Yw():this.Xw()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.Nf(t,e):gt(t)&&this.w.overridePath(t,e),this.isStarted||(this.X.emitTargetingRulesArtificialPageview(this.w.getUrl()),this.w.cleanupOverrideLifespan())}Xw(){this.ns.setPageViewType(Qi.Natural),this.S.emitBeforeNaturalPageView(this.w.getAnonymizedUrl()),this.Gl.send(),this.w.cleanupOverrideLifespan(),this.S.emitAfterNaturalPageView()}Yw(){this.ns.setPageViewType(Qi.Renewal),this.S.emitBeforeNaturalPageView(this.w.getAnonymizedUrl()),this.Gl.send(),this.S.emitAfterNaturalPageView()}Nf(t,e){let i=this.w.getAnonymizedUrl();this.ns.setPageViewType(Qi.Artificial),this.S.emitArtificialPageViewEnd(),gt(t)&&this.w.overridePath(t,e),this.S.emitBeforeArtificialPageView(i,this.w.getAnonymizedUrl()),this.Gl.send(),this.w.cleanupOverrideLifespan(),this.S.emitAfterArtificialPageView()}Ww(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.Nf()})}}return s})(),jm=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Hm(){return{la:jm}}var Bm=99999,Fm=(()=>{class s{constructor(t){this.R=t,this.Kw=this.Jw()&&window.CSCurrentScript}Qw(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.Zw(e)?null:Math.round(e.responseEnd-e.fetchStart)}Zw(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.Kw||this.tb()!==1)return{};let t=this.Qw();return t===null?{}:{dt:`${Math.min(t,Bm)}`}}tb(){var t;return((t=this.R.getSession())===null||t===void 0?void 0:t.pageNumber)||null}Jw(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),yl=["trackPageview"],In=["setPath"],Pn=["setQuery"],Ba=["referrer:maskUrl"],$m=["referrer:removeQueryString"],zm=["referrer:keepQueryString"],Yr=s=>gs(s)&&s!==null,Gm=(s,r,t,e)=>{s.register(yl,(i,n)=>{if(!R(i)){r.triggerArtificialPageView();return}Yr(n)?r.triggerArtificialPageView(i,n):r.triggerArtificialPageView(i)}),s.register(In,(i,n)=>{if(!R(i))throw new Error(`Command misuse: ${In[0]}`);Yr(n)?t.overridePath(i,n):t.overridePath(i)}),s.register(Pn,(i,n)=>{if(!R(i))throw new Error(`Command misuse: ${Pn[0]}`);Yr(n)?t.overrideQuery(i,n):t.overrideQuery(i)}),e&&(s.register(Ba,i=>{if(!R(i))throw new Error(`Command misuse: ${Ba[0]}`);e.addUrlMaskingPattern(i)}),s.register($m,()=>e.enableRemoveQueryString()),s.register(zm,()=>e.disableRemoveQueryString()))};var qm=(()=>{class s{constructor(t,e,i,n,o,c,l,h,m,d,E,g,S,P,N){this.f=t,this.E=e,this.S=i,this.Ve=n,this.O=o,this.R=c,this.xi=l,this.bt=h,this.vt=m,this.w=d,this.ie=E,this.ns=g,this.X=S,this.Se=P,this.Yi=N}init(){let t=new js(this.f.getTrackerUri(),"pageview");this.Qs=new Um(this.S,this.X,t,this.w,this.ns),this.Qs.init();let e=new mi(this.Ve,this.O,wt,this.xi,this.w,this.bt,Ln,this.vt,this.ns,new Fm(this.R),this.ie);this.Se&&e.addProvider(this.Se),this.Yi&&e.addProvider(this.Yi);let i=this.f.isCsCrosswritingHeap();if(i||this.f.isCsSideloadingHeap()||this.f.isHeapSideloadsCs()){let n=this.f.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let o={cw:i?"1":"2"};return n&&(o.happid=n),o}})}t.setRequestParametersProviders(e),Gm(this.E,this.Qs,this.w,this.xi)}start(t){this.Qs.start(t)}onBeforeSessionRenewal(){this.Qs.stop()}}return s})();function Wm(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}var Re=csSymbol(),lo=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,m,d,E,g,S,P;this.A=t,this.ql=null,this.Wl=null,this.Yl=null,this.Xl=null,this.Kl=null,this.eb=Sr(N=>this.processUpdateRulesInATick(N)),this.Jl=null,this.Ql=null,this.Zl=null,this.A=N=>Ht(()=>t(N)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.ql=zt({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:N,args:v})=>{this.processInsertRule(N,v)}})),typeof((o=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.Wl=zt({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:N,args:v})=>{this.processDeleteRule(N,v)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Yl=zt({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:N})=>this.processUpdateRule(N)})),typeof((m=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||m===void 0?void 0:m.deleteRule)=="function"&&(this.Xl=zt({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:N})=>this.processUpdateRule(N)})),!((d=window.StyleSheet)===null||d===void 0)&&d.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Kl=hr(window.StyleSheet.prototype,"disabled",(N,v,_)=>{v!==_&&this.sb(N,v)})),typeof((g=(E=window.CSSStyleDeclaration)===null||E===void 0?void 0:E.prototype)===null||g===void 0?void 0:g.setProperty)=="function"&&(this.Jl=zt({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:N})=>{let v=N.parentRule;v instanceof CSSStyleRule&&this.processUpdateRule(v)}})),typeof((P=(S=window.CSSStyleDeclaration)===null||S===void 0?void 0:S.prototype)===null||P===void 0?void 0:P.removeProperty)=="function"&&(this.Ql=zt({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:N})=>{let v=N.parentRule;v instanceof CSSStyleRule&&this.processUpdateRule(v)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Zl=$p(window.CSSStyleRule.prototype,"style",N=>{this.processUpdateRule(N)}))}observe(){var t,e,i,n,o,c,l,h;(t=this.ql)===null||t===void 0||t.activate(),(e=this.Wl)===null||e===void 0||e.activate(),(i=this.Yl)===null||i===void 0||i.activate(),(n=this.Xl)===null||n===void 0||n.activate(),(o=this.Kl)===null||o===void 0||o.activate(),(c=this.Jl)===null||c===void 0||c.activate(),(l=this.Ql)===null||l===void 0||l.activate(),(h=this.Zl)===null||h===void 0||h.activate()}disconnect(){var t,e,i,n,o,c,l,h;(t=this.ql)===null||t===void 0||t.deactivate(),(e=this.Wl)===null||e===void 0||e.deactivate(),(i=this.Yl)===null||i===void 0||i.deactivate(),(n=this.Xl)===null||n===void 0||n.deactivate(),(o=this.Kl)===null||o===void 0||o.deactivate(),(c=this.Jl)===null||c===void 0||c.deactivate(),(l=this.Ql)===null||l===void 0||l.deactivate(),(h=this.Zl)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[Re]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.A(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.eb.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(Us(i.cssRules),e);if(n===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.A(o)}}processDeleteRule(t,[e]){if(t[Re]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.A(i)}sb(t,e){if(t[Re]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.A(i)}}return tt([I()],s.prototype,"observe",null),tt([I()],s.prototype,"disconnect",null),tt([I()],s.prototype,"processInsertRule",null),tt([I()],s.prototype,"processUpdateRule",null),tt([I()],s.prototype,"processUpdateRulesInATick",null),tt([I()],s.prototype,"processDeleteRule",null),s})(),Ym=(()=>{class s{constructor(t){this.ib=1,this.ya=new Set,this.th=null,this.eh=null,this.Jc=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.rb=e=>{let i=e.sheet;if(this.ya.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[Re],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[Re],index:e.index};this.A(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[Re],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[Re],disabled:e.disabled};this.A(n)}}},this.A=e=>Ht(async()=>{await mc(2),t(e)}),this.ue=new zs(this.Jc),"adoptedStyleSheets"in Document.prototype&&(this.th=hr(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.eh=hr(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.Mf=new lo(this.rb)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.ue.observe(),(t=this.th)===null||t===void 0||t.activate(),(e=this.eh)===null||e===void 0||e.activate(),this.Mf.observe()}disconnect(){var t,e;this.ya.clear(),this.ue.disconnect(),(t=this.th)===null||t===void 0||t.deactivate(),(e=this.eh)===null||e===void 0||e.deactivate(),this.Mf.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.nb(e);let i=Ce(e,o=>o[Re]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.A(n)}nb(t){K(t,e=>{if(this.ya.has(e))return;let i=this.ib++;e[Re]=i,this.ya.add(e);let n=this.ob(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.A(o)})}ob(t){let e=[];try{e=Ce(t.cssRules,i=>i.cssText)}catch{}return e}}return tt([I()],s.prototype,"observe",null),tt([I()],s.prototype,"disconnect",null),tt([I()],s.prototype,"setStyleSheets",null),s})(),Xm=_s(Zm,"optimizeMutations"),Km=csSymbol.for("ignoreNextSerialization");function Jm(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,o=new Map,c=new Set,l=new Set,h=new Map,m=new Set;return{isMovedNode(d){return s.has(d)},markAsMovedNode(d){m.delete(d),s.add(d)},isDetachedMove(d){return!!rt.findAncestor(d,E=>m.has(E),!0)},isAddedNode(d){let E=rt.findAncestor(d,g=>r.has(g)||l.has(g)||s.has(g),!0);return!!E&&!s.has(E)},isMovedNodeIntoAddedNode(d){return s.has(d)&&!!rt.findAncestor(d,E=>r.has(E)||l.has(E),!0)},markAsAddedNode(d){m.delete(d),l.delete(d),r.add(d)},markAsPendingInsert(d){l.add(d)},isPendingInsert(d){return l.has(d)},isRemovedNode(d){return!!rt.findAncestor(d,E=>t.has(E),!0)},markAsRemovedNode(d){t.add(d)},isUselessNode(d){return e.has(d)},markAsUselessNode(d){e.add(d)},getPlaceholder(d,E){let g=E==="previous"?n:i;return d&&g.has(d)?g.get(d)||null:d},getSiblings(d){let E=d.addedNodes.length,g=this.getPlaceholder(d.previousSibling,"previous"),S=this.getPlaceholder(d.nextSibling,"next");if(E){let P=g,N=S,v=d.previousSibling!==g,_=d.nextSibling!==S;for(let M=0;M<E;M++){let k=d.addedNodes[M],T=d.addedNodes[E-M-1];this.isLatestNodeMutation(k,d)?(n.delete(k),d.previousSibling&&v&&(i.set(d.previousSibling,k),v=!1),P=k):n.set(k,P),this.isLatestNodeMutation(T,d)?(i.delete(T),d.nextSibling&&_&&(n.set(d.nextSibling,T),_=!1),N=T):i.set(T,N)}}else d.previousSibling&&d.previousSibling!==g&&i.set(d.previousSibling,S),d.nextSibling&&d.nextSibling!==S&&n.set(d.nextSibling,g);return{previousSibling:g,nextSibling:S}},setAttributeMutation(d,E){let g=o.get(d)||new Set;g.add(E),o.set(d,g)},isAttributeMutated(d,E){var g;return!!(!((g=o.get(d))===null||g===void 0)&&g.has(E))},setLatestNodeMutation(d,E){h.set(d,E)},isLatestNodeMutation(d,E){return h.get(d)===E},markAsFutureAddedNode(d){h.has(d)||m.add(d)},isTextMutated(d){return c.has(d)},setTextMutated(d){return c.add(d)}}}function Qm(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function Zm(s){let r=Jm(),t=[];for(let e of s)e.type==="childList"&&Qm(e,r);for(let e of s)switch(e.type){case"attributes":ey(e,r,t);break;case"characterData":ty(e,r,t);break;case"childList":ry(e,r,t);break}return t}function ty(s,r,t=[]){let e=s.target;return rt.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!iy(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function ey(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return rt.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var sy=30;function iy(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=O.now(),n=s[e];return n&&i<n?!0:(s[e]=i+sy,!1)}function ry(s,r,t=[]){let e=rt.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),o=r.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,m=()=>{if(h){let{childListType:g,movedNodes:S,...P}=h;csArray.prototype.push.call(t,g==="added"?P:{...P,movedNodes:S}),h=null}},d=g=>g===(h==null?void 0:h.childListType)?h:(m(),{childListType:g,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let g=0;g<s.addedNodes.length;g++){let S=s.addedNodes[g];r.isLatestNodeMutation(S,s)?(r.isMovedNode(S)?(h=d("moved"),csArray.prototype.push.call(h.movedNodes,S)):(r.markAsAddedNode(S),n||(h=d("added"),csArray.prototype.push.call(h.addedNodes,S))),l=S):rt.isConnected(S)?r.isMovedNode(S)||r.markAsPendingInsert(S):r.markAsUselessNode(S)}m()}let E=di(s.removedNodes,g=>{if(rt.isConnected(g)){if(!i&&!r.isPendingInsert(g)){if(r.isDetachedMove(g))return!0;r.markAsMovedNode(g),r.isMovedNodeIntoAddedNode(g)&&(g[Km]=!0)}return!1}return r.isUselessNode(g)?!1:(r.markAsRemovedNode(g),!0)});return E.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:E,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var ny=(()=>{class s{constructor(t){this.A=t,this.ih=!1,this.ab=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.A({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.A({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.A=e=>Ht(()=>t(e)),this.kf=new lo(e=>Ht(async()=>{await mc(),this.ab(e)})),"adoptedStyleSheets"in Document.prototype&&(this.Df=new Ym(t))}observe(){var t;this.ih=!1,this.D=new ye(e=>this.cb(e),(e,i)=>{i==="added"&&this.lb(e)}),this.D.observe(),this.kf.observe(),(t=this.Df)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.D)===null||t===void 0||t.disconnect(),this.kf.disconnect(),(e=this.Df)===null||e===void 0||e.disconnect(),this.ih=!0}cb(t){if(this.ih)return;let e=Xm(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){at.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:at.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:rt.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.A(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.A(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.A(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:Us(t.addedNodes)};this.A(o)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let o={type:"nodesRemoved",target:t.target,nodes:Ce(t.removedNodes,c=>c)};this.A(o)}}lb(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.A(e)}}return tt([I()],s.prototype,"processAttributeChanged",null),tt([I()],s.prototype,"processCharacterDataChanged",null),tt([I()],s.prototype,"processChildListChanged",null),s})(),ho=(()=>{class s{constructor(t){this.type="asyncEvent",this.rh=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.rh)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.Gs=t,this.rh=!0,this.A&&this.A(this.Gs)}complete(t){this.rh&&t(this.Gs),this.A=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),oy=Uf(),ay=(()=>{class s extends Ee{constructor(){super(...arguments),this.Ea=!1}onStart(){this.Ea=!0,this.A=Wm(this.hb,this),this.G=new ny(this.A),this.G.observe();let t=mt.mutations.initialDOM.asyncMeasure(),e=()=>{this.Ea=!1,Hf(),t()};this.produceEvent(new ho(i=>oy(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.Ea=!1,(t=this.A)===null||t===void 0||t.cancel(),(e=this.G)===null||e===void 0||e.disconnect()}qt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=it(e.target),i.targetProps=X.getProperties(e.target)),[e,i]}hb(t){if(!this.db(t))switch(t.type){case"attributeChanged":{let[e,i]=this.qt(t.type,t);i.attribute=e.attribute,i.isSvg=$s(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=si(e.target),i.linkRel=vc(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?si(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.qt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?si(e.target.parentElement):null,i.parentProps=e.target.parentElement?X.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.qt(t.type,t);i.targetLocalName=ct(e.target)?si(e.target):null,i.nextSibling=e.nextSibling?it(e.nextSibling):null,i.previousSibling=e.previousSibling?it(e.previousSibling):null,mt.mutations.serializedMutations.measure(()=>{i.nodes=Ce(e.nodes,Sn)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.qt(t.type,t);i.previousSibling=e.previousSibling?it(e.previousSibling):null,i.nextSibling=e.nextSibling?it(e.nextSibling):null,i.nodesIds=Ce(e.nodes,it),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.qt(t.type,t);i.nodesIds=Ce(e.nodes,it),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.qt(t.type,t);i.shadowRoot=ai(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.qt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.qt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.qt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.qt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.qt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}Sa(t){return this.Ea&&!X.getProperty(t,oi)}db(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.Sa(t.target)||x.isMaskedElement(t.target)||x.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.Sa(e)||x.isMaskedElement(e)||x.isMaskedElementChild(e))}case"attributeChanged":return this.Sa(t.target)||x.isMaskedElementChild(t.target)||x.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.Sa(t.target)||x.isMaskedElementChild(t.target);default:return!1}}}return s})(),Ci=(()=>{let s;return function(r){function t(e){return e.type==="DomEvent"}r.isDOMEvent=t}(s||(s={})),s})(),qs=(()=>{class s{constructor(){this.ae=[]}start(){}stop(){this.ae.length=0,this.ae=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.ae;csSetTimeout(()=>{let n=ss("Processor:processEvent",o=>this.processEvent(o))(t);n!=null&&csArray.prototype.forEach.call(e,o=>o(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.ae,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.ae,t),()=>{this.ae=csArray.prototype.filter.call(this.ae,e=>e!==t)}}emitEvent(t){Ht(()=>csArray.prototype.forEach.call(this.ae,e=>e(t)))}}return s.pendingEvents=0,s})(),cy=(()=>{class s extends qs{isListening(t){return Ci.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof ks){let c=x.getMaskedAttributeDetails(n);n.attributes=this.jo(n,c)}if(x.getMaskedElementDetails(n).state===x.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}X.traverse(n,c=>{if(c instanceof ks){let l=x.getMaskedAttributeDetails(c);c.attributes=this.jo(c,l);let h=x.getMaskedElementDetails(c);h.state===x.MaskedElementState.Parent&&(this.zc(c,h),e++)}})}return e>0&&G.counters.sensitiveElements.count("masked-elements",e),t}jo(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}zc(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),ks.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})}}return Oe([At("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})();var Fa=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})(),ly=(()=>{class s extends qs{constructor(t,e,i,n=null,o=!1){super(),this.N=i,this.Ho=n,this.captureAnonymizedPlaceholders=o,this.va=new Wf(t,e,i,n,o)}setAnonymization(t){this.va.setAnonymization(t)}isListening(t){return Fa.isTextVisibilityEvent(t)||Ci.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(Fa.isTextVisibilityEvent(t))return t.text=this.N.checkAndAnonymizePII(t.text,this.Ho),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.ah(t);break;case"attributeChanged":this.fb(t);break;case"characterDataChanged":this.gb(t);break}return t}ah(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.va.sanitize(n,i)}fb(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.va.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}gb(t){t.newValue=this.va.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return Oe([At("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();function uo(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=hy(r);return e?(Fs(t,",")||(e=uy(e)),[$a(t),...uo(e)]):[$a(t)]}function hy(s){return csString.prototype.split.call(s,/\s(.+)/)}function $a(s){return csString.prototype.split.call(s,/,$/)[0]}function uy(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var dy=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function py(s,r){return csString.prototype.replace.call(s,dy,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],o=gy((i||n).trim()),c=i?"@import ":"",l=r(o)||o;return`${c}url(${fy(l)})`})}function fy(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function li(s){let r=new Set;return py(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),is(r)}function gy(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var za=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.yb(t);if(!n)return null;let o=await s.Vf(n),c=Zt(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let o=await s.Eb(t,n),c=de(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(m=>{m&&csArray.prototype.push.call(h.nestedResources,{hash:m.hash,data:m.data})})),h}static async Vf(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.Uf,e);return cn(i)}static async yb(t){let e;if(!Zt(t))e=await(await window.fetch(t)).blob();else{let i=Yo(t);if(!i)return null;e=i}return e}static async Eb(t,e){let i=new Map,n=de(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!Zt(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let g=await fetch(l.resourceAbsolutePath);l.data=await g.text()}l.nestedResources||(l.nestedResources=li(l.data));let d=!1,E=!1;for(let g of l.nestedResources){let S=Zt(g)?g:l.resourceAbsolutePath?op(g,l.resourceAbsolutePath):de(g),P=i.get(S);if(P!==void 0){if(P!==null){let v=s.Sb(P,g);l.data=dt.stringReplaceAll(l.data,g,v)}continue}he(c,v=>v.resourceAbsolutePath===S)!==void 0||(d=!0,E||(csArray.prototype.push.call(c,l),E=!0),csArray.prototype.push.call(c,{resourceRawPath:g,resourceAbsolutePath:S}))}if(!d){let g=await s.vb(l.data);i.set(l.resourceAbsolutePath,{hash:g.hash,data:g.data})}}else{let d;if(!Zt(l.resourceAbsolutePath))d=await(await fetch(l.resourceAbsolutePath)).blob();else{let g=Yo(l.resourceAbsolutePath);if(!g){i.set(l.resourceAbsolutePath,null);continue}d=g}let E=await s.Vf(d);i.set(l.resourceAbsolutePath,{hash:E,data:d})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static Sb(t,e){let i=`cs://resources/${t.hash}`;return Zt(e)||(i+=`?${s.ch}=${e}`),i}static async vb(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.Uf,i);return{data:e,hash:cn(n)}}}return s.Uf="SHA-256",s.ch="original-resource-name",s})(),On=(()=>{class s extends qs{constructor(){super(),this._a="cssrm://",this.ve=0,this.As=!1}isListening(t){return!s.isSupported()||!Ci.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this._b(t);break;case"attributeChanged":this.wb(t);break;case"characterDataChanged":this.bb(t);break}return t}disableOnlineAssets(){this.As=!1}enableOnlineAssets(){this.As=!0}isOnlineAssetsActivated(){return this.As}_b(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)X.traverse(i,(n,o)=>{if(n.nodeType===gi.TEXT_NODE&&o){this.Tb(n,o.localName);return}if(!ks.isElement(n))return;let c=he(n.attributes,l=>l.name==="style");if(c&&(c.value=this.wa(c.value)),this.Ab(n)||this.Rb(n,o)){let l=he(n.attributes,m=>m.name==="src");l&&l.value&&(l.value=this.jf(l.value));let h=he(n.attributes,m=>m.name==="srcset");if(h){h.value=this.Hf(h.value);return}}if(this.Cb(n)&&this.As){let l=he(n.attributes,h=>h.name==="href");if(!l||!l.value)return;this.ve++,this.mr(de(l.value),this.ve,!0),this.Ib(n,l,this.ve)}})}Ib(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this._a+i}Tb(t,e){if(!t||e!=="style")return;let i=this.wa(t.data);i!==null&&(t.data=i)}bb(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.wa(t.newValue);e!==null&&(t.newValue=e)}wb(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.wa(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this.jf(t.newValue)),i&&(t.newValue=this.Hf(t.newValue)))}jf(t){return Zt(t)||this.As?(this.ve++,this.mr(t,this.ve,!1,O.now()),this._a+this.ve):t}Hf(t){if(!this.As)return t;let e=t,i=uo(t),n=O.now();for(let o of i)this.ve++,this.mr(de(o),this.ve,!1,n),e=csString.prototype.replace.call(e,o,this._a+this.ve);return e}wa(t){let e=li(t),i=t,n=O.now();for(let o of e){let c=Zt(o);if(!(c||this.As)||this.Pb(o))continue;this.ve++,i=csString.prototype.replace.call(i,o,this._a+this.ve);let l=Cd(o);c?this.mr(o,this.ve,!1,n):this.As&&(l?this.mr(o,this.ve,!0,n):this.mr(de(o),this.ve,!1,n))}return i}mr(t,e,i,n=O.now()){let o=i?za.toCSSStaticResourceEvent:za.toStaticResourceEvent,c=new ho(async l=>{try{let h=await o(t,e,n,this.As);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}});this.emitEvent(c)}Ab(t){return t.localName==="img"}Rb(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}Cb(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return fc()&&vu()&&!!csArray.from}Pb(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return Oe([At("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),my=(()=>{class s extends qs{constructor(t){super(),this.tt=t}isListening(t){return Ci.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.tt.anonymizeUrl(t.initialDOM.baseURI)),t}}return Oe([At("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Xr="textarea",yy=(()=>{class s extends qs{isListening(t){return Ci.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case"initialDOM":this.Ob(t);break;case"nodesAdded":this.Nb(t);break;case"characterDataChanged":this.Mb(t);break}return t}Ob(t){X.traverse(t.initialDOM,(e,i)=>{(this.Bf(e,i)||this.Ff(e))&&(e.data=this.lh(e.data))})}Nb(t){for(let e of t.nodes)X.traverse(e,(i,n)=>{(this.kb(i,n,t)||this.Ff(i))&&(i.data=this.lh(i.data))})}Mb(t){var e;(t.parentLocalName===Xr||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.lh(t.newValue))}lh(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}kb(t,e,i){return this.Db(t,i)||this.Bf(t,e)}Db(t,e){return t.nodeType===3&&e.targetLocalName===Xr}Bf(t,e){return t.nodeType===3&&Y(e)&&e.localName===Xr}Ff(t){return t.nodeType===3&&Ke.isEditableNode(t)}}return Oe([At("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Ey=(()=>{class s{constructor(t){this.A=t,this.$t={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.A=t}observe(){pt(this.$t),this.hh()}hh(){this.resizeListener()}disconnect(){ft(this.$t)}resizeListener(){let t={width:wt.windowWidth(),height:wt.windowHeight()};this.A(t)}}return tt([I("resize")],s.prototype,"resizeListener",null),s})(),Xe=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),zi=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),Gi=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),Sy=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=Z.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in Z;function e(){return Xe.LANDSCAPE}function i(){var c;switch((c=Z.screen.orientation)===null||c===void 0?void 0:c.type){case zi.PORTRAIT_PRIMARY:case zi.PORTRAIT_SECONDARY:return Xe.PORTRAIT;case zi.LANDSCAPE_PRIMARY:case zi.LANDSCAPE_SECONDARY:return Xe.LANDSCAPE;default:return Xe.PORTRAIT}}function n(){switch(window.orientation){case Gi.PORTRAIT:case Gi.PORTRAIT_REVERSE:return Xe.PORTRAIT;case Gi.LANDSCAPE:case Gi.LANDSCAPE_REVERSE:return Xe.LANDSCAPE;default:return Xe.PORTRAIT}}function o(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=o}(s||(s={})),s})(),vy=(()=>{class s extends Ee{constructor(){super(...arguments),this.uh=null,this.ph=null,this.xs=new Ey(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=Sy.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.xb(t);if(e!==this.uh||i!==this.ph){this.uh=e,this.ph=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}xb(t){let e,i,n=wt.screenWidth(),o=wt.screenHeight();return t===Xe.PORTRAIT?(e=n,i=o):(e=Math.max(n,o),i=Math.min(n,o)),{screenWidth:e,screenHeight:i}}onStart(){this.xs.observe()}onStop(){this.uh=null,this.ph=null,this.xs.disconnect()}}return s})();function _y(s){let r=csEventtarget.apply(s);return r&&ct(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var wy=(()=>{class s extends Ee{constructor(){super(),this.$f=t=>{let e=_y(t);e&&this.fh(e,t.type)},this.ue=new zs((t,e)=>{switch(e){case"initial":case"added":this.zf(t);break;case"removed":this.Gf(t);break}}),this.B=new ne((t,e)=>{(e==="initial"||e==="added")&&this.Lb(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&rt.isConnected(t)&&!x.isMaskedElement(t)&&!x.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.zf(document),this.ue.observe(),this.B.observe("video")}onStop(){this.Gf(document),this.ue.disconnect(),this.B.disconnect()}fh(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=it(t),o={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),jn(()=>this.produceEvent(o))}}Lb(t){for(let e of t)this.fh(e,"seeked"),s.isPlaying(e)&&this.fh(e,"play")}zf(t){for(let e of["play","pause","seeked"])pt({type:e,listener:this.$f,boundElement:t})}Gf(t){for(let e of["play","pause","seeked"])ft({type:e,listener:this.$f,boundElement:t})}}return s})();function by(s){return s.nodeName==="SELECT"}function po(s){return s.nodeName==="INPUT"}function Ty(s){return s.nodeName==="TEXTAREA"||po(s)&&!El(s)&&!Sl(s)}function El(s){return po(s)&&s.type==="number"}function Sl(s){return po(s)&&(s.type==="checkbox"||s.type==="radio")}var Ay=(()=>{class s extends Ee{constructor(t){super(),this.ot=t,this.gh=new Lp("low"),this.yr=e=>this.inputHandler(e),this.Ai=[],this.Vb(),this.Ub(),this.B=new ne(e=>{for(let i of e)this.mh(i)&&Ht(()=>{this.yh(i,it(i))},"low")}),this.ue=new zs((e,i)=>{switch(i){case"initial":case"added":pt({type:"change",listener:this.yr,boundElement:e});break;case"removed":ft({type:"change",boundElement:e,listener:this.yr});break}})}onStart(){pt({type:"keyup",boundElement:document,listener:this.yr}),pt({type:"change",boundElement:document,listener:this.yr}),K(this.Ai,t=>t.activate()),this.B.observe(csArray.prototype.join.call(s.jb,",")),this.ue.observe()}onStop(){ft({type:"keyup",boundElement:document,listener:this.yr}),ft({type:"change",boundElement:document,listener:this.yr}),K(this.Ai,t=>t.deactivate()),this.B.disconnect(),this.ue.disconnect(),this.gh.clear()}yh(t,e){var i,n,o;if(this.gh.has(t))return;if(this.gh.add(t),by(t)){let h={type:"InputEvent",inputType:"select",target:it(t),selectedIndex:t.selectedIndex,timestamp:O.now()};this.produceEvent(h);return}if(Sl(t)){let h={type:"InputEvent",inputType:"checkable",target:it(t),checked:t.checked,timestamp:O.now()};this.produceEvent(h);return}let c=Ty(t),l=El(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.ot)===null||n===void 0)&&n.shouldEncrypt(t)){(o=this.ot)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:O.now()});return}let m=l?"0":"\u2022",d={type:"InputEvent",inputType:"text",target:it(t),value:csString.prototype.replace.call(h,/\S/g,m),timestamp:O.now()};this.produceEvent(d)}}inputHandler(t){if(!this.isStarted)return;let e=Tt(t),i=it(e);!i||!this.mh(e)||rt.isConnected(e)&&Ht(()=>{this.yh(e,i)},"low")}Vb(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}Ub(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=hr(t.prototype,e,(o,c,l)=>{if(l!==c&&rt.isConnected(o)){let h=i?o.parentElement:o;this.Hb(h)}});n&&csArray.prototype.push.call(this.Ai,n)}mh(t){return!x.isMaskedElement(t)&&!x.isMaskedElementChild(t)&&(fr(t)||Gn(t)||zn(t))}Hb(t){if(this.isStarted&&rt.isConnected(t)){let e=it(t);e&&this.mh(t)&&Ht(()=>{this.yh(t,e)},"low")}}}return s.jb=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],Oe([ot()],s.prototype,"inputHandler",null),Oe([I()],s.prototype,"trackChanges",null),s})();var Ry=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.ti=[],this.nt=[],this.Bb=t}next(t){this.nt.length===this.Bb&&csArray.prototype.shift.call(this.nt),csArray.prototype.push.call(this.nt,t),this.nt.length===1&&csSetTimeout(()=>this.clear());for(let e of this.ti)e(t)}subscribe(t){if(he(this.ti,i=>t===i))return()=>{this.ti=csArray.prototype.filter.call(this.ti,i=>i!==t)};csArray.prototype.push.call(this.ti,t);for(let i of this.nt)t(i);return()=>{this.ti=csArray.prototype.filter.call(this.ti,i=>i!==t)}}clear(){this.nt=[]}hasObservers(){return this.ti.length>0}}return s})(),vl=(()=>{var s;class r{constructor(e){this.A=e}observe(){this.Fb=s.Mn.subscribe(e=>this.A(e)),s.ba||(s.ba=!0,s.Nn.observe(),ee(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.Ts.add(i),s.Mn.next(i)}))}disconnect(){s.ba&&(this.Fb(),s.Mn.hasObservers()||(s.ba=!1,s.Nn.disconnect(),s.Mn.clear(),s.Ts.clear()))}}return s=r,r.Ts=new Er,r.Mn=new Ry,r.$b=_s(t=>{Ht(()=>{for(let e of t)e.type==="childList"&&K(e.addedNodes,i=>{ee(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.Ts.has(o)||(s.Ts.add(o),s.Mn.next(o))})})})},"ElementObserver.findAllElements"),r.ba=!1,r.Nn=new ye(s.$b),tt([I()],r.prototype,"observe",null),tt([I()],r.prototype,"disconnect",null),r})(),Cy=(()=>{class s extends Ee{constructor(){super(),this._s=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.zb=ss("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)x.isMaskedElement(i)||x.isMaskedElementChild(i)||Zu(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=Sr(this.zb);this.kn=new vl(e=>t.push(e)),this.Zs=new Set}onStart(){this._s&&this.kn.observe()}onStop(){this.Zs.clear(),this.kn.disconnect()}async register(t){this.Zs.has(t)||(this.Zs.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return Oe([I()],s.prototype,"register",null),s})(),Ga=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static qf(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.Gb(t))}static Gb(t){let i=t.getEntriesByType("navigation")[0];i&&(this.Li=i,s.Er(i))}static Hr(t){this.qb(t),this.Li&&t(this.Li),this.Ue||this.Wb()}static qb(t){this.Mt.add(t)}static Yb(t){this.Mt.delete(t)}static Wb(){if(this.Dn||(this.Dn=this.qf()),!this.Dn){this.Li||(this.Li={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Er(this.Li);return}this.Dn.observe({type:"navigation",buffered:!0}),this.Ue=!0}static Er(t){this.Mt.forEach(e=>e(t))}static Fr(t){this.Yb(t),this.Mt.size===0&&this.xn()}static xn(){var t;this.Ue&&((t=this.Dn)===null||t===void 0||t.disconnect(),this.Ue=!1,this.Li=null,this.Dn=this.qf())}constructor(t){this.A=t}observe(){s.Hr(this.A)}disconnect(){s.Fr(this.A)}}return s.Ue=!1,s.Mt=new Set,s.Li=null,s})(),Iy=(()=>{class s extends Ee{constructor(){super(...arguments),this.Ta=null,this.Wf=new Ga(t=>{if(this.Ta)return;let e=this.Xb(t);e&&(this.Ta=e,this.produceEvent(e))})}onStart(){if(this.Ta){this.produceEvent(this.Ta);return}this.Wf.observe()}onStop(){this.Wf.disconnect()}Xb(t){let e=Ga.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:O.now()}}}return s})(),Py="touchstart",Oy="touchmove",Ny="touchend",_l=(()=>{class s{constructor(t){this.A=t}observe(){s.Yf&&s.Eh(this.A)}disconnect(){s.Yf&&s.Sh(this.A)}static Kb(t,e){csArray.prototype.forEach.call(is(s.Mt),i=>i(t,e))}static Eh(t){s.Mt.has(t)||(s.Mt.add(t),s.Mt.size===1&&(s.Ln.onGesture(s.Kb),csArray.prototype.forEach.call(s.Us,e=>pt(e))))}static Sh(t){s.Mt.delete(t),s.Mt.size===0&&csArray.prototype.forEach.call(s.Us,e=>ft(e))}static vh(t){if(s.Ln.isValidTouchEvent(t))switch(t.type){case"touchstart":s.Ln.processActionDown(t);break;case"touchmove":s.Ln.processActionMove();break;case"touchend":s.Ln.processActionUp(t);break}}}return s.Us=[{boundElement:Z.document,type:Py,listener:r=>s.vh(r)},{boundElement:Z.document,type:Oy,listener:r=>s.vh(r)},{boundElement:Z.document,type:Ny,listener:r=>s.vh(r)}],s.Yf=En.isGestureDetectionSupported(),s.Mt=new Set,s.Ln=new En,s})(),My=(()=>{class s extends Ee{constructor(){super(),this.Vn=new _l(this.Lc.bind(this))}onStart(){this.Vn.observe()}onStop(){this.Vn.disconnect()}Lc(t){let e=this.Jb(t);e&&this.produceEvent(e)}Jb(t){if(!this.Qb(t))return null;let e=Kp(t.target);return e?{type:"Gesture",targetId:e,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}Qb(t){return t.target!==null&&!(ct(t.target)&&x.isMaskedElementChild(t.target))}}return s})(),ky=(()=>{class s extends Ee{constructor(){super(...arguments),this.Xf=new fl(t=>this.Aa(t))}Aa({message:t,filename:e,lineno:i,colno:n}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||Zt(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:n})}onStart(){this.Xf.observe()}onStop(){this.Xf.disconnect()}}return s})(),Dy=(()=>{class s extends qs{constructor(t){super(),this.Zb=t,this.kl=1024,this.Dl=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=dt.truncate(t.message,this.kl,dt.ELLIPSIS),t.filename=dt.truncate(t.filename,this.Dl,dt.ELLIPSIS),this.Zb(t)}}return s})();var Ns=[],Nn=!1,wl=_s(Ly,"executeTasks");function xy(s){if(csArray.prototype.push.call(Ns,s),!Nn){for(let r=0;r<3;r++)csSetTimeout(wl);Nn=!0}}function Ly(){let s=csDate.now();for(let r=0;r<Ns.length;r++)if(Ns[r](),csDate.now()-s>=35){Ns=csArray.prototype.slice.call(Ns,r+1),csSetTimeout(wl);return}Ns=[],Nn=!1}var Ge=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),bl=(()=>{class s{constructor(){this.kt=new Si,this.Pt=Ge.Stopped,this.A=null,this.Jf=t=>{this.Pt===Ge.Stopped||!t||(this.A(t),this.Qf())}}get queueLength(){return this.kt.length}start(t){if(this.A)throw new Error("callback already set");this.Pt=Ge.Started,this.A=t}push(t){this.kt.push(t),this._h()}stop(){this.A=null,this.Pt=Ge.Stopped,this.kt.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(n,l),K(i,h=>h.subscribe(m=>l.push(m))),i=[c]}let o=new Vy(n);return K(i,c=>c.subscribe(l=>o.push(l))),o}Zf(){return this.Pt===Ge.Stopped}rs(){return this.Pt===Ge.Processing}Qf(){if(!this.Zf()){if(this.kt.isEmpty){this.Pt=Ge.Completed;return}this.Pt=Ge.Processing,xy(()=>{let t=this.kt.pop();t instanceof ho?t.complete(this.Jf):this.Jf(t)})}}_h(){this.Zf()||this.rs()||this.Qf()}}return s})(),Vy=(()=>{class s extends bl{constructor(t){super(),this.tg=t}get queueLength(){return csArray.prototype.reduce.call(this.tg,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),K(this.tg,t=>t.stop())}}return s})(),Uy=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.z=!1,this.Mt=[]}get pendingEvents(){var t,e;return(e=(t=this.kt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.z)throw new Error("Recording is already started.");let t=this.Mt;this.kt=bl.pipe(this.producers,this.processors),this.kt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),K(this.producers,e=>e.start()),K(this.processors,e=>e.start()),this.z=!0}stop(){this.kt.stop(),this.Mt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.z=!1,this.Mt=[]}subscribe(t){if(this.z)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Mt,t),()=>this.Mt=csArray.prototype.filter.call(this.Mt,e=>e!==t)}}return s})(),jy=(()=>{class s{constructor(t){this.Ra={},this.De=new ao(t)}save({key:t,metadata:e,events:i}){this.De.isThresholdReached()||(this.De.addString(t),typeof i=="string"?this.De.addString(i):this.De.addArrayBuffer(i),!this.De.isThresholdReached()&&(this.Ra[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.iT(),i=>{let n=this.Ra[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.rT(i))}),e.length!==0&&(t(e),this.De.reset())}iT(){return Object.keys(this.Ra)}rT(t){delete this.Ra[t]}}return s})(),qe=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),Hy=(()=>{class s{constructor(t,e,i){this.ir=t,this.nT=i,this.Vi=qe.NOT_STARTED,this.Ca=[],this.bh=0,this.oT=self.origin,this.ke=typeof window=="object"?"":"worker-",this.De=new ao(e),this.Ul()}async Ul(){await this.eg(),this.Vi===qe.READY?this.aT():this.nT(this.Ca)}aT(){csArray.prototype.forEach.call(this.Ca,t=>{this.save(t)}),this.Ca=[]}async save(t){try{if(this.Vi===qe.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Ca,t);return}if(this.Vi!==qe.READY||this.De.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.De.addString(e),typeof n=="string"?this.De.addString(n):this.De.addArrayBuffer(n),this.De.isThresholdReached())return;await this.re.put(`${this.oT}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.re&&(await this.eg(),this.Vi!==qe.READY)||this.cT(t)}async eg(){try{this.Vi=qe.OPEN_IN_PROGRESS,this.re=await self.caches.open(`${this.ke}${this.ir}`),this.Vi=qe.READY}catch{this.Vi=qe.OPEN_FAILED}}async cT(t){try{if(this.bh++,this.bh>1)return;let e=await this.re.keys();if(e.length===0)return;let i=await this.re.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((m,d)=>{l[d]=m}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(m=>({metadata:l,events:m})):c.arrayBuffer().then(m=>({metadata:l,events:m}))}),o=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.re.delete(c))),t(o),this.De.reset()}catch{}finally{this.bh--}}}return s})(),By=(()=>{class s{constructor(t){try{this.lT(t)}catch{this.Th()}}lT(t){self.caches?this.hT(t):this.Th()}save(t){this.Ia.save(t)}recover(t){this.Ia.recover(t)}hT(t){this.Ia=new Hy(t,s.sg,e=>{this.Th(e)})}Th(t){this.Ia=new jy(s.sg),t&&csArray.prototype.forEach.call(t,e=>{this.Ia.save(e)})}}return s.sg=1024*1024*16,s})(),Fy=(()=>{class s{constructor(t,e){this.S=t,this.R=e,this.Un=Qt.ETR_DISABLED,this.Pa=Qt.ETR_PENDING,this.Ah=!0}getEtrStatus(t){t===void 0&&(t=this.R.getSession());let e=t==null?void 0:t.etrStatus;return this.ig()&&e===Qt.ETR_SAVED_SESSION?e:this.Un}onEventTriggerRecording(t,e){switch(e){case ts.ETR_PAGE:this.rg(Qt.ETR_SAVED_PAGE);break;case ts.ETR_LEGACY:case ts.ETR_SESSION:this.rg(Qt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===V.RECORDING_TEMPORARILY?this.Ah=!0:this.Ah=!1,t===V.ANALYTICS_ONLY&&e===Gt.ETR_ON?this.ng(this.Pa):this.ng(Qt.ETR_DISABLED)}ng(t){this.Un=t,this.Pa=Qt.ETR_PENDING,this.og(t),this.S.emitRecordingContextChange()}rg(t){this.Ah?Number(t)>Number(this.Pa)&&(this.Pa=t):this.ig()&&Number(t)>Number(this.Un)&&(this.Un=t,this.og(t),this.S.emitRecordingContextChange())}og(t){let e=this.R.getSession();e!==null&&e.etrStatus===Qt.ETR_NOT_SAVED_SESSION&&t===Qt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.R.setSession(e))}ig(){return this.Un!==Qt.ETR_DISABLED}}return s})(),L=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var ei=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),$y=(()=>{class s{constructor(t=100){this.uT=t,this.Oa={},this.Hn=null,this.ch="original-resource-name"}onEvent(t){this.dT=t}processEvent(t){this.pT(t.resourceId,t.resource.hash,t.originalResourceName),this.fT(t)}flushEvents(){this.Hn&&csClearTimeout(this.Hn),this.ag()}onSendStaticResource(t){this.fT=t}ag(){if(!Object.keys(this.Oa).length)return;let t={type:L.RESOURCE_HASHES,date:O.now(),args:[this.Oa]};this.Hn=null,this.Oa={},this.dT(t)}pT(t,e,i){let n=e;i&&(n+=`?${this.ch}=${i}`),this.Oa[t]=n,!this.Hn&&(this.Hn=window.csSetTimeout(()=>this.ag(),this.uT))}}return s})();function zy(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:L.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:L.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:L.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:L.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:o,newValue:c}=s;r({type:L.MUTATION_ATTRIBUTE,date:e,args:[i,n,o,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:L.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:o}=s,c=Y(o)?[i,n,o]:[i,n];r({type:L.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:L.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:o}=s;r({type:L.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:L.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:L.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:o}=s;r({type:L.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:L.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:o}=s,c=Y(o)?[i,n,o]:[i,n];r({type:L.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:L.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:o}=s,c=[i,n,o];r({type:L.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,o=[i,n];r({type:L.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:H.error("translateDOMEvent: DOMEvent not supported");break}}function Gy(s){let r=qy(s.data);return{type:L.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function qy(s){let r={type:Wy(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function Wy(s){switch(s){case _t.DRAG:case _t.FLICK:return ei.SWIPE;case _t.LONG_PRESS:return ei.LONG_PRESS;case _t.TAP:return ei.TAP;case _t.PINCH_IN:return ei.PINCH_IN;case _t.PINCH_OUT:return ei.PINCH_OUT}}function Yy(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var Xy=20;function Ky(s){return Yy(r=>{let t={visibleInViewPort:r},e={type:L.TEXT_VISIBILITY,date:O.now(),args:[t]};s(e)},{batchSize:Xy,autoFlushDelay:1e3})}var Kr=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();function Jy(s){return{type:L.PERFORMANCE_TIMINGS,args:[{performanceTiming:Kr.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:Kr.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:Kr.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function Qy(s){switch(s.inputType){case"text":return{type:L.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:L.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:L.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var Zy=500,Jr=0;function tE(){return{processEvent(s,r){if(s.originalEvent.type===L.PERFORMANCE_RESOURCE_TIMING)return Jr>=Zy?null:(Jr+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){Jr=0}}}function eE(s){switch(s.videoEventType){case"play":return{type:L.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:L.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:L.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var sE=(()=>{class s{get pendingEvents(){return this.Na.pendingEvents}constructor(t,e,i,n,o){this.Na=t,this.S=e,this.xe=i,this.as=n,this.Rs=o,this.ne=()=>{},this.Ma=()=>{},this.cg=Ky(c=>this.ne(c))}start(){var t,e;this.lg=tE(),this.Na.subscribe(i=>{var n,o,c,l,h,m;let d=i,{timestamp:E}=d;switch(d.type){case"Legacy":{let g=d.eventType==="user"?(n=this.Ma)!==null&&n!==void 0?n:()=>{}:this.ne;this.lg.processEvent(d,g)}break;case"CustomElementRegistration":{this.ne({type:L.CUSTOM_ELEMENT_REGISTRATION,date:E,args:[d.tagName]});break}case"DomEvent":{zy(d,this.ne,this.S);break}case"InputEvent":{let g=Qy(d);(o=this.Ma)===null||o===void 0||o.call(this,g);break}case"encryptedCharacterDataChanged":{let{target:g,rawData:S,encryptedData:P,encryptionMetadata:N}=d;this.ne({type:L.MUTATION_ENCRYPTED_CHARACTER_DATA,date:E,args:[g,S,P,N]});break}case"StaticResource":{let{url:g}=d;this.ne({type:L.STATIC_RESOURCE_URL,date:E,args:[g]});break}case"ResizeMaskedElement":{let{target:g,width:S,height:P}=d;this.ne({type:L.MUTATION_ATTRIBUTE,date:E,args:[g,"","style",`width:${S}px !important;height:${P}px !important;`]});break}case"Gesture":{let g=Gy(i);(c=this.Ma)===null||c===void 0||c.call(this,g);break}case"TextVisibility":{this.cg.push(d.text);break}case"StaticResourceManagerEvent":{(l=this.xe)===null||l===void 0||l.processEvent(d);break}case"screenResize":{let{width:g,height:S}=d,P={type:L.SCREEN_RESIZE,date:E,args:[g,S]};this.ne(P);break}case"viewportResize":{let{width:g,height:S}=d,P={type:L.RESIZE,date:E,args:[g,S]};this.ne(P);break}case"PerformanceTiming":{this.ne(Jy(d));break}case"CustomError":{let g=(h=this.Rs)===null||h===void 0?void 0:h.translate(d);g&&this.ne(g);break}case"JSError":{let g=(m=this.as)===null||m===void 0?void 0:m.translate(d);g&&this.ne(g);break}case"VideoEvent":{let g=eE(d);g&&this.ne(g);break}case"warning":{H.warn(d.message);break}default:H.error(`WebRecorderEventTranslator: Event not supported (${d.type})`);break}}),this.S.emitInitialDomStart(),(t=this.as)===null||t===void 0||t.start(),(e=this.Rs)===null||e===void 0||e.start(),this.Na.start()}stop(){var t,e,i;this.reset(),this.flush(),this.Na.stop(),(t=this.xe)===null||t===void 0||t.flushEvents(),(e=this.as)===null||e===void 0||e.stop(),(i=this.Rs)===null||i===void 0||i.stop()}flush(){this.cg.flush()}onEvent(t,e){var i;this.ne=t,this.Ma=e,(i=this.xe)===null||i===void 0||i.onEvent(n=>this.ne(n))}reset(){this.lg.reset()}}return s})();var iE=(()=>{class s{constructor(t){this.ka=t,this.hn=20,this.Oi=0,this.V=!1}translate(t){if(this.Oi>=this.hn)return this.ka.stop(),null;this.Oi+=1;let{filename:e,message:i,lineno:n,colno:o,timestamp:c}=t;return{type:L.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:n,colno:o}]}}start(){this.V||(this.Oi=0,this.V=!0)}stop(){this.V=!1}}return s})(),rE=(()=>{class s extends Ee{constructor(t){super(),this.je=t}subscribe(t){return super.subscribe(t)}onStart(){K(this.je,t=>{t.onEvent(e=>{var i;return this.Sr(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),K(this.je,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){K(this.je,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Sr(t,e){this.produceEvent({timestamp:O.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),kt=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),nE=(()=>{class s{constructor(t,e,i=[]){this.Sr=t,this.Rh=e,this.gT=i,this.Da=null,this.Pt=kt.Active,this.nt=[]}reset(){this.Da=null,this.nt=[],this.Pt=kt.Active}disconnect(){this.Pt=kt.Stopped}mT(){this.Rh(kt.Paused),this.Pt=kt.Paused,csSetTimeout(()=>{this.Pt===kt.Paused&&this.Ch()},s.STOP_TIMEOUT)}yT(){this.Rh(kt.Active),this.Pt=kt.Active,K(this.nt,this.Sr),this.nt=[]}Ch(){this.nt=[],this.Rh(kt.Stopped),this.Pt=kt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.Da=t.date,this.Pt!==kt.Active)){this.yT(),this.Sr(t);return}if(this.ET(t)){this.Sr(t);return}switch(this.Pt){case kt.Active:if(this.ST(t,e)){this.mT(),csArray.prototype.push.call(this.nt,t);return}this.Sr(t);break;case kt.Paused:csArray.prototype.push.call(this.nt,t);break;case kt.Stopped:break}}ST(t,e){return!e.isUserEvent&&this.Da!==null&&t.date-this.Da>s.INACTIVITY_TIMEOUT}ET(t){return csArray.prototype.indexOf.call(this.gT,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),oE=2e3,aE=(()=>{class s extends Lt{constructor(t,e,i,n,o,c,l,h,m,d,E,g,S,P=[],N,v,_,M,k){super(),this.f=t,this.j=e,this.vT=i,this.W=n,this.R=o,this.fe=c,this.ut=l,this.pe=h,this.ot=m,this.Y=d,this.Dt=E,this.Rt=g,this.He=S,this.je=P,this.hg=N,this.Wt=v,this.vr=_,this.as=M,this.Rs=k,this.Ws=0,this.Fs=new Zc,this._r={allowFromQuotaService:!0,allowFromSerialization:!0},this.ug=vr(()=>{this.j.eventsCount()>0&&this.dg()},oE),this.Cs=T=>this.processBrowserEvent(T),this.Bn=T=>this.Nt(T),this.xa=0,this.Fn=0,this.Ge=new sl,this.Ih=!1,this.pg=50*1024,this.Ui=!1,this.$n=!1,this.Di=[],this.La=new nE(T=>this.J(T),T=>{switch(T){case kt.Active:this._T();break;case kt.Stopped:this.wT();break}},[L.RESOURCE_HASHES,L.TEXT_VISIBILITY,L.API_ERROR,L.JAVASCRIPT_ERROR]),this.fg=T=>{this.Dt.removeBatchInProgress(`${T.params.sn}.${T.params.pn}.${T.params.ri}`)}}init(){this.Ph(),this.Y.onLoad(this.fg),this.Y.onError(this.fg)}_T(){csArray.prototype.forEach.call(this.hg,t=>t.start())}wT(){csArray.prototype.forEach.call(this.hg,t=>t.stopForInactivity())}Ph(){var t,e,i;this.He.onEvent(this.Cs,this.Bn),(t=this.ot)===null||t===void 0||t.onInputNodeToEncrypt(this.Bn),(e=this.ot)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.gg(n)}),(i=this.ot)===null||i===void 0||i.onUserIdentifierToEncrypt(this.Cs),this.Ge.onEvent(n=>{if(csSetTimeout(()=>this.ji("page-state",n)),n!==te.Visible){if(n===te.Blur)return this.mg();if(!this.Ih)return this.Ih=!0,csSetTimeout(()=>{this.Ih=!1}),n===te.Hidden?this.mg():this.bT()}})}isRecording(){return this.R.hasValidSession()&&this.isStarted}mg(){if(!this.canSendEvents())return;this.He.flush(),this.Dt.saveBatchesInProgress(),K(this.je,c=>{var l,h;return K((h=(l=c.getPendingEvents)===null||l===void 0?void 0:l.call(c))!==null&&h!==void 0?h:[],m=>this.j.addEvent(m))});let t=this.j.getEvents();if(t.length===0)return;this.ji("pending-events",this.He.pendingEvents);let e=this.Y.getQueryParams();e.rst=this.getRecordingStartTimestamp(),this.Fn=t[t.length-1].date,e.let=this.getRecordingLastEventTimestamp();let i=this.j.getCurrentRequestIndex(),n=i.getCurrentIndex();e.ri=n.toString(),this.Rt.removeQueryParams(),this.Rt.setQueryParams(e);let o=this.j.stringifyEvents();if(o.length>this.pg){let c=this.yg();if(c.length>0){let l=ys(c);this.Rt.send(l)||this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}if(this.j.eventsCount()>0){e.ri=i.getCurrentIndex().toString();let l=this.j.stringifyEvents();this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}}else this.Rt.send(o)||this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:o}),i.increment();this.Rt.removeQueryParams(),this.j.clearEvents()}bT(){if(!this.canSendEvents())return;this.He.flush();let t=this.Y.getQueryParams();this.Dt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Rt.removeQueryParams(),K(this.je,n=>{var o,c;return K((c=(o=n.getPendingEvents)===null||o===void 0?void 0:o.call(n))!==null&&c!==void 0?c:[],l=>this.j.addEvent(l))});let e=this.j.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Rt.setQueryParams(t),this.Rt.send(),this.Rt.removeQueryParams();return}this.ji("pending-events",this.He.pendingEvents),this.Fn=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Rt.setQueryParams(t);let i=this.j.stringifyEvents();if(i.length>this.pg){let n=this.yg();if(n.length>0){let o=ys(n);this.Rt.send(o)||this.Dt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.Rt.removeQueryParams(),this.Rt.setQueryParams(t),this.Rt.send(),this.Rt.removeQueryParams();if(this.j.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.j.getCurrentRequestIndex(),c=o.getCurrentIndex();t.ri=c.toString();let l=this.j.stringifyEvents();this.Dt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:l}),o.increment()}}else this.Rt.send(i)||(this.Dt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.j.getCurrentRequestIndex().increment());this.Rt.removeQueryParams(),this.j.clearEvents()}blockSendingEventsFromQuotaService(){this._r.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this._r.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this._r.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this._r.allowFromSerialization=!0}canSendEvents(){return this._r.allowFromQuotaService&&this._r.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.fe&&this.as){(e=this.fe)===null||e===void 0||e.anonymize(t);let i=this.as.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:O.now(),type:"JSError"});i&&this.Cs(i)}}onIframeCustomError(t){if(this.Rs){let e=this.Rs.translate({...t,timestamp:O.now(),type:"CustomError"});e&&this.Cs(e)}}onIframeDetailedApiError(t){this.Eg(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Nt(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.W.isCurrentPageviewValid()&&this.La.pushEvent(t,{isUserEvent:!1})}Nt(t){this.W.refreshSession(),this.W.isSessionValid()&&this.La.pushEvent(t,{isUserEvent:!0})}J(t){mt.general.nbEvents.increase(),this.j.addEvent(t),this.j.isThresholdReached()?this.pushEvents():this.j.isFull()&&this.ug(),this.Sg(t)}Sg(t){this.f.emitDebugEvents&&this.Fs.emit("recordingEvent",{...t,typeName:L[t.type]})}onStart(){var t;this.ji("tag-version","15.136.1"),this.ji("page-state",document.visibilityState),this.La.reset(),this.Ge.start(),this.initStates(),this.He.start(),this.ut&&this.pe&&this.ut.subscribe(s.Ut,e=>this.Eg(e),{detailedEvent:!0}),this.f.emitDebugEvents&&this.Fs.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Di,e=>this.vg(e)),this.Di=[],this.Ui&&((t=this.Wt)===null||t===void 0||t.enableOnlineAssets(),this.Ui=!1)}onStop(){var t;this.Ge.stop(),this.ut&&this.ut.unsubscribe(s.Ut),this.He.stop(),this.La.disconnect(),(t=this.Wt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.He.flush(),this.ug.cancel(),this.pushEvents(),this.Y.removeQueryParams()}initStates(){this.xa=O.now(),this.j.getCurrentRequestIndex().reset(),this.Ws=0,this.Y.setQueryParams(this.vT.getRequestParameters())}pushEvents(){K(this.je,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.j.eventsCount()>0&&(this.isStarted?this.dg():this.j.clearEvents())}dg(){if(!this.canSendEvents())return;let t=this.j.getOrderedBatchSlots();for(let e of t){let i=e.batch.getEvents();if(!i.length)continue;this.Fn=i[i.length-1].date;let n=e.metadata.requestIndex,o=n.getCurrentIndex(),c=this.xa>this.Fn?i[0].date:this.xa;this.Y.setQueryParams({pn:csString(e.metadata.pageNumber),ri:o.toString(),rst:c.toString(),let:this.getRecordingLastEventTimestamp()});let l=this.Y.getQueryParams();this.Dt.addBatchInProgress(`${l.sn}.${l.pn}.${o}`,{...this.Y.getQueryParams()},i),this.Y.send(i),n.increment(),e.batch.clearEvents(),this._g&&this._g()}this.j.clearEmptyBatchSlots()}addInitialDom(t){this.j.addEventByTimestamp(t),this.Sg(t)}Eg(t){if(this.vr&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.vr.truncate(t),this.ot){this.ot.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.gg(t)}gg(t){if(this.Ws<s.TT){let e={type:L.API_ERROR,date:O.now(),args:[this.pe.anonymize(t)]};this.Cs(e),this.Ws=this.Ws+1,G.counters.networkRequests.count("collected")}}AT(t){t===ts.ETR_SESSION?this.Y.setQueryParams({[s.RT]:s.wg}):t===ts.ETR_PAGE&&this.Y.setQueryParams({[s.CT]:s.wg})}clearEvents(){this.j.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.as)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:O.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.Cs(i)}onCustomErrorEvent(t){var e;let i=(e=this.Rs)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:O.now(),message:t.message,attributes:t.attributes});i&&this.Cs(i)}onPageEvent(t){this.bg(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:O.now(),keyId:this.f.encryptionPublicKeyId};(e=this.ot)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.vg({eventName:t,eventType:e}):csArray.prototype.push.call(this.Di,{eventName:t,eventType:e})}vg(t){this.AT(t.eventType),this.bg(t.eventName),this.pushEvents()}bg(t){let e={type:L.PAGE_EVENT,date:O.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.IT)}]};this.j.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:O.now(),type:L.UNANONYMIZED_CONSENT_GRANTED};this.j.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:O.now(),type:L.UNANONYMIZED_CONSENT_WITHDRAWN};this.j.addEvent(t)}triggerRecordingForSessionGranted(){this.ji("consent-granted")}triggerRecordingForSessionWithdrawn(){this.ji("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.$n=!0}getStaticResourceManagerStatus(){return this.Wt?{isStarted:this.f.useStaticResourceManager&&On.isSupported(),onlineAssets:{activated:this.Wt.isOnlineAssetsActivated(),enabledOnNextPageview:this.$n}}:null}resetOnlineAssetsOnPageview(){this.Ui=!1,this.$n=!1}updateOnlineAssetsOnPageview(){this.Wt&&this.$n&&(this.Ui=!0,this.$n=!1)}onRecordingRequestSent(t){this._g=t}getRecordingStartTimestamp(){return this.xa.toString()}getRecordingLastEventTimestamp(){return this.Fn.toString()}onOptOut(){K(this.je,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}ji(t,e){if(!this.f.emitRecordInfoEvents)return;let i={date:O.now(),type:L.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.j.addEvent(i)}yg(){return this.j.extractEvents(L.API_ERROR,L.JAVASCRIPT_ERROR,L.CUSTOM_ERROR,L.TEXT_VISIBILITY,L.POINTER_DOWN)}}return s.Ut="RecordingService",s.IT=255,s.TT=20,s.CT="etrp",s.RT="etrs",s.wg="1",j([At("addInitialDom")],s.prototype,"addInitialDom",null),s})(),cE=(()=>{class s extends Lt{constructor(t,e,i){super(),this.Qt=t,this.Rt=e,this.Y=i,this.Oh=!1,this.zn={},this.PT=n=>{if(n.length!==0)for(let o of n){let{metadata:c,events:l}=o;this.OT(c.rt)&&this.Y.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.zn={}}onStop(){}recover(){this.Qt.recover(this.PT)}addBatchInProgress(t,e,i){this.zn[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.zn[t]}blockSendingLastMessage(){this.Oh=!1}allowSendingLastMessage(){this.Oh=!0}sendLastMessageBeacon(){if(this.Oh){let{ri:t,rst:e,let:i,...n}=this.Y.getQueryParams();n.hlm="true",this.Rt.setQueryParams(n),this.Rt.send()}}OT(t){return!!t&&csString.prototype.indexOf.call(t,V.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.zn),t=>{let{metadata:e,events:i}=this.zn[t];this.Qt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Qt.save(t)}}return j([I("RecordingRecovery")],s.prototype,"recover",null),s})(),lE=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),hE=8*1024*1024,uE=(()=>{class s extends Lt{constructor(t,e,i){super(),this.xe=t,this.Tg=e,this.Et=i,this.Nh={},this.Ag=new Set,this.rs=!1}initState(){fc()&&(this.Ve=this.Et.getRequestParameters(),this.NT=`${this.Tg}/exist?${fi.toQuery(this.Ve)}`,this.MT=`${this.Tg}/putTag?${fi.toQuery(this.Ve)}`,this.Rg=Vs(async()=>{if(this.rs){this.Rg();return}this.rs=!0;try{await this.kT()}finally{this.rs=!1}},300),this.xe.onSendStaticResource(t=>{this.Cg(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.Cg(t)}Cg(t){this.Ig(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.Ig(e.hash,e.data)})}Ig(t,e){this.Ag.has(t)||(this.Ag.add(t),this.Nh[t]=e,this.Rg())}async kT(){let t=this.Nh;this.Nh={};let e=await this.DT(t);if(!e.length)return;let i=this.xT(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.MT,{method:"POST",body:n})))}async LT(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Ve.pid,filter:lE.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.NT,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async DT(t){let e=[],i=await this.LT(t);return csArray.prototype.forEach.call(i,n=>{let o=t[n];o?csArray.prototype.push.call(e,{hash:n,data:o}):H.warn("SRM: received unknown hash: "+n)}),e}xT(t){let e=0,i=[new FormData];for(let n of t){let{data:o,hash:c}=n,l=i.length-1;if(e=e+o.size,e<hE)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})();function Ut(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var dE=(()=>{class s{constructor(t,e){this.Ot=t,this.N=e,this.Us=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.L=t}start(){this.Ei(),this.triggerInitialEvents()}stop(){this.Si()}Ei(){csArray.prototype.forEach.call(this.Us,t=>pt(t))}Si(){csArray.prototype.forEach.call(this.Us,t=>ft(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:L.HASH_CHANGE,args:[this.N.anonymizePII(this.Ot.href)],date:O.now()};this.L(t)}visibilityChangeListener(){let t={type:L.VISIBILITY_CHANGE,args:[document.visibilityState],date:O.now()};this.L(t)}}return j([I("hashChange")],s.prototype,"hashChangeListener",null),j([I("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})();function pE(s){if(!R(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var fE=!!window.chrome,gE=33,mE=(()=>{class s{constructor(){this.eventType="user",this.kh=[],this.zT=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.GT=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.Ua=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.Dh=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=pE(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.Dh,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.ue=new zs((e,i)=>{switch(i){case"initial":case"added":this.Ei(e);break;case"removed":this.Si(e);break}})}init(){this.qT(),this.WT(),this.Qc()}onEvent(t){csArray.prototype.push.call(this.kh,t)}oe(t,e=!1){csArray.prototype.forEach.call(this.kh,i=>i(t,e))}start(){this.hh(),this.Ei(document),this.ue.observe()}stop(){this.Si(document),this.ue.disconnect(),this.kh=[]}WT(){this.YT()&&csArray.prototype.push.call(this.Ua,...this.zT)}qT(){this.XT()&&csArray.prototype.push.call(this.Ua,...this.GT)}Ei(t){nr(t)?csArray.prototype.forEach.call(this.Ua,e=>pt(e)):csArray.prototype.forEach.call(this.Dh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};pt(i)})}Si(t){nr(t)?csArray.prototype.forEach.call(this.Ua,e=>ft(e)):csArray.prototype.forEach.call(this.Dh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};ft(i)})}YT(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}XT(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}hh(){this.KT()}KT(){let t=Ds.getScrollContainer()||document,e=it(t),i=this.Pg(t);if(i.top!==0||i.left!==0){let n={type:L.SCROLL,args:[e,i.left,i.top],date:O.now()};this.oe(n,!0)}}Pg(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(x.isMaskedElement(t)||x.isMaskedElementChild(t))return;let e=it(t),i=this.Pg(t),n={type:L.SCROLL,args:[e,i.left,i.top],date:O.now()};this.oe(n)}mouseOverListener(t){if(x.isMaskedElementChild(t.target))return;let e=it(t.target),i={type:L.MOUSE_OVER,args:[e],date:O.now()};this.oe(i)}clickListener(t){let e=Tt(t);if(x.isMaskedElementChild(e))return;let i=it(e),n={type:L.CLICK,args:[i],date:O.now()};this.oe(n)}keyUpListener(t){let e=Tt(t);if(x.isMaskedElementChild(e))return;let i=it(e),n=this.U[t.key];if(n===void 0)return;let o={type:L.KEY_UP,args:[i,n],date:O.now()};this.oe(o)}keyDownListener(t){let e=Tt(t);if(x.isMaskedElementChild(e))return;let i=it(e),n=this.U[t.key];if(n===void 0)return;let o={type:L.KEY_DOWN,args:[i,n],date:O.now()};this.oe(o)}copyListener(t){let e=Tt(t);if(x.isMaskedElementChild(e))return;let i=it(e),n={type:L.CLIPBOARD_COMMAND,args:[i,xs.COPY],date:O.now()};this.oe(n)}cutListener(t){let e=Tt(t);if(x.isMaskedElementChild(e))return;let i=it(e),n={type:L.CLIPBOARD_COMMAND,args:[i,xs.CUT],date:O.now()};this.oe(n)}pasteListener(t){let e=Tt(t);if(x.isMaskedElementChild(e))return;let i=it(e),n={type:L.CLIPBOARD_COMMAND,args:[i,xs.PASTE],date:O.now()};this.oe(n)}pointerUpListener(t){let e=Tt(t);if(x.isMaskedElementChild(e))return;let i=it(e),n={type:L.POINTER_UP,args:[t.pointerId,t.pointerType,Ut(t.clientX,1),Ut(t.clientY,1),i,t.button],date:O.now()};this.oe(n)}pointerMoveListener(t){let e={type:L.POINTER_MOVE,args:[t.pointerId,t.pointerType,Ut(t.clientX,1),Ut(t.clientY,1)],date:O.now()};this.oe(e)}pointerDownListener(t){let e=Tt(t);if(x.isMaskedElementChild(e))return;let i=it(e),n={type:L.POINTER_DOWN,args:[t.pointerId,t.pointerType,Ut(t.clientX,1),Ut(t.clientY,1),i,t.button,{pageX:Ut(t.pageX,1),pageY:Ut(t.pageY,1)}],date:O.now()};this.oe(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:L.TOUCH_START,args:[n.identifier,Ut(n.clientX,1),Ut(n.clientY,1)],date:O.now()};this.oe(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:L.TOUCH_MOVE,args:[n.identifier,Ut(n.clientX,1),Ut(n.clientY,1)],date:O.now()};this.oe(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:t.type==="touchend"?L.TOUCH_END:L.TOUCH_CANCEL,args:[n.identifier,Ut(n.clientX,1),Ut(n.clientY,1)],date:O.now()};this.oe(o)}}Qc(){this.U={},this.U[" "]=q.SPACE,this.U.Spacebar=q.SPACE,this.U.Backspace=q.BACKSPACE,this.U.Enter=q.ENTER,this.U.Delete=q.DELETE,this.U.ArrowUp=q.ARROWUP,this.U.ArrowDown=q.ARROWDOWN,this.U.ArrowLeft=q.ARROWLEFT,this.U.ArrowRight=q.ARROWRIGHT,this.U.Up=q.ARROWUP,this.U.Down=q.ARROWDOWN,this.U.Left=q.ARROWLEFT,this.U.Right=q.ARROWRIGHT,this.U.CapsLock=q.CAPSLOCK,this.U.Shift=q.SHIFT,this.U.Tab=q.TAB,this.U.Escape=q.ESCAPE,this.U.Esc=q.ESCAPE,this.U.End=q.END,this.U.Alt=q.ALT,this.U.Control=q.CTRL,this.U.Meta=q.META}}return j([At("RecordingPageEvents.start")],s.prototype,"start",null),j([I("scroll")],s.prototype,"scrollListener",null),j([I("mouseOver"),ot(),cf()],s.prototype,"mouseOverListener",null),j([I("click"),ot()],s.prototype,"clickListener",null),j([I("Event handler type: keyup")],s.prototype,"keyUpListener",null),j([I("Event handler type: keydown")],s.prototype,"keyDownListener",null),j([I("Event handler type: copy")],s.prototype,"copyListener",null),j([I("Event handler type: cut")],s.prototype,"cutListener",null),j([I("Event handler type: paste")],s.prototype,"pasteListener",null),j([I("Event handler type: pointerup"),ot()],s.prototype,"pointerUpListener",null),j([I("Event handler type: pointermove"),ot(),_r({wait:gE})],s.prototype,"pointerMoveListener",null),j([I("Event handler type: pointerdown"),ot()],s.prototype,"pointerDownListener",null),j([I("Event handler type: touchstart"),ot()],s.prototype,"touchStartListener",null),j([I("Event handler type: touchmove"),ot()],s.prototype,"touchMoveListener",null),j([I("Event handler type: touchend-cancel"),ot()],s.prototype,"touchEndCancelListener",null),s})(),yE=(()=>{class s{constructor(){}onScannedAsset(t){this.ja=t}scanCssString(t){this.xh(li(t))}scanElement(t,e){x.getMaskedElementDetails(t).state!==x.MaskedElementState.NotMasked||e&&x.isMaskedAttribute(t,e)||(pr(t)?this.JT(t):$n(t)?this.QT(t,e):(this.ZT(t,e),this.tA(t,e),this.eA(t,e)))}QT(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:Xc(t)};this.ja({type:"stylesheet",asset:o})}}JT(t){var e;let i=new Set;if(t.textContent)for(let o of li(t.textContent))i.add(o);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||H.error(o.message)}if(n)for(let o=0;o<n.length;o++){let c=n.item(o).cssText;for(let l of li(c))i.add(l)}this.xh(is(i))}Lh(t){return!this.sA(t)&&!Zt(t)&&!Rd(t)}ZT(t,e){if($u(t)||Fu(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.Lh(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.ja({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.iA(t.srcset)}}tA(t,e){if(t.nodeType!==1){at.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}iA(t){this.xh(uo(t))}eA(t,e){if((Wu(t)||Yu(t)||Xu(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.Lh(i)){let n={assetId:de(i),assetRawPath:i,assetBasePath:window.location.href};this.ja({type:"asset",asset:n})}}}xh(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.Lh(e)),e=>({rawUrl:e,absoluteUrl:de(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.ja({type:"asset",asset:i})})}sA(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),EE=30,SE=0,Tl=(()=>{class s{constructor(t,e=EE,i=SE){this.rA=t,this.nA=e,this.oA=i,this.We=new Si,this.Fe=!1,this.Vh=0,this.Og=()=>{for(this.Vh=0;this.We.length;){if(this.Vh>=this.nA){csSetTimeout(this.Og,this.oA);return}let n=O.elapsed(),o=this.We.pop();if(!o)break;this.runTask(o);let c=O.elapsed()-n;this.Vh+=c}this.Fe=!1}}schedule(t,e=!1){if(!this.rA||e){t();return}mt.general.pendingTasks.increase(),this.We.push(t),this.aA()}aA(){this.Fe||(this.Fe=!0,csSetTimeout(()=>{this.Og()}))}runTask(t){mt.general.pendingTasks.decrease(),t()}runPendingTasks(){this.We.forEach(t=>{this.runTask(t)}),this.We.clear()}clearQueue(){mt.general.pendingTasks.clear(),mt.mutations.pendingMutations.clear(),this.We.clear()}isEmpty(){return this.We.length===0}}return j([I("TaskScheduler"),At("runTask")],s.prototype,"runTask",null),j([At("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),vE=(()=>{class s{constructor(){this.z=!1,this.Ng=new lo(t=>t.type==="cssRuleInserted"&&this.cA(t)),this.lA=Sr(t=>{this.z&&t.length>0&&this.C.schedule(()=>K(t,e=>this.Wn.scanElement(e)))}),this.hA=({type:t,asset:e})=>{var i,n,o;t==="stylesheet"&&((i=this.uA)===null||i===void 0||i.call(this,e)),(n=this.dA)===null||n===void 0||n.call(this,e);let c={date:O.now(),type:L.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.L)===null||o===void 0||o.call(this,c)},this.C=new Tl(!0,30,0),this.kn=new vl(t=>this.pA(t)),this.D=new ye(t=>this.Ao(t)),this.Wn=new yE,this.Wn.onScannedAsset(this.hA)}onEvent(t){this.L=t}onAsset(t){this.dA=t}onStyleSheetFound(t){this.uA=t}start(){this.z||(this.z=!0,this.Ng.observe(),this.kn.observe(),this.D.observe())}stop(){this.z&&(this.Ng.disconnect(),this.kn.disconnect(),this.D.disconnect(),this.z=!1)}cA(t){!t.rule||!this.z||this.Wn.scanCssString(t.rule)}pA(t){this.z&&x.getMaskedElementDetails(t).state===x.MaskedElementState.NotMasked&&this.lA.push(t)}Ao(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.Wn.scanElement(e.target,e.attributeName);break;case"characterData":this.fA(e.target);break;case"childList":}})}fA(t){rr(t)&&csNodeparentNode.apply(t)&&pr(csNodeparentNode.apply(t))&&this.Wn.scanCssString(t.data)}}return s})(),Al=2*1e3*1024,_E=200,qa=(()=>{class s{constructor(t=Al){this.Vt=[],this.Uh=new ao(t)}addEvent(t){this.Uh.addString(ys(t)),csArray.prototype.push.call(this.Vt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Vt.length&&!(this.Vt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Vt,e,0,t)}eventsCount(){return this.Vt.length}clearEvents(){this.Uh.reset(),this.Vt=[]}isFull(){return this.eventsCount()>=_E}isThresholdReached(){return this.Uh.isThresholdReached()}getEvents(){return this.Vt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Vt,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Vt=i,e}stringifyEvents(){return ys(this.Vt)}nI(t){t.type===L.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return j([At("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})();function wE(s){if(typeof Object.values=="function")return Object.values(s);let r=[];for(let t in s)s.hasOwnProperty(t)&&csArray.prototype.push.call(r,s[t]);return r}var Wa=(()=>{class s{constructor(){this.Ha=1}getCurrentIndex(){return this.Ha}increment(){this.Ha+=1}reset(){this.Ha=1}getRequestParameters(){return{ri:`${this.Ha}`}}}return s})(),bE=3,TE=(()=>{class s{constructor(t,e=Al,i=bE){this.gA=t,this.Mg=e,this.jh=i,this.Ba={}}addEvent(t){this.kg().addEvent(t)}addEventByTimestamp(t){this.kg().addEventByTimestamp(t)}eventsCount(){return csArray.prototype.reduce.call(this.Hi(),(t,e)=>t+e.batch.eventsCount(),0)}isFull(){return csArray.prototype.some.call(this.Hi(),t=>t.batch.isFull())}isThresholdReached(){let t=this.Hi();return t.length>=this.jh||csArray.prototype.some.call(t,e=>e.batch.isThresholdReached())}getEvents(){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(t,e)=>csArray.prototype.concat.call(t,e.batch.getEvents()),[])}extractEvents(...t){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(e,i)=>csArray.prototype.concat.call(e,i.batch.extractEvents(...t)),[])}stringifyEvents(){return ys(this.getEvents())}clearEvents(){csArray.prototype.forEach.call(this.Hi(),t=>t.batch.clearEvents())}clearEmptyBatchSlots(){let t=this.getOrderedBatchSlots();for(let e=0;e<t.length-1;e++)t[e].batch.eventsCount()===0&&delete this.Ba[t[e].metadata.pageNumber]}Hi(){return wE(this.Ba)}getOrderedBatchSlots(){return csArray.prototype.sort.call(this.Hi(),AE)}Dg(){let t=this.gA();if(t<=0)return H.error("RecordingBatchGroup: getCurrentPn() <= 0"),{batch:new qa(this.Mg),metadata:{pageNumber:0,requestIndex:new Wa}};let e=this.Ba[t];if(e)return e;let i={batch:new qa(this.Mg),metadata:{pageNumber:t,requestIndex:new Wa}};return this.Ba[t]=i,this.Hi().length>this.jh&&H.warn(`RecordingBatchGroup: max number of slots overflowed(${this.Hi().length}/${this.jh})`),i}kg(){return this.Dg().batch}getCurrentRequestIndex(){return this.Dg().metadata.requestIndex}}return s})();function AE(s,r){return s.metadata.pageNumber-r.metadata.pageNumber}var RE="csPersisted",Ya="v2/recording",CE=["isRecording"],Rl=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],IE=["replay:resourceManager:getStatus","cssrm:getStatus"],PE=(()=>{class s{constructor(t,e,i,n,o,c,l,h,m,d,E,g,S,P,N,v,_,M,k,T,B,st){this.js=t,this.R=e,this.f=i,this.Ve=n,this.E=o,this.N=c,this.W=l,this.he=h,this.fe=m,this.ut=d,this.pe=E,this.pt=g,this.S=S,this.Ys=P,this.xg=N,this.ie=v,this.zt=_,this.tt=M,this.vr=k,this.it=T,this.oI=B,this.ot=st}init(){var t,e;let i=[],n=[];csArray.prototype.push.call(n,new cy),this.Yn=new ly(this.it.shouldUseAnonymization(),this.f.whitelistedAttributes,this.N,this.f.anonymizeDigits),this.Bi();let o=new By(RE);this.mA(o),this.j=new TE(()=>{var M;return((M=this.R.getSession())===null||M===void 0?void 0:M.pageNumber)||0});let c=new vE;csArray.prototype.push.call(i,c),this.f.useStaticResourceManager&&On.isSupported()&&(this.Wt=new On,this.xe=new $y,this.Lg=new uE(this.xe,this.f.getStaticResourceManagerUri(),this.Ve),this.xg.addListener(this.Lg),csArray.prototype.push.call(n,this.Wt));let l=new mi(this.Ve,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")})}),h=new il(`${this.f.getRecordingUri()}/${Ya}`);csArray.prototype.push.call(n,this.Yn),csArray.prototype.push.call(n,new my(this.tt)),csArray.prototype.push.call(n,new yy),this.Fi=new mE,this.Fi.init(),csArray.prototype.push.call(i,this.Fi),this.Dt=new cE(o,h,this.Y),csArray.prototype.push.call(i,new dE(window.location,this.N));let m=new ay,d=new vy,E=new wy,g=new Ay(this.ot),S=new Cy,P=[d,this.he,m,new rE(csArray.prototype.filter.call(i,M=>M)),S,new Iy,new My,g,E];this.f.jsErrorsEnabled&&(this.ka=new ky,this.EA=new Dy(M=>this.fe.anonymize(M)),this.as=new iE(this.ka),csArray.prototype.push.call(P,this.ka),csArray.prototype.push.call(n,this.EA));let N=new Uy(P,n),v=new sE(N,this.S,this.xe,this.as,this.Rs),_=[m,d,E,g,S];this.recordingService=new aE(this.f,this.j,l,this.W,this.R,this.fe,this.ut,this.pe,this.ot,this.Y,this.Dt,h,v,i,_,this.Wt,this.vr,this.as,this.Rs),this.Ys.addListener(this.recordingService),this.xg.addListener(this.recordingService),this.recordingService.init(),this.E.register(CE,()=>this.R.isReplayRecorded()&&!this.ie.isUrlExcludedForSessionReplay()),this.E.register(Rl,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.S.emitRecordingContextChange()}),this.E.register(IE,()=>this.recordingService.getStaticResourceManagerStatus()),this.Xn=new Fy(this.S,this.R),this.Ys.addListener(this.Xn),this.js.enableRecordingContext(this.recordingService,this.R,this.Xn),this.Hh()}onAfterNaturalPageView(){var t;this.ie.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Lg)===null||t===void 0||t.initState()}onStartTracking(){this.Dt.recover(),this.Bi(),this.R.isReplayRecorded()&&!this.ie.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Bh())}onArtificialPageViewEnd(){this.R.isReplayRecorded()&&!this.ie.isUrlExcludedForSessionReplay()&&!this.R.isTemporarilyRecorded()&&this.Dt.sendLastMessageBeacon(),this.recordingService.clearStates()}onAfterArtificialPageView(){this.Bi(),this.R.isReplayRecorded()&&!this.ie.isUrlExcludedForSessionReplay()?(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.SA()):(this.recordingService.resetOnlineAssetsOnPageview(),this.wr())}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.wr()}onOptout(){this.wr(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.Bi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.S.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.Bi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.S.emitRecordingContextChange()}onCollectStateChange(t,e){t===V.QUOTA_REACHED||t===V.ANALYTICS_ONLY&&e===Gt.ETR_OFF?(this.recordingService.clearEvents(),this.wr()):(this.Y.setQueryParams({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.Xn.onCollectStateChange(t,e))}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Dt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Dt.allowSendingLastMessage(),this.Fi.start(),this.recordingService.pushEvents(),G.counters.longTasks.count>0&&G.counters.longTasks.flush(),G.counters.tasks.count>0&&G.counters.tasks.flush()}onAfterReplayRecordingConsentGranted(){this.R.isReplayRecorded()&&!this.ie.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Bh(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.wr())}Hh(){var t,e,i,n;if(!((e=(t=this.f.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let o=(n=(i=this.f.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||n===void 0?void 0:n.filterByHostSelector;K(o,c=>{Nt(c)&&ye.setShadowRootFilter(l=>{try{return qt.call(l.host,c)}catch{return!1}})})}}Bh(){this.recordingService.start(),this.Dt.start(),this.S.emitRecordingContextChange()}wr(){Xp(),this.recordingService.stop(),this.Dt.stop(),this.S.emitRecordingContextChange()}SA(){this.wr(),this.Bh()}mA(t){let e="byteArray";this.Y=this.zt.create(`${this.f.getRecordingUri()}/${Ya}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}Bi(){var t;let e=this.it.shouldUseAnonymization();this.Yn.setAnonymization(e),(t=this.yA)===null||t===void 0||t.setAnonymization(e)}}return j([At("Recording.onStartTracking")],s.prototype,"onStartTracking",null),j([At("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),OE=(()=>{class s{constructor(t,e){this.le=t,this.f=e,this.Vg=!1}enableRecordingContext(t,e,i){this.Vg=!0,this.fr=t,this.R=e,this.Xn=i}getRecordingContext(){var t,e,i;if(!this.Vg)return{isRecording:!1,recordingStartTimestamp:0,etrState:Gt.ETR_OFF,etrStatus:Qt.ETR_DISABLED,collectState:V.ANALYTICS_ONLY};let n=this.R.getSession();return{isRecording:this.fr.isRecording(),useAnonymization:this.le.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.fr.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.fr.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.fr.getRecordingStartTimestamp(),10),etrState:this.f.malkaEtrEnabled?Gt.ETR_ON:Gt.ETR_OFF,etrStatus:this.Xn.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:V.ANALYTICS_ONLY}}}return s})(),yi=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})(),NE=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),ME=(()=>{class s{constructor(){}static init(t){(!this.Fh||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Fh=new Map,i){let n=csString.prototype.split.call(i,".");for(let o=0;o<n.length;o++){let[c,l]=csString.prototype.split.call(n[o],"=");this.Fh.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Fh)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(NE.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=n.value;kE(s.getString("debugLog"),t)&&(n.value=function(...m){return console.log(l,...m),h.bind(this)(...m)})}}}return s})();function kE(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}function Xa(){function i(a){let p=a.length;for(;--p>=0;)a[p]=0}let n=0,o=1,c=2,l=3,h=258,m=29,d=256,E=d+1+m,g=30,S=19,P=2*E+1,N=15,v=16,_=7,M=256,k=16,T=17,B=18,st=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),lt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Vt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Rt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),b=512,D=new Array((E+2)*2);i(D);let U=new Array(g*2);i(U);let F=new Array(b);i(F);let ht=new Array(h-l+1);i(ht);let Dt=new Array(m);i(Dt);let Bt=new Array(g);i(Bt);function Ne(a,p,f,y,u){this.static_tree=a,this.extra_bits=p,this.extra_base=f,this.elems=y,this.max_length=u,this.has_stree=a&&a.length}let bs,Ft,Yt;function Se(a,p){this.dyn_tree=a,this.max_code=0,this.stat_desc=p}let Pi=a=>a<256?F[a]:F[256+(a>>>7)],rs=(a,p)=>{a.pending_buf[a.pending++]=p&255,a.pending_buf[a.pending++]=p>>>8&255},Mt=(a,p,f)=>{a.bi_valid>v-f?(a.bi_buf|=p<<a.bi_valid&65535,rs(a,a.bi_buf),a.bi_buf=p>>v-a.bi_valid,a.bi_valid+=f-v):(a.bi_buf|=p<<a.bi_valid&65535,a.bi_valid+=f)},Xt=(a,p,f)=>{Mt(a,f[p*2],f[p*2+1])},Ws=(a,p)=>{let f=0;do f|=a&1,a>>>=1,f<<=1;while(--p>0);return f>>>1},wo=a=>{a.bi_valid===16?(rs(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},bo=(a,p)=>{let f=p.dyn_tree,y=p.max_code,u=p.stat_desc.static_tree,A=p.stat_desc.has_stree,w=p.stat_desc.extra_bits,C=p.stat_desc.extra_base,Q=p.stat_desc.max_length,$,$t,He,nt,ls,Rs,ji=0;for(nt=0;nt<=N;nt++)a.bl_count[nt]=0;for(f[a.heap[a.heap_max]*2+1]=0,$=a.heap_max+1;$<P;$++)$t=a.heap[$],nt=f[f[$t*2+1]*2+1]+1,nt>Q&&(nt=Q,ji++),f[$t*2+1]=nt,!($t>y)&&(a.bl_count[nt]++,ls=0,$t>=C&&(ls=w[$t-C]),Rs=f[$t*2],a.opt_len+=Rs*(nt+ls),A&&(a.static_len+=Rs*(u[$t*2+1]+ls)));if(ji!==0){do{for(nt=Q-1;a.bl_count[nt]===0;)nt--;a.bl_count[nt]--,a.bl_count[nt+1]+=2,a.bl_count[Q]--,ji-=2}while(ji>0);for(nt=Q;nt!==0;nt--)for($t=a.bl_count[nt];$t!==0;)He=a.heap[--$],!(He>y)&&(f[He*2+1]!==nt&&(a.opt_len+=(nt-f[He*2+1])*f[He*2],f[He*2+1]=nt),$t--)}},Tr=(a,p,f)=>{let y=new Array(N+1),u=0,A,w;for(A=1;A<=N;A++)y[A]=u=u+f[A-1]<<1;for(w=0;w<=p;w++){let C=a[w*2+1];C!==0&&(a[w*2]=Ws(y[C]++,C))}},To=()=>{let a,p,f,y,u,A=new Array(N+1);for(f=0,y=0;y<m-1;y++)for(Dt[y]=f,a=0;a<1<<st[y];a++)ht[f++]=y;for(ht[f-1]=y,u=0,y=0;y<16;y++)for(Bt[y]=u,a=0;a<1<<lt[y];a++)F[u++]=y;for(u>>=7;y<g;y++)for(Bt[y]=u<<7,a=0;a<1<<lt[y]-7;a++)F[256+u++]=y;for(p=0;p<=N;p++)A[p]=0;for(a=0;a<=143;)D[a*2+1]=8,a++,A[8]++;for(;a<=255;)D[a*2+1]=9,a++,A[9]++;for(;a<=279;)D[a*2+1]=7,a++,A[7]++;for(;a<=287;)D[a*2+1]=8,a++,A[8]++;for(Tr(D,E+1,A),a=0;a<g;a++)U[a*2+1]=5,U[a*2]=Ws(a,5);bs=new Ne(D,st,d+1,E,N),Ft=new Ne(U,lt,0,g,N),Yt=new Ne(new Array(0),Vt,0,S,_)},Ao=a=>{let p;for(p=0;p<E;p++)a.dyn_ltree[p*2]=0;for(p=0;p<g;p++)a.dyn_dtree[p*2]=0;for(p=0;p<S;p++)a.bl_tree[p*2]=0;a.dyn_ltree[M*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Ro=a=>{a.bi_valid>8?rs(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},ql=(a,p,f,y)=>{Ro(a),y&&(rs(a,f),rs(a,~f)),a.pending_buf.set(a.window.subarray(p,p+f),a.pending),a.pending+=f},Co=(a,p,f,y)=>{let u=p*2,A=f*2;return a[u]<a[A]||a[u]===a[A]&&y[p]<=y[f]},Ar=(a,p,f)=>{let y=a.heap[f],u=f<<1;for(;u<=a.heap_len&&(u<a.heap_len&&Co(p,a.heap[u+1],a.heap[u],a.depth)&&u++,!Co(p,y,a.heap[u],a.depth));)a.heap[f]=a.heap[u],f=u,u<<=1;a.heap[f]=y},Io=(a,p,f)=>{let y,u,A=0,w,C;if(a.last_lit!==0)do y=a.pending_buf[a.d_buf+A*2]<<8|a.pending_buf[a.d_buf+A*2+1],u=a.pending_buf[a.l_buf+A],A++,y===0?Xt(a,u,p):(w=ht[u],Xt(a,w+d+1,p),C=st[w],C!==0&&(u-=Dt[w],Mt(a,u,C)),y--,w=Pi(y),Xt(a,w,f),C=lt[w],C!==0&&(y-=Bt[w],Mt(a,y,C)));while(A<a.last_lit);Xt(a,M,p)},Rr=(a,p)=>{let f=p.dyn_tree,y=p.stat_desc.static_tree,u=p.stat_desc.has_stree,A=p.stat_desc.elems,w,C,Q=-1,$;for(a.heap_len=0,a.heap_max=P,w=0;w<A;w++)f[w*2]!==0?(a.heap[++a.heap_len]=Q=w,a.depth[w]=0):f[w*2+1]=0;for(;a.heap_len<2;)$=a.heap[++a.heap_len]=Q<2?++Q:0,f[$*2]=1,a.depth[$]=0,a.opt_len--,u&&(a.static_len-=y[$*2+1]);for(p.max_code=Q,w=a.heap_len>>1;w>=1;w--)Ar(a,f,w);$=A;do w=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Ar(a,f,1),C=a.heap[1],a.heap[--a.heap_max]=w,a.heap[--a.heap_max]=C,f[$*2]=f[w*2]+f[C*2],a.depth[$]=(a.depth[w]>=a.depth[C]?a.depth[w]:a.depth[C])+1,f[w*2+1]=f[C*2+1]=$,a.heap[1]=$++,Ar(a,f,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],bo(a,p),Tr(f,Q,a.bl_count)},Po=(a,p,f)=>{let y,u=-1,A,w=p[0*2+1],C=0,Q=7,$=4;for(w===0&&(Q=138,$=3),p[(f+1)*2+1]=65535,y=0;y<=f;y++)A=w,w=p[(y+1)*2+1],!(++C<Q&&A===w)&&(C<$?a.bl_tree[A*2]+=C:A!==0?(A!==u&&a.bl_tree[A*2]++,a.bl_tree[k*2]++):C<=10?a.bl_tree[T*2]++:a.bl_tree[B*2]++,C=0,u=A,w===0?(Q=138,$=3):A===w?(Q=6,$=3):(Q=7,$=4))},Oo=(a,p,f)=>{let y,u=-1,A,w=p[0*2+1],C=0,Q=7,$=4;for(w===0&&(Q=138,$=3),y=0;y<=f;y++)if(A=w,w=p[(y+1)*2+1],!(++C<Q&&A===w)){if(C<$)do Xt(a,A,a.bl_tree);while(--C!==0);else A!==0?(A!==u&&(Xt(a,A,a.bl_tree),C--),Xt(a,k,a.bl_tree),Mt(a,C-3,2)):C<=10?(Xt(a,T,a.bl_tree),Mt(a,C-3,3)):(Xt(a,B,a.bl_tree),Mt(a,C-11,7));C=0,u=A,w===0?(Q=138,$=3):A===w?(Q=6,$=3):(Q=7,$=4)}},Wl=a=>{let p;for(Po(a,a.dyn_ltree,a.l_desc.max_code),Po(a,a.dyn_dtree,a.d_desc.max_code),Rr(a,a.bl_desc),p=S-1;p>=3&&a.bl_tree[Rt[p]*2+1]===0;p--);return a.opt_len+=3*(p+1)+5+5+4,p},Yl=(a,p,f,y)=>{let u;for(Mt(a,p-257,5),Mt(a,f-1,5),Mt(a,y-4,4),u=0;u<y;u++)Mt(a,a.bl_tree[Rt[u]*2+1],3);Oo(a,a.dyn_ltree,p-1),Oo(a,a.dyn_dtree,f-1)},Xl=a=>{let p=4093624447,f;for(f=0;f<=31;f++,p>>>=1)if(p&1&&a.dyn_ltree[f*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(f=32;f<d;f++)if(a.dyn_ltree[f*2]!==0)return 1;return 0},No=!1,Kl=a=>{No||(To(),No=!0),a.l_desc=new Se(a.dyn_ltree,bs),a.d_desc=new Se(a.dyn_dtree,Ft),a.bl_desc=new Se(a.bl_tree,Yt),a.bi_buf=0,a.bi_valid=0,Ao(a)},Mo=(a,p,f,y)=>{Mt(a,(n<<1)+(y?1:0),3),ql(a,p,f,!0)},Jl=a=>{Mt(a,o<<1,3),Xt(a,M,D),wo(a)},Ql=(a,p,f,y)=>{let u,A,w=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=Xl(a)),Rr(a,a.l_desc),Rr(a,a.d_desc),w=Wl(a),u=a.opt_len+3+7>>>3,A=a.static_len+3+7>>>3,A<=u&&(u=A)):u=A=f+5,f+4<=u&&p!==-1?Mo(a,p,f,y):a.strategy===4||A===u?(Mt(a,(o<<1)+(y?1:0),3),Io(a,D,U)):(Mt(a,(c<<1)+(y?1:0),3),Yl(a,a.l_desc.max_code+1,a.d_desc.max_code+1,w+1),Io(a,a.dyn_ltree,a.dyn_dtree)),Ao(a),y&&Ro(a)},Zl=(a,p,f)=>(a.pending_buf[a.d_buf+a.last_lit*2]=p>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=p&255,a.pending_buf[a.l_buf+a.last_lit]=f&255,a.last_lit++,p===0?a.dyn_ltree[f*2]++:(a.matches++,p--,a.dyn_ltree[(ht[f]+d+1)*2]++,a.dyn_dtree[Pi(p)*2]++),a.last_lit===a.lit_bufsize-1);var th=Kl,eh=Mo,sh=Ql,ih=Zl,rh=Jl,nh={_tr_init:th,_tr_stored_block:eh,_tr_flush_block:sh,_tr_tally:ih,_tr_align:rh},ko=(a,p,f,y)=>{let u=a&65535|0,A=a>>>16&65535|0,w=0;for(;f!==0;){w=f>2e3?2e3:f,f-=w;do u=u+p[y++]|0,A=A+u|0;while(--w);u%=65521,A%=65521}return u|A<<16|0};let oh=()=>{let a,p=[];for(var f=0;f<256;f++){a=f;for(var y=0;y<8;y++)a=a&1?3988292384^a>>>1:a>>>1;p[f]=a}return p},ah=new Uint32Array(oh());var Me=(a,p,f,y)=>{let u=ah,A=y+f;a^=-1;for(let w=y;w<A;w++)a=a>>>8^u[(a^p[w])&255];return a^-1},Oi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Do={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:ch,_tr_stored_block:lh,_tr_flush_block:hh,_tr_tally:ke,_tr_align:uh}=nh,{Z_NO_FLUSH:ns,Z_PARTIAL_FLUSH:dh,Z_FULL_FLUSH:ph,Z_FINISH:De,Z_BLOCK:xo,Z_OK:oe,Z_STREAM_END:Lo,Z_STREAM_ERROR:Kt,Z_DATA_ERROR:fh,Z_BUF_ERROR:Cr,Z_DEFAULT_COMPRESSION:gh,Z_FILTERED:mh,Z_HUFFMAN_ONLY:Ni,Z_RLE:yh,Z_FIXED:Eh,Z_DEFAULT_STRATEGY:Sh,Z_UNKNOWN:vh,Z_DEFLATED:Mi}=Do,_h=9,wh=15,bh=8,Ir=256+1+29,Th=30,Ah=19,Rh=2*Ir+1,Ch=15,J=3,xe=258,se=xe+J+1,Ih=32,ki=42,Pr=69,Di=73,xi=91,Li=103,os=113,Ys=666,vt=1,Xs=2,as=3,Ts=4,Ph=3,Le=(a,p)=>(a.msg=Oi[p],p),Vo=a=>(a<<1)-(a>4?9:0),Ve=a=>{let p=a.length;for(;--p>=0;)a[p]=0},Ue=(a,p,f)=>(p<<a.hash_shift^f)&a.hash_mask,je=a=>{let p=a.state,f=p.pending;f>a.avail_out&&(f=a.avail_out),f!==0&&(a.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+f),a.next_out),a.next_out+=f,p.pending_out+=f,a.total_out+=f,a.avail_out-=f,p.pending-=f,p.pending===0&&(p.pending_out=0))},Ct=(a,p)=>{hh(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,p),a.block_start=a.strstart,je(a.strm)},et=(a,p)=>{a.pending_buf[a.pending++]=p},Ks=(a,p)=>{a.pending_buf[a.pending++]=p>>>8&255,a.pending_buf[a.pending++]=p&255},Oh=(a,p,f,y)=>{let u=a.avail_in;return u>y&&(u=y),u===0?0:(a.avail_in-=u,p.set(a.input.subarray(a.next_in,a.next_in+u),f),a.state.wrap===1?a.adler=ko(a.adler,p,u,f):a.state.wrap===2&&(a.adler=Me(a.adler,p,u,f)),a.next_in+=u,a.total_in+=u,u)},Uo=(a,p)=>{let f=a.max_chain_length,y=a.strstart,u,A,w=a.prev_length,C=a.nice_match,Q=a.strstart>a.w_size-se?a.strstart-(a.w_size-se):0,$=a.window,$t=a.w_mask,He=a.prev,nt=a.strstart+xe,ls=$[y+w-1],Rs=$[y+w];a.prev_length>=a.good_match&&(f>>=2),C>a.lookahead&&(C=a.lookahead);do if(u=p,!($[u+w]!==Rs||$[u+w-1]!==ls||$[u]!==$[y]||$[++u]!==$[y+1])){y+=2,u++;do;while($[++y]===$[++u]&&$[++y]===$[++u]&&$[++y]===$[++u]&&$[++y]===$[++u]&&$[++y]===$[++u]&&$[++y]===$[++u]&&$[++y]===$[++u]&&$[++y]===$[++u]&&y<nt);if(A=xe-(nt-y),y=nt-xe,A>w){if(a.match_start=p,w=A,A>=C)break;ls=$[y+w-1],Rs=$[y+w]}}while((p=He[p&$t])>Q&&--f!==0);return w<=a.lookahead?w:a.lookahead},cs=a=>{let p=a.w_size,f,y,u,A,w;do{if(A=a.window_size-a.lookahead-a.strstart,a.strstart>=p+(p-se)){a.window.set(a.window.subarray(p,p+p),0),a.match_start-=p,a.strstart-=p,a.block_start-=p,y=a.hash_size,f=y;do u=a.head[--f],a.head[f]=u>=p?u-p:0;while(--y);y=p,f=y;do u=a.prev[--f],a.prev[f]=u>=p?u-p:0;while(--y);A+=p}if(a.strm.avail_in===0)break;if(y=Oh(a.strm,a.window,a.strstart+a.lookahead,A),a.lookahead+=y,a.lookahead+a.insert>=J)for(w=a.strstart-a.insert,a.ins_h=a.window[w],a.ins_h=Ue(a,a.ins_h,a.window[w+1]);a.insert&&(a.ins_h=Ue(a,a.ins_h,a.window[w+J-1]),a.prev[w&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=w,w++,a.insert--,!(a.lookahead+a.insert<J)););}while(a.lookahead<se&&a.strm.avail_in!==0)},Nh=(a,p)=>{let f=65535;for(f>a.pending_buf_size-5&&(f=a.pending_buf_size-5);;){if(a.lookahead<=1){if(cs(a),a.lookahead===0&&p===ns)return vt;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let y=a.block_start+f;if((a.strstart===0||a.strstart>=y)&&(a.lookahead=a.strstart-y,a.strstart=y,Ct(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-se&&(Ct(a,!1),a.strm.avail_out===0))return vt}return a.insert=0,p===De?(Ct(a,!0),a.strm.avail_out===0?as:Ts):(a.strstart>a.block_start&&(Ct(a,!1),a.strm.avail_out===0),vt)},Or=(a,p)=>{let f,y;for(;;){if(a.lookahead<se){if(cs(a),a.lookahead<se&&p===ns)return vt;if(a.lookahead===0)break}if(f=0,a.lookahead>=J&&(a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+J-1]),f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),f!==0&&a.strstart-f<=a.w_size-se&&(a.match_length=Uo(a,f)),a.match_length>=J)if(y=ke(a,a.strstart-a.match_start,a.match_length-J),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=J){a.match_length--;do a.strstart++,a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+J-1]),f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+1]);else y=ke(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(y&&(Ct(a,!1),a.strm.avail_out===0))return vt}return a.insert=a.strstart<J-1?a.strstart:J-1,p===De?(Ct(a,!0),a.strm.avail_out===0?as:Ts):a.last_lit&&(Ct(a,!1),a.strm.avail_out===0)?vt:Xs},As=(a,p)=>{let f,y,u;for(;;){if(a.lookahead<se){if(cs(a),a.lookahead<se&&p===ns)return vt;if(a.lookahead===0)break}if(f=0,a.lookahead>=J&&(a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+J-1]),f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=J-1,f!==0&&a.prev_length<a.max_lazy_match&&a.strstart-f<=a.w_size-se&&(a.match_length=Uo(a,f),a.match_length<=5&&(a.strategy===mh||a.match_length===J&&a.strstart-a.match_start>4096)&&(a.match_length=J-1)),a.prev_length>=J&&a.match_length<=a.prev_length){u=a.strstart+a.lookahead-J,y=ke(a,a.strstart-1-a.prev_match,a.prev_length-J),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=u&&(a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+J-1]),f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=J-1,a.strstart++,y&&(Ct(a,!1),a.strm.avail_out===0))return vt}else if(a.match_available){if(y=ke(a,0,a.window[a.strstart-1]),y&&Ct(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return vt}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(y=ke(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<J-1?a.strstart:J-1,p===De?(Ct(a,!0),a.strm.avail_out===0?as:Ts):a.last_lit&&(Ct(a,!1),a.strm.avail_out===0)?vt:Xs},Mh=(a,p)=>{let f,y,u,A,w=a.window;for(;;){if(a.lookahead<=xe){if(cs(a),a.lookahead<=xe&&p===ns)return vt;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=J&&a.strstart>0&&(u=a.strstart-1,y=w[u],y===w[++u]&&y===w[++u]&&y===w[++u])){A=a.strstart+xe;do;while(y===w[++u]&&y===w[++u]&&y===w[++u]&&y===w[++u]&&y===w[++u]&&y===w[++u]&&y===w[++u]&&y===w[++u]&&u<A);a.match_length=xe-(A-u),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=J?(f=ke(a,1,a.match_length-J),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(f=ke(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),f&&(Ct(a,!1),a.strm.avail_out===0))return vt}return a.insert=0,p===De?(Ct(a,!0),a.strm.avail_out===0?as:Ts):a.last_lit&&(Ct(a,!1),a.strm.avail_out===0)?vt:Xs},kh=(a,p)=>{let f;for(;;){if(a.lookahead===0&&(cs(a),a.lookahead===0)){if(p===ns)return vt;break}if(a.match_length=0,f=ke(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,f&&(Ct(a,!1),a.strm.avail_out===0))return vt}return a.insert=0,p===De?(Ct(a,!0),a.strm.avail_out===0?as:Ts):a.last_lit&&(Ct(a,!1),a.strm.avail_out===0)?vt:Xs};function ae(a,p,f,y,u){this.good_length=a,this.max_lazy=p,this.nice_length=f,this.max_chain=y,this.func=u}let Js=[new ae(0,0,0,0,Nh),new ae(4,4,8,4,Or),new ae(4,5,16,8,Or),new ae(4,6,32,32,Or),new ae(4,4,16,16,As),new ae(8,16,32,32,As),new ae(8,16,128,128,As),new ae(8,32,128,256,As),new ae(32,128,258,1024,As),new ae(32,258,258,4096,As)],Dh=a=>{a.window_size=2*a.w_size,Ve(a.head),a.max_lazy_match=Js[a.level].max_lazy,a.good_match=Js[a.level].good_length,a.nice_match=Js[a.level].nice_length,a.max_chain_length=Js[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=J-1,a.match_available=0,a.ins_h=0};function xh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Mi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Rh*2),this.dyn_dtree=new Uint16Array((2*Th+1)*2),this.bl_tree=new Uint16Array((2*Ah+1)*2),Ve(this.dyn_ltree),Ve(this.dyn_dtree),Ve(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ch+1),this.heap=new Uint16Array(2*Ir+1),Ve(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Ir+1),Ve(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let jo=a=>{if(!a||!a.state)return Le(a,Kt);a.total_in=a.total_out=0,a.data_type=vh;let p=a.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?ki:os,a.adler=p.wrap===2?0:1,p.last_flush=ns,ch(p),oe},Ho=a=>{let p=jo(a);return p===oe&&Dh(a.state),p},Lh=(a,p)=>!a||!a.state||a.state.wrap!==2?Kt:(a.state.gzhead=p,oe),Bo=(a,p,f,y,u,A)=>{if(!a)return Kt;let w=1;if(p===gh&&(p=6),y<0?(w=0,y=-y):y>15&&(w=2,y-=16),u<1||u>_h||f!==Mi||y<8||y>15||p<0||p>9||A<0||A>Eh)return Le(a,Kt);y===8&&(y=9);let C=new xh;return a.state=C,C.strm=a,C.wrap=w,C.gzhead=null,C.w_bits=y,C.w_size=1<<C.w_bits,C.w_mask=C.w_size-1,C.hash_bits=u+7,C.hash_size=1<<C.hash_bits,C.hash_mask=C.hash_size-1,C.hash_shift=~~((C.hash_bits+J-1)/J),C.window=new Uint8Array(C.w_size*2),C.head=new Uint16Array(C.hash_size),C.prev=new Uint16Array(C.w_size),C.lit_bufsize=1<<u+6,C.pending_buf_size=C.lit_bufsize*4,C.pending_buf=new Uint8Array(C.pending_buf_size),C.d_buf=1*C.lit_bufsize,C.l_buf=3*C.lit_bufsize,C.level=p,C.strategy=A,C.method=f,Ho(a)},Vh=(a,p)=>Bo(a,p,Mi,wh,bh,Sh),Uh=(a,p)=>{let f,y;if(!a||!a.state||p>xo||p<0)return a?Le(a,Kt):Kt;let u=a.state;if(!a.output||!a.input&&a.avail_in!==0||u.status===Ys&&p!==De)return Le(a,a.avail_out===0?Cr:Kt);u.strm=a;let A=u.last_flush;if(u.last_flush=p,u.status===ki)if(u.wrap===2)a.adler=0,et(u,31),et(u,139),et(u,8),u.gzhead?(et(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),et(u,u.gzhead.time&255),et(u,u.gzhead.time>>8&255),et(u,u.gzhead.time>>16&255),et(u,u.gzhead.time>>24&255),et(u,u.level===9?2:u.strategy>=Ni||u.level<2?4:0),et(u,u.gzhead.os&255),u.gzhead.extra&&u.gzhead.extra.length&&(et(u,u.gzhead.extra.length&255),et(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(a.adler=Me(a.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=Pr):(et(u,0),et(u,0),et(u,0),et(u,0),et(u,0),et(u,u.level===9?2:u.strategy>=Ni||u.level<2?4:0),et(u,Ph),u.status=os);else{let w=Mi+(u.w_bits-8<<4)<<8,C=-1;u.strategy>=Ni||u.level<2?C=0:u.level<6?C=1:u.level===6?C=2:C=3,w|=C<<6,u.strstart!==0&&(w|=Ih),w+=31-w%31,u.status=os,Ks(u,w),u.strstart!==0&&(Ks(u,a.adler>>>16),Ks(u,a.adler&65535)),a.adler=1}if(u.status===Pr)if(u.gzhead.extra){for(f=u.pending;u.gzindex<(u.gzhead.extra.length&65535)&&!(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>f&&(a.adler=Me(a.adler,u.pending_buf,u.pending-f,f)),je(a),f=u.pending,u.pending===u.pending_buf_size));)et(u,u.gzhead.extra[u.gzindex]&255),u.gzindex++;u.gzhead.hcrc&&u.pending>f&&(a.adler=Me(a.adler,u.pending_buf,u.pending-f,f)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=Di)}else u.status=Di;if(u.status===Di)if(u.gzhead.name){f=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>f&&(a.adler=Me(a.adler,u.pending_buf,u.pending-f,f)),je(a),f=u.pending,u.pending===u.pending_buf_size)){y=1;break}u.gzindex<u.gzhead.name.length?y=u.gzhead.name.charCodeAt(u.gzindex++)&255:y=0,et(u,y)}while(y!==0);u.gzhead.hcrc&&u.pending>f&&(a.adler=Me(a.adler,u.pending_buf,u.pending-f,f)),y===0&&(u.gzindex=0,u.status=xi)}else u.status=xi;if(u.status===xi)if(u.gzhead.comment){f=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>f&&(a.adler=Me(a.adler,u.pending_buf,u.pending-f,f)),je(a),f=u.pending,u.pending===u.pending_buf_size)){y=1;break}u.gzindex<u.gzhead.comment.length?y=u.gzhead.comment.charCodeAt(u.gzindex++)&255:y=0,et(u,y)}while(y!==0);u.gzhead.hcrc&&u.pending>f&&(a.adler=Me(a.adler,u.pending_buf,u.pending-f,f)),y===0&&(u.status=Li)}else u.status=Li;if(u.status===Li&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&je(a),u.pending+2<=u.pending_buf_size&&(et(u,a.adler&255),et(u,a.adler>>8&255),a.adler=0,u.status=os)):u.status=os),u.pending!==0){if(je(a),a.avail_out===0)return u.last_flush=-1,oe}else if(a.avail_in===0&&Vo(p)<=Vo(A)&&p!==De)return Le(a,Cr);if(u.status===Ys&&a.avail_in!==0)return Le(a,Cr);if(a.avail_in!==0||u.lookahead!==0||p!==ns&&u.status!==Ys){let w=u.strategy===Ni?kh(u,p):u.strategy===yh?Mh(u,p):Js[u.level].func(u,p);if((w===as||w===Ts)&&(u.status=Ys),w===vt||w===as)return a.avail_out===0&&(u.last_flush=-1),oe;if(w===Xs&&(p===dh?uh(u):p!==xo&&(lh(u,0,0,!1),p===ph&&(Ve(u.head),u.lookahead===0&&(u.strstart=0,u.block_start=0,u.insert=0))),je(a),a.avail_out===0))return u.last_flush=-1,oe}return p!==De?oe:u.wrap<=0?Lo:(u.wrap===2?(et(u,a.adler&255),et(u,a.adler>>8&255),et(u,a.adler>>16&255),et(u,a.adler>>24&255),et(u,a.total_in&255),et(u,a.total_in>>8&255),et(u,a.total_in>>16&255),et(u,a.total_in>>24&255)):(Ks(u,a.adler>>>16),Ks(u,a.adler&65535)),je(a),u.wrap>0&&(u.wrap=-u.wrap),u.pending!==0?oe:Lo)},jh=a=>{if(!a||!a.state)return Kt;let p=a.state.status;return p!==ki&&p!==Pr&&p!==Di&&p!==xi&&p!==Li&&p!==os&&p!==Ys?Le(a,Kt):(a.state=null,p===os?Le(a,fh):oe)},Hh=(a,p)=>{let f=p.length;if(!a||!a.state)return Kt;let y=a.state,u=y.wrap;if(u===2||u===1&&y.status!==ki||y.lookahead)return Kt;if(u===1&&(a.adler=ko(a.adler,p,f,0)),y.wrap=0,f>=y.w_size){u===0&&(Ve(y.head),y.strstart=0,y.block_start=0,y.insert=0);let Q=new Uint8Array(y.w_size);Q.set(p.subarray(f-y.w_size,f),0),p=Q,f=y.w_size}let A=a.avail_in,w=a.next_in,C=a.input;for(a.avail_in=f,a.next_in=0,a.input=p,cs(y);y.lookahead>=J;){let Q=y.strstart,$=y.lookahead-(J-1);do y.ins_h=Ue(y,y.ins_h,y.window[Q+J-1]),y.prev[Q&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=Q,Q++;while(--$);y.strstart=Q,y.lookahead=J-1,cs(y)}return y.strstart+=y.lookahead,y.block_start=y.strstart,y.insert=y.lookahead,y.lookahead=0,y.match_length=y.prev_length=J-1,y.match_available=0,a.next_in=w,a.input=C,a.avail_in=A,y.wrap=u,oe};var Bh=Vh,Fh=Bo,$h=Ho,zh=jo,Gh=Lh,qh=Uh,Wh=jh,Yh=Hh,Xh="pako deflate (from Nodeca project)",Qs={deflateInit:Bh,deflateInit2:Fh,deflateReset:$h,deflateResetKeep:zh,deflateSetHeader:Gh,deflate:qh,deflateEnd:Wh,deflateSetDictionary:Yh,deflateInfo:Xh};let Kh=(a,p)=>Object.prototype.hasOwnProperty.call(a,p);var Jh=function(a){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let f=p.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(let y in f)Kh(f,y)&&(a[y]=f[y])}}return a},Qh=a=>{let p=0;for(let y=0,u=a.length;y<u;y++)p+=a[y].length;let f=new Uint8Array(p);for(let y=0,u=0,A=a.length;y<A;y++){let w=a[y];f.set(w,u),u+=w.length}return f},Fo={assign:Jh,flattenChunks:Qh};let $o=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{$o=!1}let Zs=new Uint8Array(256);for(let a=0;a<256;a++)Zs[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;Zs[254]=Zs[254]=1;var Zh=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let p,f,y,u,A,w=a.length,C=0;for(u=0;u<w;u++)f=a.charCodeAt(u),(f&64512)===55296&&u+1<w&&(y=a.charCodeAt(u+1),(y&64512)===56320&&(f=65536+(f-55296<<10)+(y-56320),u++)),C+=f<128?1:f<2048?2:f<65536?3:4;for(p=new Uint8Array(C),A=0,u=0;A<C;u++)f=a.charCodeAt(u),(f&64512)===55296&&u+1<w&&(y=a.charCodeAt(u+1),(y&64512)===56320&&(f=65536+(f-55296<<10)+(y-56320),u++)),f<128?p[A++]=f:f<2048?(p[A++]=192|f>>>6,p[A++]=128|f&63):f<65536?(p[A++]=224|f>>>12,p[A++]=128|f>>>6&63,p[A++]=128|f&63):(p[A++]=240|f>>>18,p[A++]=128|f>>>12&63,p[A++]=128|f>>>6&63,p[A++]=128|f&63);return p};let zo=(a,p=a.length)=>{if(p<65534&&a.subarray&&$o)return String.fromCharCode.apply(null,a.length===p?a:a.subarray(0,p));let f="";for(let y=0;y<p;y++)f+=String.fromCharCode(a[y]);return f};var tu=(a,p)=>{let f=p||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,p));let y,u,A=new Array(f*2);for(u=0,y=0;y<f;){let w=a[y++];if(w<128){A[u++]=w;continue}let C=Zs[w];if(C>4){A[u++]=65533,y+=C-1;continue}for(w&=C===2?31:C===3?15:7;C>1&&y<f;)w=w<<6|a[y++]&63,C--;if(C>1){A[u++]=65533;continue}w<65536?A[u++]=w:(w-=65536,A[u++]=55296|w>>10&1023,A[u++]=56320|w&1023)}return zo(A,u)},eu=(a,p)=>{p=p||a.length,p>a.length&&(p=a.length);let f=p-1;for(;f>=0&&(a[f]&192)===128;)f--;return f<0||f===0?p:f+Zs[a[f]]>p?f:p},Go={string2buf:Zh,buf2string:tu,utf8border:eu};function su(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var iu=su;let qo=Object.prototype.toString,{Z_NO_FLUSH:ru,Z_SYNC_FLUSH:nu,Z_FULL_FLUSH:ou,Z_FINISH:au,Z_OK:Vi,Z_STREAM_END:cu,Z_DEFAULT_COMPRESSION:lu,Z_DEFAULT_STRATEGY:hu,Z_DEFLATED:uu}=Do;function Ui(a){this.options=Fo.assign({level:lu,method:uu,chunkSize:16384,windowBits:15,memLevel:8,strategy:hu},a||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iu,this.strm.avail_out=0;let f=Qs.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(f!==Vi)throw new Error(Oi[f]);if(p.header&&Qs.deflateSetHeader(this.strm,p.header),p.dictionary){let y;if(typeof p.dictionary=="string"?y=Go.string2buf(p.dictionary):qo.call(p.dictionary)==="[object ArrayBuffer]"?y=new Uint8Array(p.dictionary):y=p.dictionary,f=Qs.deflateSetDictionary(this.strm,y),f!==Vi)throw new Error(Oi[f]);this._dict_set=!0}}Ui.prototype.push=function(a,p){let f=this.strm,y=this.options.chunkSize,u,A;if(this.ended)return!1;for(p===~~p?A=p:A=p===!0?au:ru,typeof a=="string"?f.input=Go.string2buf(a):qo.call(a)==="[object ArrayBuffer]"?f.input=new Uint8Array(a):f.input=a,f.next_in=0,f.avail_in=f.input.length;;){if(f.avail_out===0&&(f.output=new Uint8Array(y),f.next_out=0,f.avail_out=y),(A===nu||A===ou)&&f.avail_out<=6){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(u=Qs.deflate(f,A),u===cu)return f.next_out>0&&this.onData(f.output.subarray(0,f.next_out)),u=Qs.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===Vi;if(f.avail_out===0){this.onData(f.output);continue}if(A>0&&f.next_out>0){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(f.avail_in===0)break}return!0},Ui.prototype.onData=function(a){this.chunks.push(a)},Ui.prototype.onEnd=function(a){a===Vi&&(this.result=Fo.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function du(a,p){p=p||{};let f=new Ui(p);if(f.push(a,!0),f.err)throw f.msg||Oi[f.err];return f.result}function pu(a,p){return p=p||{},p.gzip=!0,du(a,p)}return(a,p,f)=>{let y=pu(a);return p==="base64"?y=btoa(zo(y)):y=y.buffer,f&&f(y),y}}var DE=(()=>{class s extends Vc{constructor(t){super(t),this.algorithm=yr.GZIP,this.Ug=Xa(),this.vA=(i,n,o)=>{let c=this.Ug(i,n);o(c)},this.compress=Ka(),typeof CompressionStream!="undefined"&&fE||(this.compress=this.vA,this.getCompressorSourceCode=()=>Xa.toString())}compressSync(t,e){return this.Ug(t,e)}getCompressorSourceCode(){return Ka.toString()}}return s})();function Ka(){let s=r=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([r]))});return(r,t,e)=>{let i=new Response(r).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();if(t==="base64"){n.then(o=>s(o)).then(o=>e(o));return}n.then(o=>e(o))}}var xE=(()=>{class s extends Vc{constructor(){super(...arguments),this.algorithm=yr.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,e,i)=>i(t)}.toString()}}return s})(),Cl=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!ME.isCompressionEnabled()?new xE(t):this.instance=new DE(t)}}return s})(),Il=["setEncryptionSelectors"],fo=["setPIISelectors"],Pl=["setCapturedElementsSelector"],LE=(()=>{class s{constructor(t,e,i,n,o,c,l){this.S=t,this.E=e,this.lt=i,this._e=n,this.Bt=o,this.ot=c,this.br=l}init(){var t,e;this.br&&this.ot&&((t=this.br)===null||t===void 0||t.addSelector((e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ht()}onStartTracking(t){this._e.start(),this.S.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this._e.stop(),this.S.emitSensitiveStatusChange()}onAfterArtificialPageView(){this._e.start(),this.S.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this._e.stop(),this.S.emitSensitiveStatusChange()}onOptout(){this._e.stop(),this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.S.emitSensitiveStatusChange()}ht(){this.E.register(fo,t=>{this.lt.setMaskedElementSettingsFromCommand(t),this.S.emitSensitiveStatusChange()}),this.E.register(Pl,t=>{this.Bt.setWhitelistedElementsSelector(t),this.S.emitSensitiveStatusChange()}),this.E.register(Il,t=>{var e,i;(e=this.ot)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.br)===null||i===void 0||i.addSelector(t)})}}return s})();var VE=(()=>{class s extends Lt{constructor(t,e,i,n,o,c){super(),this.he=t,this.lt=e,this.Bt=i,this.br=n,this.Tr=o,this.it=c}onStart(){var t,e,i;this.Bt.start(),this.he.setMaskedElementSettings(this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.he.startIdentifier(),(e=this.br)===null||e===void 0||e.start(),(i=this.Tr)===null||i===void 0||i.start()}onStop(){var t,e;this.Bt.stop(),this.he.stopIdentifier(),(t=this.br)===null||t===void 0||t.stop(),(e=this.Tr)===null||e===void 0||e.stop()}}return s})(),UE=(()=>{class s{constructor(t,e,i,n,o){this.it=t,this.lt=e,this._e=i,this.Bt=n,this.ot=o}getSensitiveStatus(){var t,e;return{started:this._e.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Bt.getWhitelistedElementsSelector(),maskedElementSettings:this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this._e.isStarted,i=this.it.shouldUseAnonymization();return e?x.isMaskedElement(t)||x.isMaskedElementChild(t)?Ye.MASKED:tf.shouldEncrypt(t)?Ye.ENCRYPTED:Ke.isEditableNode(t)?Ye.ANONYMIZED:i?Ae.isWhitelistedElement(t)?Ye.CAPTURED:Ye.ANONYMIZED:Ye.CAPTURED:Ye.ANONYMIZED}}return s})(),jE=(()=>{class s{constructor(t){this.W=t}onAfterVisitorRenewal(){this.W.renewSession()}}return s})(),Ja=(()=>{let s;return function(r){function t(d,E){for(let g of d)if(i(g,E))return!0;return!1}r.isUrlMatching=t;function e(d,E){if(R(E)){for(let g of d)if(i(g,E))return!0}else if(tr(E)){for(let g of d)if(i(g,csString(E)))return!0}return!1}r.isMatching=e;function i(d,E){let g=n(d,E);return d.negate?!g:g}function n(d,E){switch(d.rule_type==="date"&&(d.match_operation==="less_than"||d.match_operation==="greater_than")&&(E=(new csDate(E).valueOf()/1e3).toFixed(0)),d.match_operation){case"exact":switch(d.rule_type){case"string":return R(d.pattern)?csString.prototype.toLowerCase.call(E)===csString.prototype.toLowerCase.call(d.pattern):!1;case"boolean":return E===d.pattern||E===csString(d.pattern);case"number":return gt(E)?Number(E)===Number(d.pattern):!1;default:return E===d.pattern}case"starts_with":return R(d.pattern)?csString.prototype.indexOf.call(E,d.pattern)===0:!1;case"ends_with":return R(d.pattern)?Fs(E,d.pattern):!1;case"contains":return R(d.pattern)?csString.prototype.indexOf.call(E,d.pattern)!==-1:!1;case"regex":if(!R(d.pattern))return!1;try{return new csRegExp(d.pattern).test(E)}catch(g){return H.warn(`targeting.matchOperation.regex invalid ${g==null?void 0:g.message}`),!1}case"simple":return R(d.pattern)?m(E)===m(d.pattern):!1;case"greater_than":return Number(E)>Number(d.pattern);case"less_than":return Number(E)<Number(d.pattern);case"exact_date":{let g=Number(d.pattern);if(!Et(g))return!1;let S=new csDate(g*1e3);return new csDate(E).toDateString()===S.toDateString()}case"exact_days_ago":return o(d,E);case"more_than_days_ago":return c(d,E);case"less_than_days_ago":return l(d,E);case"unknown":return h(E);default:return H.warn(`targeting.matchOperation.regex not managed operation ${d.match_operation}`),!1}}function o(d,E){let g=new csDate,S=g.setDate(g.getDate()-Number(d.pattern)),P=new csDate(S);return new csDate(E).toDateString()===P.toDateString()}function c(d,E){let g=Number(d.pattern);if(!Et(g))return!1;let S=Number(g)+1,P=new csDate,N=new csDate(P);return N.setDate(P.getDate()-S),new csDate(E).getTime()<=N.getTime()}function l(d,E){let g=Number(d.pattern);if(!Et(g))return!1;if(g===0)return o(d,E);let S=new csDate,P=new csDate(S);return P.setDate(S.getDate()-g),new csDate(E).getTime()>=P.getTime()}function h(d){return gt(d)?R(d)?csString.prototype.trim.call(d)==="":tr(d)?d===!0:Et(d)?d!==0:!1:!0}function m(d){let E=bt(d,"http://")||bt(d,"https://")?d:`https://${d}`,g=Lc(E);return g!==null?csString.prototype.replace.call(g.host,/^www./,""):d}}(s||(s={})),s})(),HE=(()=>{class s{constructor(){this.Hg=[],this.Bg=[]}setTargetingRules(t){for(let e of t)e.component==="url"?csArray.prototype.push.call(this.Hg,e):e.component==="trigger"&&csArray.prototype.push.call(this.Bg,e)}matchUrl(t){return Ja.isUrlMatching(this.Hg,t)}matchTrigger(t){return Ja.isMatching(this.Bg,t)}}return s})(),BE=(()=>{class s extends Lt{constructor(t,e,i){super(),this.Fa=t,this.zh=e,this.w=i}init(){this.Gh=new HE,this.Fa&&this.Gh.setTargetingRules(this.Fa)}onStart(){}checkInitialUrlTargetingRules(){let t=this.w.getAnonymizedUrl();this.qh(t,"url")&&this.zh()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.qh(t,"url")&&this.zh()}onExternalEvent(t){this.isStarted&&this.qh(t.name,"trigger")&&this.zh()}qh(t,e){var i,n;return e==="url"&&R(t)&&(!((i=this.Gh)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.Gh)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),FE=(()=>{class s{constructor(t,e,i,n,o,c){this.Fa=t,this.RA=e,this.S=i,this._t=n,this.X=o,this.w=c}init(){this.Jn=new BE(this.Fa,this.RA,this.w),this.X.addListener(this.Jn),this.Jn.init()}start(){this.Jn.start()}stop(){this.Jn.stop()}checkInitialUrlTargetingRules(){this.Jn.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this._t.getInitialCollectState();t===V.ANALYTICS_ONLY?this.S.emitCollectStateChange(V.ANALYTICS_ONLY_RULES_TARGETING,Gt.ETR_OFF):t===V.RECORDING_GLOBAL_SAMPLING&&this.S.emitCollectStateChange(V.RECORDING_RULES_TARGETING,Gt.ETR_OFF)}}return s})(),Ol=["networkRequest:maskUrls"],$E=["networkRequest:maskUrls:reset"],zE=(()=>{class s{constructor(t,e){this.Fg=t,this.pt=e}init(){this.Fg.register(Ol,t=>{if(R(t)){this.pt.addPartialUrlMaskingPattern(t);return}if(csArray.isArray(t))for(let e of t)R(e)&&this.pt.addPartialUrlMaskingPattern(e)}),this.Fg.register($E,()=>this.pt.resetPartialUrlMaskingPatterns())}}return s})(),Nl=":";function Qa(s){let r=[],t=GE(s),e=csString.prototype.split.call(t,"/");for(let i of e)bt(i,Nl)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function GE(s){let r=s;return bt(s,"/")&&(r=csString.prototype.substring.call(r,1)),Fs(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var Ml=(()=>{class s{constructor(){this.$g=new Set,this.zg=[],this.Wh=new Set,this.Yh=[]}addUrlMaskingPattern(t){if(this.$g.has(t))return;this.$g.add(t);let e=Qa(t);csArray.prototype.push.call(this.zg,e)}getUrlMaskingPatterns(){return this.zg}resetPartialUrlMaskingPatterns(){this.Wh.clear(),this.Yh=[]}addPartialUrlMaskingPattern(t){if(this.Wh.has(t))return;this.Wh.add(t);let e=Qa(t);csArray.prototype.push.call(this.Yh,e)}getPartialUrlMaskingPatterns(){return this.Yh}}return s})();var qE=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.R=i,this.Qe=O.now()}resetStartTime(){this.Qe=O.now()}getSessionData(){let{projectId:t}=this.f,e=this.O.getVisitor();e==null&&H.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},o=this.R.getSession();o===null&&H.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:O.now()-this.Qe}}}return s})(),WE=["clearSession"],YE=["extendSession"],XE=["extendSessionV2"],KE=["getSessionData"],JE=["session:start:newVisitor"],QE=["session:clear:visitor"],ZE=(()=>{class s{constructor(t,e,i,n){this.f=t,this.O=e,this.R=i,this.E=n}init(){this.Xh=new qE(this.f,this.O,this.R),this.E.register(WE,()=>this.R.removeSession()),this.E.register(YE,()=>this.R.extendSessionPeriodically(),{disableApplyPending:!0}),this.f.isHeapSideloadsCs()&&this.E.register(XE,()=>this.R.extendSession(),{disableApplyPending:!0}),this.E.register(KE,()=>this.Xh.getSessionData(),{disableApplyPending:!0}),this.E.register(JE,()=>this.O.renewVisitor()),this.E.register(QE,()=>{this.O.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.O.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onBeforeArtificialPageView(){this.O.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onAfterNaturalPageView(){this.Xh.resetStartTime()}onAfterArtificialPageView(){this.Xh.resetStartTime()}onOptout(){this.O.removeVisitor(),this.R.removeSession()}onCollectStateChange(t){this.R.updateCollectState(t)}}return s})(),tS=(()=>{class s{constructor(t,e,i,n,o,c,l,h,m,d,E,g,S,P,N,v,_,M,k,T,B,st,lt,Vt,Rt,b,D,U,F,ht,Dt,Bt,Ne,bs){this.Et=t,this.Ar=e,this.ge=i,this.O=n,this.R=o,this.W=c,this.xi=l,this.S=h,this.E=m,this.Kh=d,this.f=E,this.Jh=g,this.ei=S,this.Qn=P,this.bt=N,this.N=v,this.Q=_,this.tt=M,this.w=k,this.OA=T,this.X=B,this.gt=st,this.vt=lt,this.Gg=Vt,this.ie=Rt,this.NA=b,this.C=D,this.zt=U,this.M=F,this.At=ht,this._t=Dt,this.lt=Bt,this.Se=Ne,this.gs=bs,this.MA=(Ft=!1)=>{let Yt=this.R.getSession();Yt===null?(this.Rr=new FE(this.f.recordTargetingRules,this.qg,this.S,this._t,this.X,this.w),this.Rr.init(),this.Rr.start()):(Yt.collectState===V.RECORDING_RULES_TARGETING||Yt.collectState===V.ANALYTICS_ONLY_RULES_TARGETING)&&this.qg(Ft)},this.qg=(Ft=!1)=>{this.Cr.onLoad(()=>{var Yt,Se;(Yt=this.Rr)===null||Yt===void 0||Yt.emitTargetingCollectState(),(Se=this.Rr)===null||Se===void 0||Se.stop(),this.S.emitStartTracking(Ft)}),this.Zn(Ft)},this.Zn=(Ft=!1)=>{this.ei.isActive()||(this.lt.init(),this.Qh.start(Ft),this.Cr.start())},this.kA=()=>{this.S.emitBeforeSessionRenewal(),this.Ir(!0),this.S.emitAfterSessionRenewal()},this.DA=()=>{this.S.emitBeforeSessionRenewal(),this._t.refreshQuota(Ft=>{Ft!==V.QUOTA_REACHED&&(this.Ir(!0),this.S.emitAfterSessionRenewal())})}}start(){if(this.Jh.init(),this.ei.init(),this.ei.isActive())return;let t,e,i,n,o,c,l,h,m,d,E,g,S,P,N,v,_,M,k;this.C.schedule(()=>{N=new jE(this.W),g=new mf(this.Q),S=new Jp(()=>{}),v=new Qp,k=new Zp;let T=new VE(S,this.lt,v,M,k,this.Zh());P=new UE(this.Zh(),this.lt,T,v,_);let B=new LE(this.S,this.E,this.lt,T,v,_,M);B.init(),this.S.addListener(B),t=new kg(this.f,this.Ar,this.O,this.Q,g,this.E,this.W,new ff(H),this.gt,this.zt,this.X,P,this.wl),e=new nm(this.E,this.R,this.f,this.Et,this.ge,this.N),E=new OE(P,this.f);let st=null,lt=new Vm;i=new Cm(this.O,this.R,this.E,this.gt,st,this.f,lt,E),n=new um(this.f,this.Ar,this.O,this.E,this.N,this.W,this.w),this.f.isHeapSideloadsCs()&&(this.Se||(this.Se=new Lm),this.Wg=new xm(this.Se,this.E),this.S.addListener(this.Wg),this.Wg.init());let Vt;if(this.f.isHeapSideloadsCs()){Vt=new Tf;let Rt=new wf(Vt,this.E);this.S.addListener(Rt),Rt.init()}this.Qh=new qm(this.f,this.E,this.S,this.Ar,this.O,this.R,this.xi,this.bt,this.vt,this.w,this.ie,lt,this.X,this.Se,Vt),this.Yg=new ZE(this.f,this.O,this.R,this.E),l=new Nm(this.f,this.E,this.ge,this.Ar,this.X),h=new Im(this.E),m=new Ef,this.Cr=new Qf}),this.f.apiErrors.enabled&&this.C.schedule(()=>{this.pt=new Ml,this.xA=new zE(this.E,this.pt),this.xA.init()}),this.f.apiErrors.enabled&&this.C.schedule(()=>{var T,B;let st=new zg(this.f.apiErrors,this.N);this.ut=new Ug(new Jf,new Xf,st),this.pe=new jg(this.pt,this.tt,!!(!((B=(T=this.f)===null||T===void 0?void 0:T.experimental)===null||B===void 0)&&B.anonymizeNameInUrls)),this.vr=new Hg;let lt=new Lg(this.ut,this.pe,this.f,this.Ar,this.gt,this.E,this.zt);lt.init(),this.S.addListener(lt)}),this.f.jsErrorsEnabled&&this.C.schedule(()=>{this.bs=new Jg,this.fe=new Zg(this.N,this.w);let T=new Kg(this.bs,this.fe,this.f,this.Ar,this.gt,this.E,this.X,this.w,this.zt);T.init(),this.S.addListener(T)}),this.C.schedule(()=>{this.Qn.init()}),this.C.schedule(()=>{i.init()}),this.C.schedule(()=>{e.init()}),this.C.schedule(()=>{n.init()}),this.C.schedule(()=>{this.Gg.init()}),this.C.schedule(()=>{this.Qh.init()}),this.C.schedule(()=>{this.Yg.init()}),this.C.schedule(()=>{l.init()}),this.C.schedule(()=>{this.OA.init()}),this.C.schedule(()=>{h.init()}),this.C.schedule(()=>{m.init()}),this.C.schedule(()=>{this.NA.init()}),this.C.schedule(()=>{this.S.addListener(this.Yg),this.S.addListener(this.Kh),this.S.addListener(t),this.S.addListener(this.Qn),this.S.addListener(i),this.S.addListener(n),this.S.addListener(this.Gg),this.S.addListener(this.Qh),this.S.addListener(l),this.S.addListener(e),this.S.addListener(m),this.S.addListener(N)}),yi.isRecordingSupported()&&this.C.schedule(()=>{let T=new PE(E,this.R,this.f,this.Et,this.E,this.N,this.W,S,this.fe,this.ut,this.pe,this.pt,this.S,this.X,this.gt,this.ie,this.zt,this.tt,this.vr,this.Zh(),this.ar,_);T.init(),this.S.addListener(T),i.setRecordingService(T.recordingService)}),this.C.schedule(()=>{var T;let B,st}),this.C.schedule(()=>{t.init()}),this.f.isHeapSideloadsStartDataCollection()&&this.C.schedule(()=>{this.E.register(["startDataCollection"],()=>{this.Zn()})}),this.C.schedule(()=>{this.f.isQuotaEnabled()?this.W.onSessionExpired(()=>{this.DA()}):this.W.onSessionExpired(()=>{this.kA()}),this.Ir()})}Ir(t=!1){var e,i,n;if(this.f.hasTargetingRules()){this.MA(t),this.E.start(),(e=this.wl)===null||e===void 0||e.start(),this.Rr&&this.Rr.checkInitialUrlTargetingRules();return}this.E.start(),(i=this.wl)===null||i===void 0||i.start(),this.Cr.onLoad(()=>{this.S.emitStartTracking(t)}),(!Yc(this.f)&&!this.f.isHeapSideloadsStartDataCollection()||t)&&this.Zn(t)}Zh(){if(this.it)return this.it;let t=new Gc;return this.it=new nf(this.f,this.w,t,this.bt),this.it.init(),this.it.shouldUseAnonymization()&&G.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})(),eS=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.f=t,this.O=e,this.Xe=i,this.Xg=n,this.LA=o,this.VA=c,this.UA=l,this.tu=h}compute(t){var e,i;this.f.crossDomainTracking&&!this.f.cookielessTrackingEnabled?this.f.crossDomainSingleIframeTracking?(e=this.UA)===null||e===void 0||e.start(()=>this.eu(t)):(i=this.VA)===null||i===void 0||i.applyUpToDate(()=>this.eu(t)):this.eu(t)}eu(t){this.LA.handle(),this.Xg.clear(),this.jA()?(this.Xg.restoreClearedVisitor(),t(!0)):(this.Xe.exclude(this.f),t(!1))}jA(){let t=ms.boolean(this.f.sampleRate);return this.tu.isForceIncluded()||!this.Xe.isExcluded()&&this.O.doesVisitorExist()||!this.Xe.isExcluded()&&t}}return s})(),sS=(()=>{class s{constructor(t,e,i,n){this.f=t,this.ft=e,this.S=i,this.R=n,this.HA=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.BA(),(t=this.R)===null||t===void 0||t.removeSession()),this.FA(e),this.setVisitor(e)}BA(){return{id:Yf.generate(),visitsCount:0,appliedTrackingDraw:this.f.lastTrackingDraw,creationTimestamp:Ko(),lastVisitTimestamp:0,hitTimestamp:0,expires:O.now()+this.f.visitorCookieTimeout,allowSubdomains:this.f.allowSubdomains,identityPrint:null}}FA(t){let e=Ko();this.R&&!this.R.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.f.lastTrackingDraw,this.Kg=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.ft.get()}setVisitor(t){this.ft.set(t)}doesVisitorExist(){return this.ft.get()!==null}resetVisitor(){this.Jg(),this.S.emitAfterVisitorCleared()}removeVisitor(){this.ft.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.f.allowSubdomains:!1}handleSubdomainChange(){this.ft.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.Kg===void 0?!1:t.visitsCount!==this.Kg}$A(){return!Y(this.Qg)||O.now()-this.Qg>this.HA}renewVisitor(){this.$A()?(this.Qg=O.now(),this.Jg(),this.S.emitAfterVisitorRenewal()):H.warn("session:start:newVisitor is trying to renew visitor under time limit")}Jg(){this.S.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),ie="_cs_s",Mn=18e5,Qr=".",iS=13,qi=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),rS=(()=>{class s{constructor(t,e,i){this.f=t,this.M=e,this.K=i,this.re=null,this.su=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?Fc(e):null}getRawSession(t){if(t){let m=this.iu();return yn(m)}let{sessionString:e,status:i}=this.zA(),n=yn(e);if(i!==qi.EXPIRED)return n;if(this.f.cookielessTrackingEnabled)return null;let o=this.iu();if(!o)return null;let c=csString.prototype.split.call(o,Qr);if(!s.Zg(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.GA(h),n}onCookieToSet(t){this.gi=t}onCookieToRemove(t){this.mi=t}set(t,e=Mn){var i;let n=O.now()+e,o=Np(t);o+=`${Qr}${n}`,this.qA(o,n),this.f.cookielessTrackingEnabled?this.K.setItem(ie,o):(this.M.set(ie,o,e),(i=this.gi)===null||i===void 0||i.call(this,ie,o,e))}remove(){var t;this.f.cookielessTrackingEnabled?this.K.removeItem(ie):(this.M.delete(ie),(t=this.mi)===null||t===void 0||t.call(this,ie)),this.WA()}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.f.allowSubdomains?this.M.delete(ie,mr.CURRENT_DOMAIN):this.M.delete(ie,this.M.getRootDomain()),this.set(t))}isValid(t){return t!==null&&Jn(t)}qA(t,e){this.re={sessionString:t,expires:e}}zA(){return this.re?this.re&&O.now()<=this.re.expires?{sessionString:this.re.sessionString,status:qi.FOUND}:{sessionString:this.re.sessionString,status:qi.EXPIRED}:{sessionString:this.iu(),status:qi.NOT_FOUND}}WA(){this.re=null}GA(t){this.re&&(this.re.expires=t,this.su=!0)}isCacheRefreshed(){return this.su}resetCacheRefreshed(){this.su=!1}iu(){if(this.f.cookielessTrackingEnabled){let e=this.K.getItem(ie);return!e||this.tm(e)?null:e}let t=this.M.get(ie);return!t||this.tm(t)?null:t}tm(t){let e=csString.prototype.split.call(t,Qr);if(!s.Zg(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&O.now()>i}static Zg(t){return t[t.length-1].length===iS}}return s})(),go=60*1e3,nS=60*go,oS=4*nS-go,Ps=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),aS=(()=>{class s{constructor(t,e,i,n,o){this.Le=t,this._t=e,this.S=i,this.YA=n,this.KA=o,this.to=null,this.ru=0,this.eo=Ps.NO}setDynamicVariablesService(t){this.JA=t}createOrUpdateSession(){this.nu(),this.QA=O.now(),this.ru=0;let t=this.em();t===null?(t=this.ZA(),this.$a(t),this.S.emitSessionCreated()):(t=this._t.sanitizeSessionCollectState(t),this.t0(t),t.collectState=this._t.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this._t.getInitialCollectState(),t.collectState=this._t.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.eo=Ps.GRANTED}withdrawnReplayRecording(t){t.collectState=this._t.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.eo=Ps.WITHDRAWN}$a(t){this.eo===Ps.WITHDRAWN?(t.collectState=this._t.getRecordingConsentWithdrawn(),this.setSession(t)):this.eo===Ps.GRANTED?t.collectState=this._t.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this._t.computeInitialCollectState(t),this.eo=Ps.NO}ZA(){return{pageNumber:1,collectState:this._t.getInitialCollectState(),replayConsent:this.YA?mn.NOT_EXPRESSED:mn.UNNECESSARY,etrStatus:Qt.ETR_NOT_SAVED_SESSION}}t0(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this._t.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===V.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.Le.get()}em(){return this.Le.get(!0)}doesSessionExist(){return this.Le.get()!==null}setSession(t){this.Le.set(t),this.S.emitSessionRefreshed()}refreshSession(){let t=this.em();t&&this.setSession(t)}removeSession(){this.Le.remove(),this.S.emitSessionRemoved()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==V.ANALYTICS_ONLY&&csArray.prototype.push.call(e,t.collectState===V.RECORDING_RULES_TARGETING?V.RECORDING_GLOBAL_SAMPLING:t.collectState),this.KA&&csArray.prototype.push.call(e,V.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.Le.getRawSession();return this.Le.isValid(t)}handleSubdomainChange(){this.Le.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.Le.isCacheRefreshed();return e&&t&&this.Le.resetCacheRefreshed(),e}extendSessionPeriodically(){this.to||this.sm()}extendSession(){let t=this.getSession();return t===null?(H.warn("extendSession is trying to extend an expired session"),this.nu(),!1):(this.setSession(t),!0)}sm(){if(this.e0()){this.nu();return}this.extendSession()&&(this.s0(),this.i0())}i0(){this.to=window.csSetTimeout(()=>{this.sm()},Mn-go)}e0(){return oS-(O.now()+Mn-this.QA)<0}nu(){this.to&&(window.csClearTimeout(this.to),this.to=null)}s0(){this.ru+=1,this.JA.trackDynamicVariable("session_expiry_update",this.ru)}}return s})(),cS=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.Xe=i}clear(){this.r0()&&(this.im=this.O.getVisitor(),this.O.removeVisitor()),this.n0()&&this.Xe.removeExclusion()}r0(){return this.O.doesVisitorExist()&&this.O.getVisitor().appliedTrackingDraw!==this.f.lastTrackingDraw}n0(){return this.Xe.getAppliedTrackingDraw()!==this.f.lastTrackingDraw}restoreClearedVisitor(){this.im&&this.O.setVisitor(this.im)}}return s})(),lS=(()=>{class s{constructor(t,e,i){this.O=t,this.R=e,this.o0=i}handle(){this.O.hasAllowSubdomainsChanged()&&(this.O.handleSubdomainChange(),this.R.handleSubdomainChange(),this.o0.handleSubdomainChange())}}return s})(),We="_cs_c",us=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),hS=(()=>{class s{constructor(t,e,i){this.f=t,this.M=e,this.At=i}get(){let t;return this.f.cookielessTrackingEnabled?t=this.At.getItem(We):t=this.M.get(We),t===null?t:Number(t)}set(t){this.f.cookielessTrackingEnabled?this.At.setItem(We,csString(t)):this.M.set(We,csString(t),Un)}remove(){this.f.cookielessTrackingEnabled?this.At.removeItem(We):this.M.delete(We)}handleSubdomainChange(){this.f.cookielessTrackingEnabled||(this.f.allowSubdomains?this.M.delete(We,mr.CURRENT_DOMAIN):this.M.delete(We,this.M.getRootDomain()))}}return s})(),uS=(()=>{class s{constructor(t,e,i){this.f=t,this.R=e,this.S=i}grantReplayConsent(){if(!Ze.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.grantReplayRecordingBeforeSessionStart();return}Ze.isRecordingBlockedByConsent(t)&&(this.R.grantReplayRecording(t),this.S.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!Ze.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.withdrawnReplayRecordingBeforeSessionStart();return}Ze.isRecordingWithDrawn(t)||(this.R.withdrawnReplayRecording(t),this.S.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),dS=["replay:consent:unanonymized:granted","trackConsentGranted"],pS=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],fS=["replay:consent:startForSession:granted"],gS=["replay:consent:startForSession:withdrawn"],mS=(()=>{class s{constructor(t,e,i,n,o){this.f=t,this.E=e,this.bt=i,this.R=n,this.S=o}init(){this.rm=new uS(this.f,this.R,this.S),this.bt.setInitialConsent(),this.ht()}ht(){this.E.register(dS,()=>{this.bt.grantReplayAnonymizationConsent()}),this.E.register(pS,()=>{this.bt.withdrawReplayAnonymizationConsent()}),this.E.register(fS,()=>{this.rm.grantReplayConsent()}),this.E.register(gS,()=>{this.rm.withdrawReplayConsent()})}onOptout(){this.bt.removeAllConsents()}onBeforeVisitorRenewal(){this.bt.removeAllConsents()}onAfterVisitorRenewal(){this.bt.setInitialConsent()}onAfterVisitorCleared(){this.bt.setInitialConsent()}}return s})(),yS=(()=>{class s{constructor(t,e,i){this.f=t,this.ft=e,this.S=i}setInitialConsent(){let t=this.ft.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.f.consentRequired;return e&&t===us.NOT_REQUIRED||!e&&t!==us.NOT_REQUIRED}handleSubdomainChange(){this.ft.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.f.consentRequired?us.NOT_EXPRESSED:us.NOT_REQUIRED;this.ft.set(t)}grantReplayAnonymizationConsent(){this.f.consentRequired&&(this.ft.set(us.GRANTED),this.S.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.f.consentRequired&&(this.ft.set(us.WITHDRAWN),this.S.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.ft.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.f.consentRequired||this.ft.get()===us.GRANTED}getRequestParameters(){return{uc:`${this.ft.get()}`}}}return s})(),ES=(()=>{class s{constructor(t,e,i,n,o,c,l){this.S=t,this.E=e,this.Kh=i,this.Jh=n,this.ei=o,this.a0=c,this.Qn=l}start(){this.S.addListener(this.a0),this.S.addListener(this.Qn),this.S.addListener(this.Kh),this.Qn.init(),this.Jh.init(),this.ei.init(),!this.ei.isActive()&&this.E.start()}}return s})(),SS=(()=>{class s{constructor(t,e){this.Ot=t,this.ft=e}exclude(t){this.ft.set(csString(t.lastTrackingDraw))}removeExclusion(){this.ft.remove()}isExcluded(){return this.c0()||this.l0()}c0(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.ft.get()}l0(){return csString.prototype.indexOf.call(this.Ot.href,Te)>0}}return s})(),vS=(()=>{class s{constructor(t){this.Mi=t}onOptout(){this.Mi.removeExclusion()}}return s})(),Zr=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),_S=".^",kl=".*",wS=(()=>{class s{constructor(t){this.w=t,this.ou=new csRegExp(`${_S}`)}setExcludeUrlForSessionReplay(t){try{this.ou=new csRegExp(t)}catch{H.warn(`excludeURLforReplay - invalid regex '${t}'`),this.ou=new csRegExp(`${kl}`)}}nm(){return this.ou.test(this.w.getAnonymizedUrl())?Zr.SessionReplay:Zr.None}isUrlExcludedForSessionReplay(){return this.nm()===Zr.SessionReplay}getRequestParameters(){return{ex:this.nm()}}}return s})(),Dl=["excludeURLforReplay"],bS=(()=>{class s{constructor(t,e){this.Mi=t,this.E=e}init(){this.E.register(Dl,t=>{if(R(t))this.Mi.setExcludeUrlForSessionReplay(t);else throw new Error("Command misuse: excludeURLforReplay")})}}return s})(),tn="_cs_inc",TS=(()=>{class s{constructor(t,e){this.Ot=t,this.M=e}isForceIncluded(){return this.h0()||this.u0()}isForceReplayRecorded(){return this.d0(V.RECORDING_GLOBAL_SAMPLING)}h0(){return this.M.get(tn)!==null}d0(t){return this.M.get(tn)===t}u0(){return csString.prototype.indexOf.call(this.Ot.href,tn)>0}}return s})(),ii="_cs_optout",AS=(()=>{class s{constructor(t,e,i){this.f=t,this.M=e,this.At=i}get(){return this.f.cookielessTrackingEnabled?this.At.getItem(ii):this.M.get(ii)}set(t){this.f.cookielessTrackingEnabled?this.At.setItem(ii,t):this.M.set(ii,t,Un)}}return s})(),Za="1",RS=(()=>{class s{constructor(t,e,i){this.S=t,this.Ot=e,this.ft=i}init(){!this.isActive()&&this.p0()&&this.activate()}isActive(){return this.ft.get()===Za}activate(){this.S.emitOptout(),this.ft.set(Za)}p0(){return csString.prototype.indexOf.call(this.Ot.href,ii)>0}}return s})(),CS=["optout"];var IS=(()=>{class s{constructor(t,e){this.E=t,this.ei=e}init(){this.E.register(CS,()=>{this.ei.activate()})}}return s})();var PS=(()=>{class s{constructor(t,e){this.E=t,this.gt=e}init(){this.gt.addListener(this.E)}onOptout(){this.E.stop()}onBeforeSessionRenewal(){this.E.stop()}}return s})();var OS=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),NS=(()=>{class s extends Lt{constructor(t){super(),this.au=t,this.cs={}}register(t,e,i){for(let n of t){let o=(...c)=>{try{let l=e(...c);return G.counters.commandApplied.count(n),l}catch(l){G.counters.commandMisuse.count(n),H.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${es(l)?l.stack:l}`)}};this.cs[n]={callback:o,configuration:i},this.cs}}onStart(){this.g0(),this.m0()}onStop(){for(let t of this.au)window[t]=[]}applyFromIntegration(t,e,i){this.om(t,e,`Commands.apply.from.integration: ${i}`),G.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.om(t,e,`Commands.apply.from.implementation: ${i}`),G.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.y0(e.name,e.params,t.iframePath),G.counters.commandsFromIframe.count(e.name)}om(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}H.tryToExecute(i,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}y0(t,e,i){H.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}g0(){for(let t of this.au)window[t].forEach(([e,...i])=>this.am(e,i,!1))}m0(){for(let t of this.au)window[t]={push:([e,...i])=>this.am(e,i,!0)}}am(t,e,i){var n,o;if(this.cs[t]){if(((n=this.cs[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((o=this.cs[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.cs[t].callback(...e)}catch(l){G.counters.commandError.count(t),H.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})();var tc=(()=>{class s{constructor(t,e,i,n,o){this.f=t,this.O=e,this.R=i,this.ym=n,this.ni=o}getRequestParameters(){var t;let e={...Xn(),...this.f.getRequestParameters()},i=this.R.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.O.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.ym)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.ym.getSubProjectId()}`),this.b0(e),window.heap&&!this.f.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}b0(t){if(!this.ni)return;let e=this.ni.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})(),MS=(()=>{class s{constructor(t,e){this.E=t,this.hs=e}init(){this.E.register(["debugEvents"],t=>{typeof t=="boolean"&&this.hs.updateDynamicFields("emitDebugEvents",t)})}}return s})();function ec(s,r,t){if(!Y(r)&&!Y(t))return s.href;let e=Y(r)?xl(r):s.pathname,i=Y(t)?Ll(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function xl(s){return bt(s,"/")?s:`/${s}`}function Ll(s){return bt(s,"?")||s===""?s:`?${s}`}var en=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),kS=(()=>{class s{constructor(t,e){this.Ot=t,this.tt=e,this.T0=10}overridePath(t,e){if(t===""){this.Pr=void 0;return}let i=this.Em(e);i&&(this.du=i),this.Pr=e?this.Sm(t,e):t}overrideQuery(t,e){let i=this.Em(e);i&&(this.pu=i),this.io=e?this.Sm(t,e):t}computeOverriddenUrl(t){return this.A0(t)?this.getAnonymizedUrl():t}R0(t){return(typeof t=="string"||typeof t=="number")&&t in en}A0(t){let e=this.Io(this.Ot.href);return this.Io(t)===e}Io(t){return jd(t,"/")?csString.prototype.slice.call(t,0,-1):t}Em(t){return Y(t==null?void 0:t.lifespan)&&this.R0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}C0(){return this.du&&this.du in en}I0(){return this.pu&&this.pu in en}cleanupOverrideLifespan(){this.C0()&&(this.Pr=void 0,this.du=void 0),this.I0()&&(this.io=void 0,this.pu=void 0)}getAnonymizedUrl(){let t=ec(this.Ot,this.Pr,this.io);return this.tt.anonymizeUrl(t)}getUrl(){return ec(this.Ot,this.Pr,this.io)}getAnonymizedPathAndQuery(){let t=Y(this.Pr)?xl(this.Pr):this.Ot.pathname,e=Y(this.io)?Ll(this.io):this.Ot.search;return this.tt.anonymizeUrl(t+e)}getUrlProtocol(){return this.Ot.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}Sm(t,e){return this.P0(e)?this.O0(t):this.N0(e)?this.M0(t):t}N0(t){return!!t.decodeURI}M0(t){return this.vm(t,1,!1)}P0(t){return!!t.decodeURIDeep}O0(t){return this.vm(t,this.T0,!0)}vm(t,e,i){let n=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&H.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),mo=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),DS=(()=>{class s extends mo{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:z.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),hi="|iframe|",xS=(()=>{class s extends mo{constructor(t,e,i,n){super(),this.k0=t,this.D0=e,this.x0=i,this.L0=n}emitIframeEvent(t,e,i){if(this.V0(e)&&t===null){H.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case Pt.ChildLogMessage:this.U0(i);break;case Pt.AnalysisEvent:{let n=i,o=this.k0.transformEvent(t,n);o.isUserEvent?this.j0(o.event):this.H0(o.event);break}case Pt.RecordingEvent:{let n=i,o=this.L0.transformEvents(t,n);if(o.events.length===0)return;o.containsUserEvent?this.B0(o.events):this.F0(o.events);break}case Pt.JavascriptError:this.$0(i);break;case Pt.ApiError:this.z0(i);break;case Pt.DetailedApiError:this.G0(i);break;case Pt.CustomError:this.q0(i);break;case Pt.EmerchandisingMessage:{let n=this.x0.transformEvent(t,i);this.W0(n);break}case Pt.Commands:{let n=this.D0.transformEvent(t,i);this.Y0(n);break}case Pt.IntegrationCallback:this.X0(i);break;case Pt.StaticResource:this.K0(i);break;case Pt.TrackingContextRequestMessage:this.J0(i);break;default:H.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}V0(t){let e=[Pt.AnalysisEvent,Pt.RecordingEvent,Pt.EmerchandisingMessage,Pt.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}U0(t){let{message:e,errorCode:i,level:n}=t;switch(n){case ut.debug:H.debug(e,i);break;case ut.warn:H.warn(e,!0,i);break;case ut.implementation:H.implementation(e,i);break;case ut.error:H.error(e,i);break;case ut.critical:H.critical(e,i);break}}j0(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}H0(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}B0(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}F0(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}$0(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}z0(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}G0(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}W0(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}Y0(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}X0(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}K0(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}J0(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}q0(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),LS=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),yo=["setCustomVariable"],VS=(()=>{class s{constructor(t,e){this.E=t,this.vt=e}init(){this.E.register(yo,(t,e,i,n)=>{this.vt.set(t,e,i,n)})}onAfterArtificialPageView(){this.vt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.vt.deleteNextPageOnlyCustomVariables()}onOptout(){this.vt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.vt.removeCustomVariablesSession(),this.vt.removeCustomVariablesPage()}}return s})(),sc=512,ic=255,sn={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},US=(()=>{class s{constructor(t,e){this.N=t,this.ft=e,this.Yt={},this.Be={}}set(t,e,i,n){let o,c;if((Et(t)||R(t))&&Number(t)>0&&gt(e)&&gt(i)&&!pe(e)&&!pe(i)&&this.Q0(n)){let l=this.N.anonymizePII(csString(e)),h=this.N.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,sc),csString.prototype.slice.call(h,0,ic)],c=i!=="",!Y(n)||csArray.prototype.indexOf.call(sn.SESSION,n)>=0){let m=this.getCustomVariablesSession();c?m[t]=o:delete m[t],this.setCustomVariableSession(m)}(!Y(n)||csArray.prototype.indexOf.call(sn.PAGE,n)>=0)&&(c?this.Yt[t]=o:delete this.Yt[t]),Y(n)&&csArray.prototype.indexOf.call(sn.NEXT_PAGE_ONLY,n)>=0&&(c?this.Be[t]=o:delete this.Be[t])}else throw new Error(`Command misuse: ${yo[0]}`)}getCustomVariablesSession(){let t=this.ft.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&gs(e)?e:{}}setCustomVariableSession(t){this.ft.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.ft.remove()}removeCustomVariablesPage(){this.Yt={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.Be)this.Be.hasOwnProperty(i)&&(this.Yt[i]=this.Be[i]);for(let i in this.Yt)this.Yt.hasOwnProperty(i)&&(t[i]=this.Yt[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this._m(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.Be).length>0)for(let t in this.Be)this.Be[t]===this.Yt[t]&&(delete this.Yt[t],delete this.Be[t])}hasCustomVariablesPage(){return this.Yt&&!on(this.Yt)}getCustomVariablesPage(){return this._m(this.Yt)}wm(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],o=n[0],c=n[1];(!mu(i,1,20)||o.length>sc||c.length>ic)&&delete t[e]}}_m(t){this.wm(t);let e=on(t)?[]:t;return window.csJSON.stringify(e)}Q0(t){return!Y(t)||R(t)||Et(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.Be)this.Be.hasOwnProperty(e)&&(this.Yt[e]=this.Be[e]);for(let e in this.Yt)this.Yt.hasOwnProperty(e)&&(t[e]=this.Yt[e]);return this.wm(t),t}}return s})(),ce="_cs_id",jS=(()=>{class s{constructor(t,e,i){this.f=t,this.M=e,this.K=i}onCookieToSet(t){this.gi=t}onCookieToRemove(t){this.mi=t}get(){let t;return this.f.cookielessTrackingEnabled?t=this.K.getItem(ce):t=this.M.get(ce),t?(Rp(t)||H.warn(`Invalid visitor string: ${t}`),Tp(t)):null}set(t){var e;let i=Ap(t);if(this.f.cookielessTrackingEnabled)this.K.setItem(ce,i);else{let n=new csDate(t.expires);this.M.set(ce,i,n),(e=this.gi)===null||e===void 0||e.call(this,ce,i,n)}}remove(){var t;this.f.cookielessTrackingEnabled?this.K.removeItem(ce):(this.M.delete(ce),(t=this.mi)===null||t===void 0||t.call(this,ce))}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.f.allowSubdomains,this.f.allowSubdomains?this.M.delete(ce,mr.CURRENT_DOMAIN):this.M.delete(ce,this.M.getRootDomain()),this.set(t))}}return s})(),HS=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],BS=1024,FS=1024,$S=(()=>{class s{constructor(t,e){this.mt=t,this.f=e}getEventTargetPathAndHierarchy(t,e){let i=Tt(t),n={isNodeSensitive(o){return x.isMaskedElement(o)||x.isMaskedElementChild(o)},isAttributeSensitive(o,c){return x.isMaskedAttribute(o,c)},allWhitelistedAttributes:Pc(this.f.whitelistedAttributes),attributeIgnoreTokens:HS,useAnonymization:e,attrMaxLength:FS,hierarchyMaxLength:BS};return this.mt.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPath(t){let e=Tt(t);return this.mt.getElementPath(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=Tt(t),{path:i,firstAnchorParent:n}=this.mt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules}),o=this.Z0(n)?n.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=Tt(t);return this.mt.isValidElement(e)}getElementPath(t){return this.mt.getElementPath(t,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}Z0(t){var e;return t!==null&&t.hasAttribute("href")&&!cr((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),zS=(()=>{class s{constructor(t,e){this.Q=t,this.tR=e}transformEvent(t,e){this.eR(t,e.event);let i=this.Q.getElementPath(t);return this.sR(i,e.event),e}eR(t,e){if(sg(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+wt.windowOffsetX()),e.y=Math.round(i.top+e.y+wt.windowOffsetY())}}sR(t,e){el(e)&&(e.tgt=`${t}${hi}${e.tgt}`),tg(e)&&(e.tgtHM=`${t}${hi}${e.tgtHM}`,this.tR||(e.tgtHMH=hl(e.tgtHM))),eg(e)&&(e.tgtLk=`${t}${hi}${e.tgtLk}`)}}return s})(),GS=(()=>{class s{constructor(t){this.Q=t}transformEvent(t,e){let i=this.Q.getElementPath(t);return{iframePath:e.iframePath?`${i}${hi}${e.iframePath}`:i,commands:e.commands}}}return s})(),qS=(()=>{class s{constructor(t){this.Q=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.Q.getElementPath(t),n=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${hi}${o.targetPath}`}));return{...e,products:n}}}return s})(),WS=(()=>{class s{constructor(){this.iR={clientX:2,clientY:3},this.rR={clientX:1,clientY:2},this.nR=[L.POINTER_DOWN,L.POINTER_MOVE,L.POINTER_UP],this.oR=[L.TOUCH_START,L.TOUCH_MOVE,L.TOUCH_END]}transformEvents(t,e){if(!rt.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==L.VISIBILITY_CHANGE),e.events.length===0||(H.warn(`IframeRecordingEventsTransformer received event ${Pt.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=it(t),n=null;csArray.prototype.some.call(e.events,c=>this.bm(c)||this.Tm(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this.bm(c)?this.aR(n,c):this.Tm(c)&&this.cR(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}cR(t,e){this.Am(this.rR,t,e)}aR(t,e){this.Am(this.iR,t,e)}Am(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}bm(t){return csArray.prototype.indexOf.call(this.nR,t.type)!==-1}Tm(t){return csArray.prototype.indexOf.call(this.oR,t.type)!==-1}}return s})(),YS=(()=>{class s{constructor(t){this.fu=t}start(){this.fu.onEvent(t=>this.J(t)),this.fu.start()}stop(){this.fu.stop()}J(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;H.warn(e)}}return s})(),XS=(()=>{class s{constructor(){this.$t={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){pt(this.$t)}stop(){ft(this.$t)}onEvent(t){this.L=t}lR(t){if(!t)return!1;let e=t.disposition;return R(t.sourceFile)&&csArray.prototype.some.call(s.hR,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.lR(t)&&this.L({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.hR=["contentsquare","cdnssl.clicktale.net"],j([I("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),KS=(()=>{class s{init(){this.Rm=new YS(new XS),this.Rm.start()}onOptout(){this.Rm.stop()}}return s})();var rc=1/0,{toString:JS}=Object.prototype;function QS(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":JS.call(s)}var Eo=s=>typeof s=="symbol"||typeof s=="object"&&s!=null&&QS(s)==="[object Symbol]";function Vl(s){if(typeof s=="string"||Eo(s))return s;let r=`${s}`;return typeof s=="number"?r==="0"&&1/s===-rc?"-0":r:s instanceof Number&&r==="0"&&1/s.valueOf()===-rc?"-0":r}var ZS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tv=/^\w*$/;function ev(s,r){return csArray.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||Eo(s)?!0:tv.test(s)||!ZS.test(s)||r!=null&&s in Object(r)}function So(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let o=s.apply(this,e);return t.cache=n.set(i,o)||n,o};return t.cache=new(So.Cache||Map),t}So.Cache=Map;var sv=500;function iv(s){let r=So(s,t=>{let{cache:e}=r;return e.size===sv&&e.clear(),t});return r}var rv=46,nv=/\\(\\)?/g,ov=csRegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Ul=iv(s=>{let r=[];return csString.prototype.charCodeAt.call(s,0)===rv&&csArray.prototype.push.call(r,""),csString.prototype.replace.call(s,ov,(t,e,i,n)=>{let o=t;return i?o=csString.prototype.replace.call(n,nv,"$1"):e&&(o=csString.prototype.trim.call(e)),csArray.prototype.push.call(r,o),t}),r});function av(s,r){return csArray.isArray(s)?s:ev(s,r)?[s]:Ul(s)}function cv(s,r){let t=av(r,s),e=s,i=0,{length:n}=t;for(;e!=null&&i<n;){let o=Vl(t[i]);e=e[o],i+=1}return i&&i===n?e:void 0}function lv(s){return"iterable"in s}function jl(s){return Y(s.iterable)?R(s.iterable)||s.iterable===null:!0}function Hl(s,r,t){let e=s==null?void 0:cv(s,r);return e===void 0?t:e}var hv=/\b__p \+= '';/g,uv=/\b(__p \+=) '' \+/g,dv=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pv=/['\n\r\u2028\u2029\\]/g,Bl=/[&<>"']/g,fv=csRegExp(Bl.source),gv=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wi=/($^)/,mv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},yv=/[()=,{}[\]/\s]/,Ev=/<%-([\s\S]+?)%>/g,Sv=/<%([\s\S]+?)%>/g,Fl=/<%=([\s\S]+?)%>/g,{hasOwnProperty:nc}=Object.prototype,vv="Invalid `variable` option passed into `_.template`";function _v(s){return`\\${mv[s]}`}var wv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bv={escape:Ev,evaluate:Sv,interpolate:Fl,variable:"",imports:{_:{template:Zi,escape(s){return s&&fv.test(s)?csString.prototype.replace.call(s,Bl,r=>wv[r]):s!=null?s:""}}}};function Zi(s,r){let t={...bv,...r},e=Object.keys(t.imports||{}),i=csArray.prototype.map.call(e,S=>t==null?void 0:t.imports[S]),n,o,c=0,l=t.interpolate||Wi,h="__p += '",m=csRegExp(`${(t.escape||Wi).source}|${l.source}|${(l===Fl?gv:Wi).source}|${(t.evaluate||Wi).source}|$`,"g"),d=`//# sourceURL=${nc.call(t,"sourceURL")?csString.prototype.replace.call(`${t.sourceURL}`,/\s/g," "):void 0}
`;s==null||csString.prototype.replace.call(s,m,(S,P,N,v,_,M)=>{let k=N||v;return h+=csString.prototype.replace.call(csString.prototype.slice.call(s,c,M),pv,_v),P&&(n=!0,h+=`' +
__e(${P}) +
'`),_&&(o=!0,h+=`';
${_};
__p += '`),k&&(h+=`' +
((__t = (${k})) == null ? '' : __t) +
'`),c=M+S.length,S}),h+=`';
`;let E=nc.call(t,"variable")&&t.variable;if(!E)h=`with (obj) {
${h}
}
`;else if(yv.test(E))throw new Error(vv);h=csString.prototype.replace.call(csString.prototype.replace.call(o?csString.prototype.replace.call(h,hv,""):h,uv,"$1"),dv,"$1;"),h=`function(${E||"obj"}) {
${E?"":`obj || (obj = {});
`}var __t, __p = ''${n?", __e = _.escape":""}${o?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`}${h}return __p
}`;let g;try{g=Function(...e,`${d}return ${h}`)(...i)}catch(S){g=S}if(g.source=h,g instanceof Error)throw g;return g}var Tv=/^(\s*("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\s*,?)+$/,Av=/<%[\s\S]+?%>|<%-[\s\S]+?%>|<%=[\s\S]+?%>|\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/,Rv=/^document\.querySelector\(("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\)\.(textContent|value)$/;function oc(s){if(!Tv.test(s)||Av.test(s))throw new Error("whitelisted function is wrongly used")}var ac={"window.location.hash.replace(":(s,r)=>{let t=csString.prototype.substring.call(s,29,s.length-1);return oc(t),Zi(`\${${s}}`)(r)},"window.sessionStorage.getItem(":(s,r)=>{let t=csString.prototype.substring.call(s,30,s.length-1);return oc(t),Zi(`\${${s}}`)(r)},"document.querySelector(":(s,r)=>{if(Rv.test(s))return Zi(`\${${s}}`)(r)},"new Date().getTime()":(s,r)=>new csDate().getTime().toString()};function Cv(s){let r=he(Object.keys(ac),t=>bt(s,t));if(r)return ac[r]}function Iv(s){return bt(s,"'")&&Fs(s,"'")}var Pv=/\$\{([\s\S]+?)\}/g,Ov=s=>(r,t,e)=>{let i="";return csArray.prototype.forEach.call(csString.prototype.split.call(t,"+"),n=>{let o=csString.prototype.trim.call(n),c=Hl(s,o);if(c===void 0)if(Iv(o))c=csString.prototype.substring.call(o,1,o.length-1);else{let l=Cv(o);if(l&&(c=l(o,s)),c===void 0)throw new Error("undefined not allowed")}i+=c}),i};function Bs(s,r){try{return csString.prototype.replace.call(s,Pv,Ov(r))}catch{return null}}function kn(s,r){let t={};for(let e of Object.keys(s)){let i=s[e];if(R(i)){let n=Bs(i,r);if(n===null)return null;t[e]=n}else t[e]=i}return t}function Dn(s,r){let t=csArray.prototype.join.call(csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(s,","),e=>Bs(e,r)),e=>e!==null&&Nt(e)),",");return Nt(t)?t:null}function Nv(s){return csArray.isArray(s)?csArray.prototype.map.call(s,Vl):Eo(s)?[s]:csArray.from(Ul(s))}function Mv(s,r){try{let e=/^values\(([a-zA-Z0-9_$[\].]+)\)\[\?([a-zA-Z0-9_$]+)\]$/.exec(s);if(!e)return null;let i=e[1],n=e[2],o=Hl(r,Nv(i));if(typeof o!="object"||o===null)return null;let c=[];return csArray.prototype.forEach.call(Object.keys(o),l=>{let h=o[l];typeof h=="object"&&h!==null&&!csArray.isArray(h)&&n in h&&csArray.prototype.push.call(c,h)}),c}catch{return null}}function kv(s,r){let e=/^\[([0-9]+):([0-9+])\]$/.exec(s);if(!e)return null;let i=parseInt(e[1],10),n=parseInt(e[2],10);return n<=i||n>r.length?null:csArray.prototype.slice.call(r,i,n)}function Dv(s,r){let t=csString.prototype.split.call(s,"|");if(t.length>2)return null;let e=Mv(csString.prototype.trim.call(t[0]),r);return t.length===2?e===null?null:kv(csString.prototype.trim.call(t[1]),e):e}var rn=(()=>{let s;return function(r){r.AND="AND",r.OR="OR"}(s||(s={})),s})(),re=(()=>{let s;return function(r){r.STARTS_WITH="startsWith",r.EQUALS="equals",r.NOT_EQUALS="notEquals",r.CONTAINS="contains",r.NOT_CONTAINS="notContains",r.MATCHES="matches",r.NOT_MATCHES="notMatches",r.EXIST="exist",r.NOT_EXIST="notExist"}(s||(s={})),s})();function $l(s,r){return xv(s.operator,jv(s.args,r))}function xv(s,r){switch(s){case re.EXIST:case re.NOT_EXIST:return Lv(s,r);default:return Vv(s,r)}}function Lv(s,r){let[t]=r;if(!Nt(t))return!1;switch(s){case re.EXIST:return window.csquerySelector[document.nodeType].call(document,t)!==null;case re.NOT_EXIST:return window.csquerySelector[document.nodeType].call(document,t)===null;default:return!1}}function Vv(s,r){let[t,e]=r;if(!(s in rn)&&!(R(t)&&R(e)))return!1;switch(s){case rn.AND:return!!csArray.prototype.reduce.call(r,(n,o)=>n&&o);case rn.OR:return!!csArray.prototype.reduce.call(r,(n,o)=>n||o);case re.STARTS_WITH:return bt(t,e);case re.EQUALS:return t===e;case re.NOT_EQUALS:return t!==e;case re.CONTAINS:return csString.prototype.indexOf.call(t,e)>-1;case re.NOT_CONTAINS:return csString.prototype.indexOf.call(t,e)===-1;case re.MATCHES:{let n=cc(e);return n!==null&&n.test(t)}case re.NOT_MATCHES:{let n=cc(e);return n!==null&&!n.test(t)}default:return!1}}function Uv(s){return!!(s&&s.operator&&s.args)}function jv(s,r){return csArray.prototype.map.call(s,t=>Uv(t)?$l(t,r):R(t)?Bs(t,r):t)}function cc(s){let r=/^\/(.*)\/([gimy]*)$/.exec(s),t=null;if(r){let[,e,i]=r;try{t=new csRegExp(e,i)}catch{}}else try{t=new csRegExp(s)}catch{}return t}function vo(s){switch(s){case"no decoding":return null;case"decode once":return{decodeURI:!0};case"decode multiple times":return{decodeURIDeep:!0};default:return null}}function _o(s){switch(s==null?void 0:s[0]){case"on next pageview only":return{lifespan:"onNextPageviewOnly"};default:return null}}var St=(()=>{class s{constructor(t,e){this.commandsService=t,this.args=e}}return s})(),Ii=(()=>{class s extends St{}return s})(),zl=(()=>{class s extends St{validateArgs(t){if(W(t)){let e=Y(t.path)?R(t.path):!0,i=Y(t.decodeURI)?R(t.decodeURI):!0,n=Y(t.lifespan)?csArray.isArray(t.lifespan):!0;return e&&i&&n}return!1}execute(t){if(!t.path)this.ro([]);else{let e=[t.path],i=vo(t.decodeURI),n=_o(t.lifespan),o={...i,...n};Object.keys(o).length&&e.push(o),this.ro(e)}}ro(t){this.commandsService.applyFromImplementation(yl[0],t,"ArtificialPageviewTemplate")}}return s})(),Hv=(()=>{class s extends Ii{validateArgs(t){return W(t)?R(t.message)&&csArray.isArray(t.attributes):!1}execute(t,e){let i=Bs(t.message,e);if(!i)return;let n={};for(let o of t.attributes){let c=Bs(o.value,e);c!==null&&(n[o.key]=c)}this.commandsService.applyFromImplementation(pl[0],[i,n],"CustomErrorTemplate")}}return s})(),Bv=(()=>{class s extends St{validateArgs(t){if(W(t)){let e=jl(t),i=csArray.isArray(t.scope)?Bn(t.scope,n=>R(n)):!0;return e&&i&&Et(t.index)&&R(t.name)&&R(t.value)}return!1}execute(t){this.commandsService.applyFromImplementation(yo[0],[t.index,t.name,t.value,t.scope[0]],"CustomVariableTemplate")}}return s})(),Fv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.selector):!1}execute(t){this.commandsService.applyFromImplementation(Il[0],[t.selector],"DataCsEncryptTemplate")}}return s})(),$v="data-cs-override-id",zv=(()=>{class s extends St{validateArgs(t){if(W(t)){let e=gt(t.value)?R(t.value):!0;return R(t.selector)&&e}return!1}execute(t){var e;if(!Nt(t.selector))return;let i=window.csquerySelector[document.nodeType].call(document,t.selector);i&&i.setAttribute($v,(e=t.value)!==null&&e!==void 0?e:"")}}return s})(),Gv=20,qv=(()=>{class s extends Ii{validateArgs(t){return W(t)?jl(t)&&R(t.key)&&R(t.value)&&R(t.type):!1}execute(t,e){let i=kn(t,e);i!==null?this.ro(i):this.dR(t,e)()}dR(t,e){return()=>{let i=0,n=window.csSetInterval(()=>{i+=1;let o=kn(t,e);if(o!==null){window.csClearInterval(n),n=void 0,i=0,this.ro(o);return}i>=Gv&&(window.csClearInterval(n),n=void 0,i=0)},100)}}ro(t){let e=t.value;if(t.type==="Integer"){let i=Number.parseInt(t.value,10);Number.isNaN(i)||(e=i)}this.commandsService.applyFromImplementation(ro[0],[{key:t.key,value:e}],"DynamicVariableTemplate")}}return s})(),Wv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.transactionId)&&Et(t.revenue)&&R(t.currency)&&R(t.name)&&R(t.sku)&&R(t.category)&&Et(t.price)&&Et(t.quantity):!1}execute(t){this.pR({id:t.transactionId,revenue:t.revenue,currency:t.currency}),this.fR({id:t.transactionId,name:t.name,sku:t.sku,category:t.category,price:t.price,quantity:t.quantity}),this.Ga()}pR(t){this.commandsService.applyFromImplementation(no[0],[t],"EcTransactionAllTemplate")}fR(t){this.commandsService.applyFromImplementation(br[0],[t],"EcTransactionAllTemplate")}Ga(){this.commandsService.applyFromImplementation(oo[0],[],"EcTransactionAllTemplate")}}return s})(),Yv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.id)&&Et(t.revenue)&&R(t.currency):!1}execute(t){this.commandsService.applyFromImplementation(no[0],[t],"EcTransactionCreateTemplate")}}return s})(),Xv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.id)&&R(t.name)&&R(t.sku)&&R(t.category)&&Et(t.price)&&Et(t.quantity):!1}execute(t){this.commandsService.applyFromImplementation(br[0],[t],"EcTransactionItemsAddTemplate")}}return s})(),Kv=(()=>{class s extends St{validateArgs(t){return!!W(t)}execute(){this.commandsService.applyFromImplementation(oo[0],[],"EcTransactionSendTemplate")}}return s})(),Jv=(()=>{class s extends Ii{validateArgs(t){return W(t)?gt(t)&&R(t.selector):!1}execute(t,e){if(!gt(t)||!R(t==null?void 0:t.selector))return;let i=Dn(t.selector,e);i!==null&&this.commandsService.applyFromImplementation(Pl[0],[i],"ElementUnmaskingTemplate")}}return s})(),Qv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Ri[0],[`@ETP@${t.eventName}`],"EventTriggerRecordingPageTemplate")}}return s})(),Zv=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Ri[0],[`@ETS@${t.eventName}`],"EventTriggerRecordingSessionTemplate")}}return s})(),t_=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(co[0],[t.eventName],"PageEventTemplate")}}return s})(),e_=(()=>{class s extends Ii{validateArgs(t){if(W(t)){let e=csArray.isArray(t.cssSelectors),i=csArray.isArray(t.attributes);return e&&i}return!1}execute(t,e){let i=csArray.prototype.filter.call(csArray.prototype.map.call(t.cssSelectors,c=>Dn(c,e)),c=>!!c),n=csArray.prototype.filter.call(csArray.prototype.map.call(t.attributes,c=>{let l=Bs(c.attrName,e),h=Dn(c.selector,e);return{attrName:l,selector:h}}),c=>!!c.attrName&&!!c.selector),o={PIISelectors:[...i],Attributes:[...n]};this.commandsService.applyFromImplementation(fo[0],[o],"PIIMaskingTemplate")}}return s})(),s_=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Ri[0],[`${t.eventName}`],"RecordingEventTriggerTemplate")}}return s})(),i_=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.path):!1}execute(t){let e=[t.path],i=vo(t.decodeURI),n=_o(t.lifespan),o={...i,...n};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(In[0],e,"SetPathTemplate")}}return s})(),r_=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.query):!1}execute(t){let e=[t.query],i=vo(t.decodeURI),n=_o(t.lifespan),o={...i,...n};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(Pn[0],e,"SetQueryTemplate")}}return s})(),n_=(()=>{class s extends St{validateArgs(t){return!!W(t)}execute(){this.commandsService.applyFromImplementation(Rl[0],[],"SrmOnlineAssetsTemplate")}}return s})(),o_=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.status)&&R(t.selector):!1}execute(t){if(!Nt(t.selector))return;let e=window.csquerySelector[document.nodeType].call(document,t.selector);e&&this.commandsService.applyFromImplementation(io[0],[t.status,e],"SubmitTemplate")}}return s})(),Wt=(()=>{class s{onEvent(t){this.onEventCallback=t}constructor(t,e,i){this.commandsService=t,this.condition=i,this.isStarted=!1,this.Cm=!1,this.args=e}start(){this.Cm||(this.onInit(),this.Cm=!0),this.isStarted||(this.onStart(),this.isStarted=!0)}stop(){this.isStarted&&(this.onStop(),this.isStarted=!1)}}return j([I()],s.prototype,"start",null),j([I()],s.prototype,"stop",null),s})(),lc="once per pageview",a_="always",c_=(()=>{class s extends Wt{constructor(){super(...arguments),this.St=!0}validateArgs(t){if(W(t)){let e=R(t.selector),i=t.frequency?t.frequency===lc||t.frequency===a_:!0;return e&&i}return!1}onInit(){if(!Nt(this.args.selector)){this.St=!1;return}this.no=this.args.frequency?this.args.frequency===lc:!0,this.G=new ne((t,e)=>this.A(t,e))}onStart(){this.St&&this.G.observe(this.args.selector)}onStop(){this.St&&(this.G.processPendingMutations(),this.G.disconnect())}A(t,e){e==="added"&&(this.no?(this.stop(),this.onEventCallback({element:t[0]})):new Set(t).forEach(i=>this.onEventCallback({element:i})))}}return s})(),l_=(()=>{class s extends Wt{constructor(){super(...arguments),this.St=!0,this.Im=!1}validateArgs(t){return W(t)?R(t.selector):!1}onInit(){if(!Nt(this.args.selector)){this.St=!1;return}this.G=new ne((t,e)=>{this.A(t,e)})}onStart(){this.St&&(this.G.observe(this.args.selector),this.Im=!0)}onStop(){this.St&&(this.G.processPendingMutations(),this.G.disconnect())}A(t,e){this.Im?e==="added"&&new Set(t).forEach(i=>this.onEventCallback({element:i})):this.onEventCallback({element:t[0]})}}return s})(),h_=(()=>{class s extends Wt{constructor(){super(...arguments),this.St=!0}validateArgs(t){return W(t)?R(t.selector):!1}onInit(){if(!Nt(this.args.selector)){this.St=!1;return}this.B=new ne(t=>this.gR(t)),this.D=new ye(t=>this.mR(t))}onStart(){this.St&&(this.qa=csSymbol("MatchingElement"),this.B.observe(this.args.selector),this.D.observe())}onStop(){this.St&&(this.B.processPendingMutations(),this.B.disconnect(),this.D.disconnect())}gR(t){new Set(t).forEach(e=>this.yR(e))}mR(t){let e=Hn(t,n=>n.removedNodes),i=[];for(let n of e)csArray.prototype.push.call(i,...this.ER(n));new Set(i).forEach(n=>this.onEventCallback({element:n}))}yR(t){t[this.qa]=!0}ER(t){let e=[];return ee(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{i[this.qa]&&(rt.isConnected(i)?qt.call(i,this.args.selector)||delete i[this.qa]:delete i[this.qa],csArray.prototype.push.call(e,i))}),e}}return s})(),u_=(()=>{class s{static readyStateChangeListener(t){csArray.prototype.forEach.call(is(s.callbacks),e=>e(t))}static Eh(t){s.callbacks.has(t)||(s.callbacks.add(t),s.callbacks.size===1&&pt(s.eventHandler,!1))}static Sh(t){s.callbacks.delete(t),s.callbacks.size===0&&ft(s.eventHandler,!1)}constructor(t){this.A=t}observe(){s.Eh(this.A)}disconnect(){s.Sh(this.A)}}return s.callbacks=new Set,s.eventHandler={boundElement:Z.document,type:"readystatechange",listener:s.readyStateChangeListener},tt([I("readyStateChangeListener"),ot()],s,"readyStateChangeListener",null),s})(),d_=(()=>{class s extends Wt{constructor(){super(...arguments),this.mu={state:"Any"}}validateArgs(t){var e;return W(t)&&R(t.state)||(H.implementation(`PageStateTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.state}, fallback to default config.`),this.args=this.mu),!0}onInit(){this.Pt=this.args.state.toLowerCase(),this.G=new u_(()=>{this.Pm(this.Pt,document.readyState)&&(this.onEventCallback(),this.G.disconnect())})}onStart(){this.Pm(this.Pt,document.readyState)?this.onEventCallback():this.G.observe()}onStop(){this.G.disconnect()}Pm(t,e){let i=s.Om[e];return s.Om[t]<=i}}return s.Om={complete:3,interactive:2,loading:1,any:0},s})(),p_=(()=>{class s extends Wt{validateArgs(t){return!!W(t)}SR(){this.isStarted&&this.onEventCallback()}onInit(){this.commandsService.applyFromImplementation(ml[0],[()=>this.SR()],"AfterPageViewTrigger")}onStart(){}onStop(){}}return s})(),f_=(()=>{class s extends Wt{constructor(){super(...arguments),this.yu=!1,this.St=!0,this.Xs=!0,this.oi={boundElement:document,type:"click",listener:t=>{if(this.yu){this.yu=!1;return}this.onClickOrTap(t)}},this.vR=(t,e)=>{t.type===_t.TAP&&(this.yu=!0,this.onClickOrTap(e))}}validateArgs(t){return W(t)?R(t.selector):!1}onClickOrTap({target:t}){if(gt(t)&&Pe(t)){let e=Hs(t,this.args.selector);e&&this.onEventCallback({element:e})}}onInit(){if(!Nt(this.args.selector)){this.St=!1;return}this.Vn=new _l(this.vR)}onStart(){var t;this.St&&(pt(this.oi,this.Xs),(t=this.Vn)===null||t===void 0||t.observe())}onStop(){var t;this.St&&(ft(this.oi,this.Xs),(t=this.Vn)===null||t===void 0||t.disconnect())}}return j([I("onClickOrTap"),ot()],s.prototype,"onClickOrTap",null),s})(),g_=(()=>{class s{static _R(){var t,e,i,n;if("history"in window){let o=Object.getOwnPropertyDescriptors(history);if(!((t=o.pushState)===null||t===void 0)&&t.writable&&(!((e=o.replaceState)===null||e===void 0)&&e.writable))return history}if(History.prototype){let o=Object.getOwnPropertyDescriptors(History.prototype);if(!((i=o.pushState)===null||i===void 0)&&i.writable&&(!((n=o.replaceState)===null||n===void 0)&&n.writable))return History.prototype}at.warn("Unable to override pushState, replaceState",!0,"HistoryChangeObserver")}static Kc(){let t=s._R();s.oo===null&&pe(t==null?void 0:t.pushState)&&(s.oo=zt({target:t,methodName:"pushState",hook:({args:e})=>{s.Nm("pushstate",e)}})),s.ao===null&&pe(t==null?void 0:t.replaceState)&&(s.ao=zt({target:t,methodName:"replaceState",hook:({args:e})=>{s.Nm("replacestate",e)}}))}static Hr(t){var e,i;s.Te.add(t),s.Te.size===1&&((s.oo===null||s.ao===null)&&s.Kc(),(e=s.oo)===null||e===void 0||e.activate(),(i=s.ao)===null||i===void 0||i.activate(),pt(s.Mm),pt(s.km))}static Fr(t){var e,i;s.Te.delete(t),s.Te.size===0&&((e=s.oo)===null||e===void 0||e.deactivate(),(i=s.ao)===null||i===void 0||i.deactivate(),ft(s.Mm),ft(s.km))}static Nm(t,e){let i={type:t,state:e[0]};R(e[2])&&(i.url=e[2]),s.Er(i)}static popstateListener(t){s.Er({type:"popstate",state:t.state})}static hashchangeListener(t){s.Er({type:"hashchange",state:null,url:t.newURL})}static Er(t){csArray.prototype.forEach.call(is(s.Te),e=>{e(t)})}constructor(t){this.A=t}observe(){s.Hr(this.A)}disconnect(){s.Fr(this.A)}}return s.oo=null,s.ao=null,s.Mm={boundElement:Z,type:"popstate",listener:r=>s.popstateListener(r)},s.km={boundElement:Z,type:"hashchange",listener:r=>s.hashchangeListener(r)},s.Te=new Set,tt([I("popstateListener"),ot()],s,"popstateListener",null),tt([I("hashchangeListener"),ot()],s,"hashchangeListener",null),s})(),m_=(()=>{class s extends Wt{validateArgs(t){if(W(t)){let e=R(t.useDebounce),i=t.useDebounce==="yes"?Et(t==null?void 0:t.window):!0,n=R(t.listeners);return e&&i&&n}return!1}onInit(){this.args.useDebounce==="yes"?this.te=Vs(()=>{this.onEventCallback()},this.args.window):this.te=this.onEventCallback,this.G=new g_(t=>this.wR(t))}Dm(){return window.location.href}wR(t){let e=t.type==="replacestate"&&this.args.listeners.indexOf("replaceState")===-1,i=t.type==="hashchange"&&this.args.listeners.indexOf("hashchange")===-1;if(e||i)return;let n=this.Dm();this.xm!==n&&(this.xm=n,this.te())}onStart(){this.xm=this.Dm(),this.G.observe()}onStop(){this.G.disconnect()}}return s})(),y_=(()=>{class s extends Wt{constructor(){super(...arguments),this.St=!0,this.Xs=!0,this.oi={boundElement:document,type:"submit",listener:t=>this.submitListener(t)}}validateArgs(t){return W(t)?R(t.selector):!1}submitListener({target:t}){gt(t)&&Pe(t)&&qt.call(t,this.args.selector)&&this.onEventCallback({element:t})}onInit(){Nt(this.args.selector)||(this.St=!1)}onStart(){this.St&&pt(this.oi,this.Xs)}onStop(){this.St&&ft(this.oi,this.Xs)}}return j([I("submitListener"),ot()],s.prototype,"submitListener",null),s})(),E_=(()=>{class s extends Wt{constructor(){super(...arguments),this.St=!0,this.Lm={boundElement:document,type:"mouseover",listener:t=>this.mouseoverListener(t)},this.Vm={boundElement:document,type:"mouseleave",listener:t=>this.mouseleaveListener(t)}}validateArgs(t){return W(t)?R(t.selector):!1}onInit(){Nt(this.args.selector)||(this.St=!1)}mouseleaveListener({target:t}){gt(t)&&Pe(t)&&t[this.Wa]&&delete t[this.Wa]}mouseoverListener({target:t}){if(gt(t)&&Pe(t)){let e=Hs(t,this.args.selector);e!==null&&!e[this.Wa]&&(e[this.Wa]=!0,this.onEventCallback({element:e}))}}onStart(){this.St&&(this.Wa=csSymbol("Hovered"),pt(this.Vm,!0),pt(this.Lm,!0))}onStop(){this.St&&(ft(this.Lm),ft(this.Vm))}}return j([I("mouseleaveListener"),ot()],s.prototype,"mouseleaveListener",null),j([I("mouseoverListener"),ot()],s.prototype,"mouseoverListener",null),s})(),S_=(()=>{class s extends Wt{constructor(){super(...arguments),this.oi={boundElement:window,type:"hashchange",listener:t=>this.hashChangedListener(t)}}validateArgs(t){return!!W(t)}hashChangedListener(t){t.newURL&&t.newURL===t.oldURL||this.onEventCallback()}onInit(){}onStart(){pt(this.oi)}onStop(){ft(this.oi)}}return j([I("hashChangedListener"),ot()],s.prototype,"hashChangedListener",null),s})(),v_=(()=>{class s extends Wt{constructor(){super(...arguments),this.Ya=!0}validateArgs(t){return W(t)?R(t.selector):!1}onInit(){if(!Nt(this.args.selector)||!dr.isSupported()){this.Ya=!1;return}this.Ct=new dr({delay:0,trackOnce:!0,reobserve:!0}),this.B=new ne(t=>this.Eu(t),{closest:!0})}Eu(t){for(let e of t)this.Ct.observe(e)}Su(t,e){if(this.isStarted&&e===ci.VisibleInViewPort){let i=Hs(t,this.args.selector);i&&(this.onEventCallback({element:i}),this.stop(),this.Ya=!1)}}onStart(){this.Ya&&(this.Ct.start((t,e)=>this.Su(t,e)),this.B.observe(this.args.selector))}onStop(){this.Ya&&(this.Ct.stop(),this.B.disconnect())}}return s})(),__=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.url):!1}execute(t){this.commandsService.applyFromImplementation(Rn[0],[t.url],"ApiErrorsMaskUrlTemplate")}}return s})(),w_=(()=>{class s extends St{validateArgs(t){return W(t)?R(t.maskingPattern):!1}execute(t){this.commandsService.applyFromImplementation(Ol[0],[t.maskingPattern],"NetworkRequestMaskUrlTemplate")}}return s})(),hc="once per pageview",b_="always",T_=(()=>{class s extends Wt{constructor(){super(...arguments),this.vu=!1,this.qe=!1,this.no=!0}validateArgs(t){if(W(t)){let e=R(t.selector),i=t.frequency?t.frequency===hc||t.frequency===b_:!0;return e&&i}return!1}onInit(){dr.isSupported()&&(this.qe=!0,this.no=this.args.frequency?this.args.frequency===hc:!0,this.B=new ne((t,e)=>{if(e==="initial")for(let i of t)rt.isVisibleInViewportInForeground(i)&&(i[this._u]=!0);this.Eu(t)},{closest:!0}),this.Ct=new dr({delay:0,trackOnce:!1,reobserve:!0,allowSameMatch:!0}))}onStart(){!this.qe||this.isStarted||(this._u=csSymbol("skipElement"),this.vu=!1,this.Ct.start((t,e)=>this.Su(t,e)),this.B.observe(this.args.selector))}onStop(){!this.qe||!this.isStarted||(this.B.disconnect(),this.Ct.stop())}Su(t,e){if(this.isStarted&&e===ci.VisibleInViewPort){let i=t.closest(this.args.selector);if(i){if(i[this._u]){delete i[this._u];return}this.no&&this.stop(),(!this.no||!this.vu)&&(this.vu=!0,this.onEventCallback({element:i}))}}}Eu(t){for(let e of t)this.Ct.observe(e)}}return s})(),xn=(()=>{class s extends Wt{constructor(){super(...arguments),this.mu={pageviewTypes:["natural","artificial"]}}validateArgs(t){var e;return W(t)&&gs(t)&&csArray.isArray(t.pageviewTypes)&&Bn(t.pageviewTypes,n=>R(n))||(H.implementation(`BeforePageViewTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.pageviewTypes}, fallback to default config.`),this.args=this.mu),!0}onInit(){this.bR=this.args.pageviewTypes}onPageView(t){this.isStarted&&csArray.prototype.indexOf.call(this.bR,t)!==-1&&this.onEventCallback()}onStart(){}onStop(){}}return s})(),A_=(()=>{class s extends St{constructor(){super(...arguments),this.wu=!1}validateArgs(t){return W(t)&&R(t.type)&&R(t.urls)&&(t.type==="allow"||t.type==="block")&&csString.prototype.trim.call(t.urls).length>0?(this.wu=!1,!0):(H.implementation(`BlockAllowListForSRTemplate has wrong argument: ${t}, fallback to default config.`),this.wu=!0,!0)}execute(t){let e="";this.wu?e=kl:e=this.TR(t.urls,t.type),this.commandsService.applyFromImplementation(Dl[0],[e],"BlockAllowListForSRTemplate")}TR(t,e){let i=e==="allow"?"?!":"";return i+=csArray.prototype.join.call(csArray.prototype.map.call(csString.prototype.split.call(t,","),n=>`.*${csString.prototype.trim.call(n)}`),"|"),`^(${i}).*?`}}return s})(),R_=(()=>{class s{constructor(t){this.E=t,this.AR={ApiErrorsMaskUrl:__,NetworkRequestMaskUrls:w_,ArtificialPageview:zl,BlockAllowListForSr:A_,CustomError:Hv,CustomVariable:Bv,DataCsEncrypt:Fv,DataCsOverride:zv,DynamicVariable:qv,EcTransactionAll:Wv,EcTransactionCreate:Yv,EcTransactionItemsAdd:Xv,EcTransactionSend:Kv,ElementUnmasking:Jv,EventTriggerRecordingPage:Qv,EventTriggerRecordingSession:Zv,PageEvent:t_,PiiMasking:e_,RecordingEventTrigger:s_,SetPath:i_,SetQuery:r_,SrmOnlineAssets:n_,Submit:o_},this.Or={AfterPageView:p_,ElementAdded:c_,ElementBecomesVisible:T_,ElementExist:l_,ElementRemoved:h_,ElementVisibility:v_,ElementClick:f_,FormSubmit:y_,HashChange:S_,HistoryChange:m_,Mouseover:E_,PageState:d_,BeforePageView:xn}}RR(t){let e=this.AR[t.name];return e?new e(this.E,t.args):(H.error(`Implementations: template ${t.name} does not exist`),null)}CR(t){let e=this.Or[t.name];return e?new e(this.E,t.args,t.condition):(H.error(`Implementations: trigger ${t.name} does not exist`),null)}parse(t){let e=[];for(let{triggers:i,template:n}of t){let o=this.RR(n);if(!o)continue;if(!o.validateArgs(o.args)){H.implementation(`${n.name} has wrong argument.`);continue}for(let l of i){let h=this.CR(l);if(!h)continue;if(!h.validateArgs(h.args)){H.implementation(`${l.name} has wrong argument.`);continue}csArray.prototype.push.call(e,{name:`${l.name}_${n.name}`,trigger:h,template:o})}}return e}}return s})(),C_=(()=>{class s{constructor(t,e,i){this.IR=t,this.C=i,this.ke={window,document,location,cookies:{}},this.Or=new Set,this.PR=new R_(e)}init(){Object.defineProperty(this.ke,"cookies",{get:()=>this.NR()});let t=this.PR.parse(this.IR);for(let{name:e,trigger:i,template:n}of t)i instanceof xn&&n instanceof zl||(this.Or.add(i),i.onEvent(o=>{this.onTriggerEvent(o,n),G.counters.CSTCSnippetUsed.count(e)}))}start(t=!1){this.Or.forEach(e=>{e.condition&&!$l(e.condition,this.ke)||(t?this.C.schedule(()=>{e.start()}):e.start())})}stop(){this.Or.forEach(t=>{t.stop()})}onBeforePageView(t){this.Or.forEach(e=>{if(e instanceof xn){e.onPageView(t);return}})}onTriggerEvent(t,e){let i=this.MR(t),n={...this.ke,...i},o=[];if(lv(e.args)&&R(e.args.iterable)&&e.args.iterable.length>0){let c=Dv(e.args.iterable,n);if(gt(c)){let l=csArray.prototype.map.call(c,h=>({...n,$:h}));csArray.prototype.push.call(o,...l)}}else csArray.prototype.push.call(o,n);if(e instanceof Ii){for(let c of o)e.execute(e.args,c);return}for(let c of o){let l=kn(e.args,c);l&&e.execute(l)}}NR(){let t;try{t=document.cookie}catch{t=""}return csArray.prototype.reduce.call(csString.prototype.split.call(t,"; "),(e,i)=>{let[n,o]=csString.prototype.split.call(i,"=");return o!==void 0&&(e[n]=o),e},{})}MR(t){let e={...t};for(let i in e)ct(e[i])&&(x.isMaskedElement(e[i])||x.isMaskedElementChild(e[i]))&&delete e[i];return e}}return j([At("implementationsService.start")],s.prototype,"start",null),j([I()],s.prototype,"onTriggerEvent",null),s})(),I_=(()=>{class s{constructor(t,e,i){this.Is=new C_(t,e,i)}init(){this.Is.init()}onInitTracking(){this.Is.start(!0)}onOptout(){this.Is.stop()}onBeforeSessionRenewal(){this.Is.stop(),this.Is.start()}onBeforeArtificialPageView(){this.Is.stop(),this.Is.start(),this.Is.onBeforePageView("artificial")}onBeforeNaturalPageView(){this.Is.onBeforePageView("natural")}}return s})(),Gl=(()=>{class s{constructor(t){this.configuration=t}}return s})(),P_=(()=>{class s extends Gl{constructor(t,e,i){super(t),this.configuration=t,this.co=e,this.S=i,this.kR=V.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.Um=t,this.lo=void 0,this.DR()}init(t){this.xR();let e=yt.get(ie);e!==null&&Jn(e)?t(this.canCollect(Mp(e))):this.refreshQuota(i=>{t(i!==V.QUOTA_REACHED)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==V.QUOTA_REACHED}computeInitialCollectState(t){return this.lo?(this.S.emitCollectStateChange(this.lo,this.configuration.malkaEtrEnabled?Gt.ETR_ON:Gt.ETR_OFF),this.lo):(H.warn("Quota file error computeInitialCollectState() called before quota answered"),V.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===V.QUOTA_REACHED?V.QUOTA_REACHED:!yi.isRecordingSupported()&&this.isReplayRecorded(t)?V.ANALYTICS_ONLY:t.collectState===V.RECORDING_RULES_TARGETING?V.RECORDING_RULES_TARGETING:t.collectState===V.ANALYTICS_ONLY_RULES_TARGETING?V.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===V.RECORDING_GLOBAL_SAMPLING?V.RECORDING_GLOBAL_SAMPLING:V.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===V.RECORDING_GLOBAL_SAMPLING||t.collectState===V.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.lo||V.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return V.ANALYTICS_ONLY}ho(t){this.lo=t,this.Um&&this.Um(t)}xR(){this.co.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.co.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.co.onLoad(t=>this.quotaFileHandler(t))}DR(){this.co.isInProgress()||this.co.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.LR(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;H.warn(e),this.ho(this.kR)}LR(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&ms.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?yi.isRecordingSupported()?this.ho(V.RECORDING_GLOBAL_SAMPLING):this.ho(V.ANALYTICS_ONLY):e&&!i?this.ho(V.ANALYTICS_ONLY):this.ho(V.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return V.ANALYTICS_ONLY}}return j([I("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),j([I("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),O_=(()=>{class s extends Gl{constructor(t,e,i,n,o){super(t),this.configuration=t,this.S=e,this.tu=i,this.w=n,this.bu=o,this.Tu=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.Tu=!0,this.bu.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===V.QUOTA_REACHED||t.collectState===V.RECORDING_RULES_TARGETING||t.collectState===V.RECORDING_TEMPORARILY)&&(t.collectState=V.ANALYTICS_ONLY),t}computeInitialCollectState(){return Ze.isReplayConsentNeeded(this.configuration)?V.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.$a()}computeInitialCollectStateFromRecordingConsentGranted(){return this.$a()}$a(){if(!yi.isRecordingSupported())return V.ANALYTICS_ONLY;let t=V.ANALYTICS_ONLY,e=Gt.ETR_OFF;return ms.percentage()<this.configuration.replayRecordingRate||this.tu.isForceReplayRecorded()?t=V.RECORDING_GLOBAL_SAMPLING:this.Tu&&this.bu.evaluateUrl(this.w.getAnonymizedUrl())&&(t=V.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=Gt.ETR_ON),this.S.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!yi.isRecordingSupported())return V.ANALYTICS_ONLY;if(Ze.isRecordingBlockedByConsent(t))return t.collectState===V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:V.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===V.RECORDING_GLOBAL_SAMPLING)return V.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?Gt.ETR_ON:Gt.ETR_OFF;return this.Tu&&this.bu.evaluateUrl(this.w.getAnonymizedUrl())?(this.S.emitCollectStateChange(V.RECORDING_URL_SAMPLING,e),V.RECORDING_URL_SAMPLING):(this.S.emitCollectStateChange(V.ANALYTICS_ONLY,e),V.ANALYTICS_ONLY)}isReplayRecorded(t){return Ze.isRecordingBlockedByConsent(t)?!1:t.collectState===V.RECORDING_TEMPORARILY||t.collectState===V.RECORDING_GLOBAL_SAMPLING||t.collectState===V.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return V.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return V.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})();function N_(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function M_(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var k_=(()=>{class s{constructor(){this.VR={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.fs={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:N_(),Attributes:M_()};this.fs=x.getComputedSelectorSettings(t,this.fs)}init(){this.UR()}setMaskedElementSettingsFromCommand(t){if(t=x.sanitizeSelectorUserInput(t),!x.isSelectorUserInput(t))throw new Error(`Command misuse: ${fo[0]}`);this.Au(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Au(e)}getMaskedElementSettings(t){return t?this.jm(this.VR):this.fs}UR(){var t,e,i,n,o,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(h=>{R(h.attr)&&R(h.rule)&&l.Attributes.push({selector:h.rule,attrName:h.attr})}),this.Au(l)}Au(t){this.fs=this.jm(t)}jm(t){return x.getComputedSelectorSettings(t,this.fs)}}return s})();var D_=(()=>{class s{constructor(t,e){this.tt=t,this.pt=e,this.Ru=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.pt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Ru=!0}disableRemoveQueryString(){this.Ru=!1}get(){let t=this.Ru?this.tt.removeQueryString(this.Hm()):this.Hm();return this.tt.anonymizeUrl(t,{maskingPatterns:this.pt.getUrlMaskingPatterns()})}Hm(){let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),x_=60*1e3,L_=30*1e3,V_=(()=>{class s{constructor(t,e){this.R=t,this.O=e,this.Cu=!1,this.jR=vr(()=>this.R.refreshSession(),L_)}onSessionExpired(t){this.HR=t}isSessionValid(){return this.Cu?!0:!(!this.R.hasValidSession()||this.R.pollCacheRefreshEvent()&&this.O.isSessionRenewed())}isCurrentPageviewValid(){let t=this.R.hasValidSession();return this.R.pollCacheRefreshEvent(!1)?!this.O.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.jR():this.BR()&&(this.Bm=O.now(),this.renewSession())}renewSession(){this.Cu=!0,this.HR(),this.Cu=!1}BR(){return!document.hidden&&(!Y(this.Bm)||O.now()-this.Bm>x_)}}return s})();var U_=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,j_="$1CS_ANONYMIZED_NAME",H_=(()=>{class s{constructor(t){this.N=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],o=this.N.anonymizePII(t);if(o=this.N.anonymizeJwt(o),e.maskNames){let h=o;o=this.dn(o),o!==h&&(G.counters.redactedPII.count("name"),G.counters.redactedPII.count("name-in-url"))}let c=this.QR(o,i);if(c!==o)return G.counters.redactedPII.count("url"),c;let l=this.ZR(o,n);return l!==o&&G.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.Lu(t);return i!==""?`${e}?`:e}Lu(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}QR(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.Lu(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.tC(o,c);if(l!==null)return`${l}${n}`}return t}tC(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let o=t[n];if(n>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[n].key;if(this.Wm(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}ZR(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.Lu(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.eC(o,c);return`${csArray.prototype.join.call(o,"/")}${n}`}eC(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],m=e[n].key;if(this.Wm(m)&&l>=c){let d=e[n].value;csArray.prototype.push.call(i,h.length>0?d:""),n++,n===e.length&&(n=0);continue}if(h===m){csArray.prototype.push.call(i,h),n++,n===e.length&&(n=0);continue}for(let d=0;d<n;d++){let E=l-n+d;i[E]=t[E]}n=0,csArray.prototype.push.call(i,h)}for(let l=0;l<n;l++){let h=t.length-n+l;i[h]=t[h]}return i}Wm(t){return bt(t,Nl)}dn(t){return csString.prototype.replace.call(t,U_,j_)}}return s})(),B_=(()=>{class s{constructor(t,e,i,n,o,c){this.f=t,this.pi=e,this.ds=i,this.C=n,this.S=o,this.K=c}initWithQuota(){if(!this.f.collectionEnabled){this.Ym();return}let t=new Pf(this.f.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this._t=new P_(this.f,t,this.S),this._t.init(e=>{e?this.init():this.Ym()})}sC(){this.C.schedule(()=>{this.N=new wi,this.tt=new H_(this.N),this.w=new kS(window.location,this.tt),this.M=new mr(this.f,this.w,this.pi),this.M.init(),this.At=new LS,this.E=new NS([OS.UXA]),this.X=new DS,this.lt=new k_,this.bt=new yS(this.f,new hS(this.f,this.M,this.At),this.S)})}Ym(){}init(){ni.isSupported()&&ni.setDigestSalt(this.f.projectId.toString());let t,e,i,n,o,c,l,h,m,d,E,g,S,P,N,v,_,M,k,T,B,st,lt,Vt,Rt,b,D;this.sC(),this.C.schedule(()=>{E=new TS(window.location,this.M),new KS().init(),g=Cl.create(H.warn),d=new Uc(g),this._t===void 0&&(this._t=new O_(this.f,this.S,E,this.w,new Gc),this._t.init())}),this.C.schedule(()=>{t=new rS(this.f,this.M,this.K),e=new aS(t,this._t,this.S,this.f.replayConsentRequiredForSession,this.f.malkaEtrEnabled),i=new jS(this.f,this.M,this.K),n=new sS(this.f,i,this.S,e),this.ds.setContext(n,e)}),this.C.schedule(()=>{c=new lS(n,e,this.bt),l=new Dp(this.f,this.M,this.K),h=new SS(window.location,l),m=new vS(h),N=new cS(this.f,n,h),Rt=new $S(Ie,this.f),T=new zS(Rt,this.f.isChild),B=new GS(Rt),st=new qS(Rt),lt=new WS,Vt=new xS(T,B,st,lt),v=new PS(this.E,Vt),_=new wS(this.w),M=new bS(_,this.E);let U=new xp(this.f,this.M,this.K);b=new US(this.N,U),k=new VS(this.E,b);let F=new wp(n,e,h,b,this.f)}),this.C.schedule(()=>{let U=new eS(this.f,n,h,N,c,S,o,E);this.f.implementations&&(D=new I_(this.f.implementations,this.E,this.C),D.init(),this.S.addListener(D)),U.compute(F=>{this.C.schedule(()=>{v.init();let ht=new mS(this.f,this.E,this.bt,e,this.S),Dt=new AS(this.f,this.M,this.At),Bt=new RS(this.S,window.location,Dt),Ne=new IS(this.E,Bt),bs=new MS(this.E,this.f),Ft=new D_(this.tt,new Ml),Yt=new V_(e,n),Se,Pi,rs,Mt=new tc(this.f,n,e,P),Xt=new tc(this.f,n,e,P,Pi);F?(this.S.emitInitTracking(),new tS(Mt,Xt,g,n,e,Yt,Ft,this.S,this.E,v,this.f,Ne,Bt,ht,this.bt,this.N,Rt,this.tt,this.w,bs,this.X,Vt,b,k,_,M,this.C,d,this.M,this.At,this._t,this.lt,rs,Se).start()):new ES(this.S,this.E,v,Ne,Bt,m,ht).start()})})})}}return s})(),ps=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(_){let M=_.source,k=_.data;if(c(k)){let T=()=>{let B=n(t,k);E(B,()=>M.postMessage("csBundleLoaded",_.origin))};e=k.token,v(i.loadBundle),l(_.origin)&&T()}}};function n(_,M){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(_,"{version}",M.version),"{token}",M.token),"{domain}",M.domain)}function o(){return e}r.getToken=o;function c(_){return _&&_.type==="csBundleInjection"&&l(_.domain)&&m(_.version)&&h(_.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(_){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(_)||r.hjDomainRegex.test(_)}r.isAuthorizedDomain=l;function h(_){return/^[a-zA-Z0-9]+$/.test(_)}r.isAuthorizedToken=h;function m(_){return/^[a-zA-Z0-9\.]+$/.test(_)}r.isAuthorizedTagVersion=m;function d(){let _=window.opener||window.parent;return window!==_&&window.addEventListener}r.isActivable=d;function E(_,M){let k=document.createElement("script");k.type="text/javascript",k.async=!0,k.src=_,k.onload=M,k.charset="utf-8",document.head.appendChild(k)}r.addScript=E;function g(_){let M=document.createElement("link");M.rel="stylesheet",M.href=_,document.head.appendChild(M)}r.addStyle=g;function S(_){return`${_}?cb=${new csDate().getTime()}`}r.addCacheBusting=S;function P(){N(i.loadBundle)}r.waitForBundleInjection=P;function N(_){window.addEventListener("message",_,!1)}r.listen=N;function v(_){window.removeEventListener("message",_,!1)}r.removeListener=v}(s||(s={})),s})(),uc="_hp_ved",F_=18e5,$_="/js/ved.js",z_="/css/ved.css",G_="/js/ved.css",q_=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),W_=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var nn=(()=>{let s;return function(r){let t=!1,e;function i(E){return e+E}function n(){let E=[i(z_),i(G_)];csArray.prototype.forEach.call(E,g=>{ps.addStyle(g)})}function o(E){let g=new csRegExp("(^|;)[ ]*"+E+"=([^;]*)"),S=g.exec(document.cookie);return S?decodeURIComponent(S[2]):null}function c(E,g,S){let P=encodeURIComponent(E)+"="+encodeURIComponent(g),N=new csDate;N.setTime(N.getTime()+S);let v=P+"; expires="+N.toUTCString()+"; path=/";document.cookie=v}function l(){c(uc,"on",F_)}function h(){return o(uc)==="on"}r.isVLCookieEnabled=h;function m(E){window.heapV=Object.assign({},window.heap,{source:E==null?void 0:E.source,uri:e,loadArgs:E==null?void 0:E.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=m;function d(E,g){var S;if(e=E,g){let P={type:q_.StatusUpdate,value:W_.ReceivedInitMessage},N={targetOrigin:g==null?void 0:g.origin};(S=g==null?void 0:g.source)===null||S===void 0||S.postMessage(P,N)}t||(t=!0,l(),m(g),window.heapV&&(ps.addScript(i($_)),n()))}r.init=d}(s||(s={})),s})(),Y_=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,ps.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(T){var B;T.origin===l&&((B=T.data)===null||B===void 0?void 0:B.message)==="init"&&T.source&&(nn.init(l,T),_(h.initHeapVisualLabeler))},ping(T){typeof T.data=="string"&&T.data==="ping"&&E(T.origin)&&(c=T.origin,o=ps.hjDomainRegex.test(T.origin)?i:T.origin,_(h.ping),v(h.insertMessageScript),g(ps.addCacheBusting("utils.js")))},insertMessageScript:M(T=>{typeof T.data=="string"&&T.data!=="ping"&&(_(h.insertMessageScript),g(T.data))})};function m(){return ps.getToken()}r.getToken=m;function d(){return window!==t&&window.addEventListener}r.isActivable=d;function E(T){return csArray.prototype.some.call(n,B=>B.test(T))}r.isAuthorizedDomain=E;function g(T,B){let st=document.createElement("script");st.type="text/javascript",st.async=!0;let lt=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");st.src=`${lt}/${e}/${T}`,st.onload=B,st.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(st),S(T)}function S(T){csString.prototype.includes.call(T,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(T,"&mode=")[1])}function P(){v(h.ping),ps.waitForBundleInjection()}r.waitForConnection=P;function N(T){l=T,v(h.initHeapVisualLabeler),nn.isVLCookieEnabled()&&nn.init(l)}r.waitForHeapVisualLabeler=N;function v(T){window.addEventListener("message",T,!1)}r.listen=v;function _(T){window.removeEventListener("message",T,!1)}r.removeListener=_;function M(T){return function(B){B.origin===c&&T(B)}}r.secureListener=M;function k(T){c&&t.postMessage(T,c)}r.post=k}(s||(s={})),s})();var Yi=window.CSFrameCommunication||Y_;var X_=(()=>{class s extends mo{constructor(t){super(),this.C=t}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.C.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.C.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){H.error(e)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}}return j([At("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var K_=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let v=window.CSJavascriptBridge.getVersion();if(Et(v))return v}catch{H.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(v,_){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(v,csJSON.stringify(_))}r.identify=n;function o(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}r.resetIdentity=o;function c(v){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(v))}r.addUserProperties=c;function l(v){window.CSJavascriptBridge.sendEvent(csJSON.stringify(v))}r.sendAnalysisEvent=l;function h(v){if(window.CSJavascriptBridge.sendSREvent)for(let _ of v.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(_))}r.sendSREvent=h;function m(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(v))}r.sendLog=m;function d(){window.CSJavascriptBridge.optIn()}r.sendOptIn=d;function E(){window.CSJavascriptBridge.optOut()}r.sendOptOut=E;function g(v,_){window.CSJavascriptBridge.sendDynamicVar(v,_)}r.sendDynamicVariable=g;function S(v,_,M){window.CSJavascriptBridge.sendTransaction(v,_,M)}r.sendTransaction=S;function P(v,_){if(window.CSJavascriptBridge.sendAssets){let M=csJSON.stringify(v);window.CSJavascriptBridge.sendAssets(M,_||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(v,M=>M.assetId))}r.sendAssets=P;function N(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(v))}r.sendNativeSREvent=N}(s||(s={})),s})();var J_=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),Q_=(()=>{class s{constructor(t,e,i){this.f=t,this.wt=e,this.ds=i}start(){var t,e,i,n,o;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.f.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new J_,l=new Tl(!!(!((t=this.f.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.f.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.f.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),h=new mp(this.wt,this.f);h.init();let m=new Ep(this.f,h);if(this.wt.isTopWindowTracker()&&m.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&H.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){H.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}fp();let E=new X_(l),g=new B_(this.f,h,this.ds,l,E,c);this.f.isQuotaEnabled()?g.initWithQuota():g.init()}let d=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(E){return x.isMaskedElement(E)||x.isMaskedElementChild(E)},isAttributeSensitive(E,g){return x.isMaskedAttribute(E,g)},getSensitiveAttributes(E){return di(E.attributes,g=>x.isMaskedAttribute(E,g.name))}},Console:{warn(E){d&&console.warn("cs.tracking.warning",E)},error(E){d&&console.error("cs.tracking.error",E)}},Version:kc},window.CSFrameCommunication||(window.CSFrameCommunication=Yi,Yi.isActivable()&&Yi.waitForConnection(),this.f.isCsCrosswritingHeap()&&Yi.waitForHeapVisualLabeler(this.f.getHeapWebAppUri()))}}return j([At("main.start"),I("main.start")],s.prototype,"start",null),s})(),Z_=(()=>{class s{constructor(){}send(t,e,i=ut.warn){let n={message:t,errorCode:e,level:i};K_.sendLog(n)}}return s})();var tw=(()=>{class s{constructor(t,e,i){this.Y=t,this.N=e,this.iI=i,this.kt=[],this.rI=Xn().v}flush(){this.kt.length!==0&&(this.Y.send({m:csArray.prototype.map.call(this.kt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.N.anonymizePII(window.location.pathname),pid:this.iI,v:this.rI}),this.kt=[])}push(t){csArray.prototype.push.call(this.kt,...t),this.flush()}}return s.DEBOUNCE_INTERVAL=5e3,j([wu(s.DEBOUNCE_INTERVAL)],s.prototype,"flush",null),s})();function ew(s,r){let t=s.validationRate/10,e=ms.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let o=Cl.create(H.warn,r.isTopWindowTracker()),l=new Uc(o).create(s.getMetricsUri(),!0),h=new wi,m=new tw(l,h,s.projectId);G.setService(m)}catch(o){H.warn(`Error initializing metrics: ${o.message}`)}}function sw(){var s;Nu();let r=new Vd(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new Ud(window,r);t.init();let e=new lp;if(Eu(H),hp(),H.computeIsActive(r.validationRate),t.isTopWindowTracker()){let o=new rp(r,e);H.setStrategy(o)}else if(t.isInWebViewContext()){let n=new Z_;H.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=Ss(window,"MutationObserver")),Ed(),ew(r,t),new Q_(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{up(sw)}catch{}});})();

// signature-0714228e98a3e2384cb7e7cdfb3e28ef438e9775d6099be94620a8fd784e02f3